<html>
<head>
  <link rel="stylesheet" href="images/style.css" type="text/css"/>
  <meta http-equiv="content-type" content="text/html;charset=iso-8859-1"/>
</head>

<body>
  <div>
    <table bgcolor="#ffffff" width="100%">

      <!-- header -->

      <tr>
        <td>
          <table id="header" cellspacing="0" cellpadding="0">
            <tr>
              <td><img src="images/yklogo.gif"/></td>
              <td id="header-central-part">
                <table cellpadding="0" cellspacing="0" height="100%">
                  <tr valign="top" hight="100%">
                    <td id="header-logo-row">
                      <table cellpadding="0" cellspacing="0" >
                        <tr>
                          <td><img src="images/yklogo2.gif"/></td>
                          <td id="header-dont-get-lost">Don't get lost in data, get information!</td>
                        </tr>
                      </table>
                    </td>
                  </tr>

                  <!-- navigator -->

                  <tr valign="bottom">
                    <td>
                      <table cellpadding="0" cellspacing="0" width="100%">
                        <tbody>
                          <tr>
                            <td width="100%"/>
                            <td id="header-selected-topic">HELP</td>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;</td>
<td id="header-non-selected-topic"><a class="topic" href="../faq/index.html">FAQ</a></td>
<td>&nbsp;&nbsp;</td>
<td>&nbsp;&nbsp;</td>
<td id="header-non-selected-topic"><a class="topic" href="../printer-friendly-help/index.html"><nobr>PRINTER FRIENDLY HELP</nobr></a></td>
                            <td width="100%"/>
                          </tr>
                        </tbody>
                      </table>
                    </td>
                  </tr>

                </table>
              </td>
              <td><img src="images/the-java-profiler.gif"/></td>
            </tr>
          </table>
        </td>
      </tr>

      <!-- content -->

      <tr>
        <td valign="top">
          <table>
  <tr>
    <td id="topic-tree" width="29%" valign="top">
      <div>
      <ul id="bulletless-list">
<li id="topic-link">Getting started</li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/index.html">Running profiler</a></li>
<li id="topic-link"><a href="../help/running_with_profiler.html">Running applications with profiler</a></li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/agent.html">Agent configuration</a></li>
</ul>
</ul>
<li id="topic-link"><b>Solution of performance problems</b></li>
<li id="topic-link">CPU profiling</li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/cpu_howto.html">How to profile CPU</a></li>
<li id="topic-link"><a href="../help/cpu_methods.html">Methods of CPU profiling</a></li>
<li id="topic-link"><a href="../help/cpu_stat.html">CPU Statistics view</a></li>
<li id="topic-link"><a href="../help/cpu_method_view.html">Method view</a></li>
<li id="topic-link"><a href="../help/cpu_snapshot_properties.html">CPU snapshot properties</a></li>
</ul>
<li id="topic-link">Memory profiling</li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/memory_snapshots.html">Snapshots</a></li>
<li id="topic-link"><a href="../help/allocations.html">Allocation recording</a></li>
<li id="topic-link"><a href="../help/sizes.html">Shallow and retained sizes</a></li>
<li id="topic-link">Memory views</li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/objects_view.html">Objects view</a></li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/objects_view_stat.html">Statistics</a></li>
<li id="topic-link"><a href="../help/objects_view_explorer.html">Object Explorer</a></li>
<li id="topic-link"><a href="../help/objects_view_alloc_hot_spots.html">Allocation hot spots</a></li>
<li id="topic-link"><a href="../help/objects_view_alloc_tree.html">Allocation call tree</a></li>
</ul>
<li id="topic-link"><a href="../help/garbage.html">Garbage view</a></li>
<li id="topic-link"><a href="../help/mem_method_view.html">Method view</a></li>
<li id="topic-link"><a href="../help/gc_roots.html">GC roots view</a></li>
<li id="topic-link"><a href="../help/paths.html">Working with paths</a></li>
</ul>
<li id="topic-link"><a href="../help/compare_snapshots.html">Ability to compare snapshots</a></li>
<li id="topic-link"><a href="../help/memory_actions.html">Useful actions</a></li>
<li id="topic-link"><a href="../help/memory_snapshot_properties.html">Memory snapshot properties</a></li>
<li id="topic-link"><a href="../help/language.html">Set description language</a></li>
</ul>
<li id="topic-link"><a href="../help/ide_integration.html">IDE integration</a></li>
<ul id="bulletless-list">
<li id="topic-link"><a href="../help/ide_integration_plugins.html">Installation of plugins</a></li>
<li id="topic-link"><a href="../help/ide_integration_run.html">Run profiling-enabled applications from IDE</a></li>
<li id="topic-link"><a href="../help/ide_integration_navigation.html">Navigation action</a></li>
</ul>
<li id="topic-link"><a href="../help/filters.html">Filters</a></li>
<li id="topic-link"><a href="../help/options.html">User interface customization</a></li>
<li id="topic-link"><a href="../help/api.html">Profiler API</a></li>
</ul>

      </div>
    </td>
    <td id="topic" valign="top">
      <div>
      <h2 class="faq">Solution of performance problems</h2>


  <h2>What performance problems could be?</h2>

  <p>
    Memory-related:<br/>
    <ul>
      <li>Application uses more memory than it could</li>
      <li>Memory leaks</li>
      <li>Excessive garbage allocation - application creates a lot of temporarily objects</li>
    </ul>
  </p>

  <p>
    Code-related:<br/>
    <ul>
      <li>Application algorithms are not optimal - there are performance bottlenecks</li>
    </ul>
  </p>
  <br/>
  <br/>

  <h2>Why memory-related issues can be performance problems?</h2>

  <p>
    Memory-related issues affect execution speed and reliability of application:
    <ul>
      <li>
        When Java Virtual Machine cannot allocate an object because it is out of memory, and no more memory could be made
        available by the garbage collector, OutOfMemoryError is thrown, which can cause application crash or further unstable work.
      </li>
      <li>
        Application that uses a lot of memory reduces available physical memory for itself and other programs
        and forces operating system to swap memory pages to and from disk more frequently, which leads to serious overall system performance degradation.
      </li>
      <li>
        Java Virtual Machine spends more time to perform garbage collection when more objects exist and more temporarily objects are created.
      </li>
    </ul>
  </p>
  <br/>
  <br/>

  <h2>How to find why application eats that much memory?</h2>

  <p>
    <ul>
      <li><a href="running_with_profiler.html">Run profiling-enabled application</a>.</li>
      <li>Connect to application from "Control Panel". Hint: DO NOT <a href="allocations.html">record allocations</a> as they are not needed to solve this task.</li>
      <li>Capture and open memory snapshot.</li>
      <li>Use <a href="objects_view_stat.html">Class tree</a> in the "All Objects".</li>
    </ul>
  </p>
  <br/>
  <br/>

  <h2>How to find memory leak?</h2>

  <p>
    <i>Memory leak</i> - object(s) that are not needed anymore according to the logic of application,
    but still retain memory and cannot be collected because they are referenced from other live objects
    due to a bug in application.
  </p>

  Your steps could be:
  <ol>
    <li>
      Detect memory leak, i.e. understand <i>what</i> objects do exist but should not.<br/>

      <p>
        If you <b>do not know yet what objects are leaked</b>, profiler can help to find it out.
      </p>

      <p>
        You can <a href="compare_snapshots.html">compare memory snapshots</a>, one of which represents
        memory state without leak, and another - already with leak, and easily find leaked objects.
      </p>

      <p>
        You can also analyse single snapshot with help of <a href="objects_view.html">Statistics section of Objects view</a> to find how memory is distributed between
        instances of different classes.
      </p>

      <p>
        Often potential leaks in particular profiled application are <b>already well known</b> e.g. you know class of objects that have "tendency" to
        leak while application is being developed, changed, refactored.
        It's easy to check presence of such objects with help of <code class="action">View | Instances by Class... (Ctrl+N or from popup menu)</code>.
        In more complex cases you can use <a href="language.html">Set description language</a> to declare sets of potentially leaked objects.
      </p>

      <p>
        Note that even one class can have objects legally and illegally (leaked objects) retained in memory.
        To distinct them, you can use <a href="objects_view_explorer.html">objects explorer</a> to see outgoing or incoming references. For example,
        object can have a field that references a human-readable String identifier.
      </p>
    </li>
    <li>
      <p>
      Once you have found leaked object(s), it's time to understand why they retain in memory.
      Having leaked object(s) selected in a memory view, use <code class="action">Find | Paths from GC Roots... (Ctrl+P)</code>.
      See <a href="paths.html">Working with paths</a> for details.
      </p>

      <p>
        Hint: Browsing paths, use <a href="ide_integration_navigation.html">navigation</a> feature of IDE integration.
      </p>
    </li>
  </ol>
  <br/>
  <br/>

  <h2>How to find excessive garbage allocation?</h2>

  <p>
  Purpose: reduce time garbage collector spends to collect temporarily objects.
  </p>

  <p>
  Let's assume there's a <i>task</i> in your application that you want to profile.
  </p>

  <ul>
    <li><a href="running_with_profiler.html">Run profiling-enabled application</a>.</li>
    <li>Connect to application from "Control Panel".</li>
    <li>Start to <a href="allocations.html">record allocations</a> right before the start of the <i>task</i>.</li>
    <li>Wait until the <i>task</i> finishes or performs long enough.</li>
    <li>Capture memory snapshot and stop allocation recording.</li>
    <li>Open snapshot and use <a href="garbage.html">Garbage</a> view.</li>
  </ul>
  <br/>
  <br/>

  <h2>How to find performance bottleneck via CPU profiling?</h2>

  <p>
  Let's assume there's a <i>task</i> in your application that you want to profile.
  </p>

  <ul>
    <li><a href="running_with_profiler.html">Run profiling-enabled application</a>.</li>
    <li>Connect to application from "Control Panel".</li>
    <li>Choose profiling <a href="cpu_methods.html">method</a> and start profiling right before the start of the <i>task</i>.</li>
    <li>Wait until the <i>task</i> finishes or performs long enough.</li>
    <li>Capture CPU snapshot and open it.</li>
    <li>Use <a href="cpu_stat.html">CPU Statistics view</a>.</li>
  </ul>

        <!--
        example - String concat in loop...
        Better use stringbuffer
        -->

      </div>
    </td>
  </tr>
</table>

        </td>
      </tr>

      <!-- footer -->

      <tr>
        <td>
          <table cellpadding="0" cellspacing="0" width="100%">
            <tr>
              <td id="footer_left">YourKit Java Profiler 3.2</td>
              <td id="footer">Copyright (c) 2003-2004 YourKit, LLC. All rights reserved.</td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </div>
</body>
</html>
