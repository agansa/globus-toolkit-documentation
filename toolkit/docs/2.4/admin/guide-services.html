<?php

$title = "Globus 2.4 Services";

include_once( "/mcs/www-unix.globus.org/include/globus_header.inc" ); 

?>

<h1 class="first"><?php echo $title; ?></h1>


<p>This section will give a more in-depth view of the installed services, for the purpose
of understanding the servers well enough to understand both advanced service
configuration, as well as sophisticated client usage. The clients themselves will be
covered in the <a href="guide-user.html">User's Guide</a>, but this section provides
useful background material. 

<ol>
  <li><a href="#gram">Implementation of GRAM</a></li>
  <li><a href="#mds">Implementation of MDS</a></li>
  <li><a href="#gridftp">Implementation of GridFTP</a></li>
</ol>


<h2><a name="gram">Implementation of GRAM</a></h2>


<h3>The short story</h3>

<p>The GRAM service is mainly provided by a combination of two programs: the gatekeeper,
and the jobmanager.</p>

<p>The gatekeeper provides functionality which is similar to a secure inetd. It
authenticates an inbound request using GSI, and determines how that user will be
authorized locally by mapping it to a local user id. The incoming request specifies a
particular local service to launch. That local service is usually a jobmanager.</p>

<p>The client composes its request in the Resource Specification Language (RSL), which is
passed to the jobmanager by the gatekeeper. The jobmanager then parses the request, and
translates it into the language of the local scheduler.</p>

<p>The jobmanger will then return a contact string which the client can use to check up on
ongoing job status, or to cancel a job in progress.</p>

<p>GRAM also provides the ability to stage in data or executables, using a facility called
Global Access to Secondary Storage (GASS). If you exercise this option, the jobmanager
will contact your client before submitting the job in order to retrieve whatever files you
wanted to stage in. The jobmanager also uses the GASS facilities to keep track of the
output of your various jobs.</p>

<h3>The long story</h3>

<p>In more detail, the GSI authentication is performed using the X.509 public certificate
standard. These are the public and private key that were generated by the
grid-cert-request program covered in the <a href="guide-verify.html#cert">verification
section</a>. Part of the trust of authentication is established by the Certificate
Authority (CA) which signed your key.</p>

<p>By default, the Globus Toolkit(tm) is configured to trust the Globus CA, and requests
certificates from that CA as well. This is setup mainly to provide an easy way to install
and test the Toolkit without having to go through the infrastructure work of establishing
a CA, if there were not a CA already available to you. However, for greater security, if
you are a member of a Virtual Organization (VO), you should establish trust in a separate
CA, and remove trust from the Globus CA. We will show you how to do this in the <a
href="guide-configure.html">advanced configuration section</a>.</p>

<p>The authentication does not use your certificate itself. Instead, it generate a proxy
certificate, signed by your original certificate, when you run <code>grid-proxy-init</code>.
This proxy has a limited lifetime, and its private key is protected by filesystem
permissions, not a key. This is similar to the generation of a Kerberos ticket, if you are
familiar with them. It is this proxy (located in /tmp) which you use to authenticate to
the gatekeeper.</p>

<p>Assuming that the gatekeeper has been configured to trust the CA which signed your
certificate, the next step is authorization. By default, the gatekeeper is looking for a
file called <code>/etc/grid-security/grid-mapfile</code>. This file should contain
mappings of certificate subject names to local user names, like the following: </p>

<pre>     &quot;/O=Grid/O=Globus/OU=your.domain.edu/CN=Your Name&quot;    youruser</pre>

<p>Assuming that your subject appears in the grid-mapfile, and translates to a valid user
id, the gatekeeper will then launch the jobmanager you requested under your mapped user
id. The set of configured jobmanagers is in <code>$GLOBUS_LOCATION/etc/grid-services</code>.
The <a href="guide-configure.html#jobmanager">advanced configuration section</a> explains
how to add jobmanagers. By default, the &quot;fork&quot; jobmanager is setup, which simply
uses fork/exec to launch a job on the same machine as the gatekeeper is running on. Most
other jobmanagers interface to a scheduler in order to submit jobs.&nbsp;&nbsp;</p>

<p>With GRAM 1.6, the jobmanager scripts are written in perl, and sit
under the $GLOBUS_LOCATION/lib/perl directory.&nbsp; See the configuration files
section for more details.</p>

<p>During the gatekeeper's communication with your client, you also created a delegated
proxy from your user proxy (which was itself created by your original certificate). The
gatekeeper lets the jobmanager know where to find this delegate proxy by setting the <code>X509_USER_PROXY</code>
environment variable. If the jobmanager needs to communicate back to your client (to
retrieve a staged file, or to deliver stdout/stderr), it uses this delegated proxy to
authenticate itself to you.</p>

<p>While your job is running, the output is collecting into a GASS cache, located in your
home directory under <code>.globus/.gass_cache</code> by default. If you use an
interactive client, the jobmanager will deliver the output when the job is done, and clean
this cache up automatically. If you use a batch client, you can perform retrieval and
cleanup manually. See the <a href="guide-user.html">user guide</a>, under the
globus-job-run and globus-job-submit sections to see examples of both types of behavior.</p>


<h2><a name="mds">Implementation of MDS</a></h2>

<p>The Metacomputing Directory Service (MDS) is part of the information infrastructure of
the Globus Toolkit. The MDS provides a framework for managing static and dynamic
information about the status of a computational grid and all its components: networks,
compute nodes, storage systems, instruments.</p>

<p>MDS consists of two main components: the local server (GRIS) and the aggregate server
(GIIS).</p>

<p>The GRIS is responsible for collecting information about a resource. This can involve
details such as amount of disk, amount of memory, number and speed of processors, etc. You
can query a GRIS directly, but it is often more useful to search in an aggregate
directory.</p>

<p>Any number of GRISes can report into an aggregate directory called a GIIS. A GRIS
registers itself to a GIIS using the Grid Resource Registration Protocol (GRRP).
Additionally, you can create a hierarchy of GIIS servers, which is useful for virtual
organizations.</p>

<p>MDS 2.4 contains the following new features:</p>


<ul>
  <li>Flexible handling of stale data via a new parameter in the 
    grid-info-slapd.conf file.</li>
  <li>Improved GRIS/GIIS processing by allowing multiple GRISes in a 
    slapd server.</li>
</ul>
<p>See <a href="../mds/NewFeatures.html">MDS 2.4 New 
Features</a>
for a complete description of these features.</p>


<h2><a name="gridftp"></a>Implementation of GridFTP</h2>


<p>Our implementation of the GridFTP protocol takes the form of two APIs and corresponding
libraries: <a href="http://www-unix.globus.org/api/c/globus_ftp_control/html/index.html">globus_ftp_control</a>
and <a href="http://www-unix.globus.org/api/c/globus_ftp_client/html/index.html">globus_ftp_client</a>.
Our libraries use high-performance I/O and security services provided by the Globus
Toolkit.</p>

<p>Besides supporting the protocol features described above, our APIs also include
interfaces for adding software &quot;plug-ins&quot;. These plug-ins allow developers to
add customized reliability and fault tolerance, performance monitoring, and extended data
processing.</p>

<p>In addition to our software libraries, we have also implemented an API/library (<a
href="http://www-unix.globus.org/api/c/globus_gass_copy/html/index.html">globus_gass_copy</a>)
and a command-line tool (globus-url-copy) that integrates GridFTP, HTTP, and local file
I/O to enable secure transfers using any combination of these protocols.</p>

<p>Finally, we have adapted a popular FTP server package (Washington University's wu-ftpd)
to support a majority of the GridFTP protocol features (GSI security, parallel transfer,
third-party transfer, partial file transfer).</p>

<hr>

<address>
  <a href="mailto:bacon@mcs.anl.gov">Charles Bacon</a> 
</address>
<!-- Created: Fri Feb 22 11:31:30 CST 2002 -->
<!-- hhmts start -->

<p>Last modified: Wed Sep 27 14:32:22 CST 2002 <!-- hhmts end --> 

<?php include("/mcs/www-unix.globus.org/include/globus_footer.inc"); ?>
