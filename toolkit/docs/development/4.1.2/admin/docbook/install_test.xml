<chapter id="gtadmin-install" xreflabel="Installing GT &shortversion;">
    <title>Installing GT &shortversion;</title>
    <section><title>Basic Installation</title>
<!-- basic instructions -->
    <orderedlist>
        &steps123_installing;
        <listitem>
            <para>
                Run:
            </para>
            <screen>globus$ make</screen>
            <para>
                Note that this command can take several hours to complete.
                If you wish to have a log file of the build, use 
                <command>tee</command>:
            </para>
            <screen>globus$ make 2>&amp;1 | tee build.log</screen>
            <para>
                The syntax above assumes a Bourne shell. If you are
                using another shell, redirect stderr to stdout and
                then pipe it to <command>tee</command>.
            </para>
            <note>
                <simpara>Using make in parallel mode (-j) is not entirely safe,
                and is not recommended.</simpara>
            </note>
        </listitem>

	<listitem>
		<para>
			Finally, run:
		</para>
		<screen>globus$ make install</screen>
		<para>
			This completes your installation.  Now
			you may move on to the configuration
			sections of the following chapters.
                </para>
                <para>
			We recommend that you install any security
                        advisories available for your installation,
which are available from the <ulink url="http://www.globus.org/toolkit/advisories.html">
			Advisories page</ulink>.  You may also
be interested in subscribing to some <ulink url="http://www.globus.org/toolkit/support.html#mailinglists">mailing lists</ulink> for general discussion
and security-related announcements.
		</para>
	</listitem>
    </orderedlist>
        <!-- add note for custom install - you can build only certain components by using make <package> blah blah
        and then link to packing appendix (which needs more gridftp targets-->
  
    <!-- then, you can cut down gridftp admin section so that it points here? - gridftp section is actually too big -->
    
    <para>
	    Your next step is to setup security, which
	    includes picking a CA to trust,
	    getting host certificates, user certificates, 
	    and creating a grid-mapfile.  The next three
	    chapters cover these topics.
    </para>
    <para>
	    With security setup, you may start a GridFTP server, 
	    configure a database for RFT, and configure WS-GRAM.
	    You may also start a GSI-OpenSSH daemon, setup
	    a MyProxy server, run RLS, and use CAS.  The
	    following chapters will explain how to configure
	    these technologies.  If you follow the chapters
	    in order, you will make sure of performing tasks
	    in dependency order.
    </para>
        
    </section>
    <section id="gtadmin-install-nondefault"><title>Advanced Installation</title>
        
        <section id="gtadmin-install-build-cvs"><title>Building from CVS</title>
            <para>[For advanced developers: general instructions for building from CVS and then list of branches? just link to existing page...]</para>
        </section>
        
        <section id="gtadmin-install-build-source"><title>Building a specific package from source</title>
            <para>[For advanced developers: general instructions for building from source then table with list of packages?]</para>
        </section>
        
        <section  id="gtadmin-install-gridftp"><title>Non-default Options for Building GridFTP</title><!-- should these be appendices? -->
            
        <section id="gtadmin-install-gridftp-only"><title>Building only GridFTP and Utilities</title>
            <indexterm type="howto-data"><primary>building and installing GridFTP</primary><secondary>only GridFTP and Utilities</secondary></indexterm>

            <para>If you wish to install GridFTP without installing the rest of the Globus Toolkit, follow these steps with the following exception: 
                <emphasis>you do not need Ant, a JDK, or a JDBC database to build only GridFTP</emphasis>.</para>
            
            <orderedlist>
                &steps123_installing;
                <listitem><para>Run:
                </para>
                    <screen>globus$ make gridftp</screen>
                    <para>
                        If you wish to have a log file of the build, use
                        <command>tee</command>:
                    </para>
                    <screen>globus$ make gridftp 2>&amp;1 | tee build.log</screen>
                    <para>
                        The syntax above assumes a Bourne shell. If you are
                        using another shell, redirect stderr to stdout and
                        then pipe it to <command>tee</command>.
                    </para>
                </listitem>
            </orderedlist>
        </section>
        
        <section id="gtadmin-install-gridftp-server-only"><title>Building only the GridFTP server</title>
            <indexterm type="howto-data"><primary>building and installing GridFTP</primary><secondary>only the GridFTP server</secondary></indexterm>
            
            <para>If you wish to install only the GridFTP server, follow these steps:</para>
            
            <orderedlist>
                &steps123_installing;
                <listitem><para>Run:
                    
                    <screen>globus$ make gpt globus_gridftp_server</screen>            </para>
                    <para>
                        If you wish to have a log file of the build, use
                        <command>tee</command>:
                        <screen>globus$ make gpt globus_gridftp_server 2>&amp;1 | tee build.log</screen></para>
                    <para>
                        The syntax above assumes a Bourne shell. If you are
                        using another shell, redirect stderr to stdout and
                        then pipe it to <command>tee</command>.
                    </para>
                </listitem>
            </orderedlist>
            
        </section>
        
        <section id="gtadmin-install-gridftp-client-only"><title>Building only the GridFTP client</title>
            <indexterm type="howto-data"><primary>building and installing GridFTP</primary><secondary>only the GridFTP client</secondary></indexterm>
            <para>If you wish to install only the GridFTP <glossterm>client</glossterm>, follow these steps:</para>
            
            <orderedlist>
                &steps123_installing;
                <listitem><para>Run:
                    <screen>globus$ make globus-data-management-client</screen>  </para>
                    <para>
                        If you wish to have a log file of the build, use
                        <command>tee</command>:
                        <screen>globus$ make globus-data-management-client 2>&amp;1 | tee build.log</screen></para>
                    <para>
                        The syntax above assumes a Bourne shell. If you are
                        using another shell, redirect stderr to stdout and
                        then pipe it to <command>tee</command>.</para>
                </listitem>
            </orderedlist>
            
        </section>
        
        <section  id="gtadmin-install-gridftp-sdk-only"><title>Building only the GridFTP SDK</title>
            <indexterm type="howto-data"><primary>building and installing GridFTP</primary><secondary>only the GridFTP SDK</secondary></indexterm>
            <para>If you wish to install only the GridFTP SDK, follow these steps:</para>
            
            <orderedlist>
                &steps123_installing;
                <listitem><para>Run:
                    <screen>globus$ make globus-data-management-sdk</screen></para>
                    <para>
                        If you wish to have a log file of the build, use
                        <command>tee</command>:
                        
                        <screen>globus$ make globus-data-management-sdk 2>&amp;1 | tee build.log</screen></para>
                    <para>
                        The syntax above assumes a Bourne shell. If you are
                        using another shell, redirect stderr to stdout and
                        then pipe it to <command>tee</command>.
                    </para>
                </listitem>
            </orderedlist>
            
        </section>
        
        <section id="gtadmin-install-gridftp-combo"><title>Building a combination of GridFTP elements</title>
            <indexterm type="howto-data"><primary>building and installing GridFTP</primary><secondary>only a combination of certain GridFTP elements</secondary></indexterm>
            <para>If you wish to build a combination of GridFTP elements, follow these steps:</para>
            
            <orderedlist>
                &steps123_installing;
                <listitem><para>Run:
                    <screen>globus$ make [any combination of the above commands, each separated by a space]</screen></para>
                    
                    <para>For example, if you just want to install the GridFTP server and client, the command would be:
                        <screen>globus$ make gpt globus_gridftp_server globus-data-management-client</screen></para>
                    <para>
                        If you wish to have a log file of the build, use
                        <command>tee</command>:
                        <screen>globus$ make [any combination of the above commands, each separated by a space] 2>&amp;1 | tee build.log</screen></para>
                    <para>The syntax above assumes a Bourne shell. If you are using another shell, redirect stderr to stdout and
                        then pipe it to <command>tee</command>.
                    </para>
                </listitem>
            </orderedlist>
            
        </section>
        
        <section id="gtadmin-install-gridftp-static-server"><title>Building and Installing a static GridFTP server</title>
            <indexterm type="howto-data"><primary>building and installing GridFTP</primary><secondary>only a static GridFTP server</secondary></indexterm>
            <para>If you wish to build and install a statically linked set of GridFTP binaries, follow these steps:</para>
            
            <orderedlist>
                &steps123_installing;
                <listitem><para>Run:</para>
                    <screen>globus$ export GLOBUS_LOCATION=/usr/local/globus-&shortversion;.0
                        globus$ ./configure --prefix=$GLOBUS_LOCATION --with-buildopts="--static" </screen>
                    <screen>globus$ make gpt globus_gridftp_server</screen>
                    <para>
                        If you wish to have a log file of the build, use
                        <command>tee</command>:
                    </para>
                    <screen>globus$ make gpt globus_gridftp_server 2>&amp;1 | tee build.log</screen>
                    <para>
                        The syntax above assumes a Bourne shell. If you are
                        using another shell, redirect stderr to stdout and
                        then pipe it to <command>tee</command>.
                    </para>
                </listitem>
            </orderedlist>
            
        </section>

        </section>
        
        <section id="gtadmin-install-rls"><title>Building and Installing RLS</title>
            <!-- too many sections, this needs to be a standalone page that gets linked to: 
            &RLS_Build_Install;
            -->
            <para>link to RLS_Build_Install page</para>
        </section>
        
        <!-- simpleca has complicated installation instructions, but seems that might be served better in the security section... -->
        
        <section id="gtadmin-install-openssh-buildtime"><title>Optional Build-Time Configuration for GSI-OpenSSH</title>
            <para>
                You can optionally pass build-time configure options to the
                GSI-OpenSSH package using the --with-gsiopensshargs option when
                running configure for your GT &shortversion; installation.
                For example:
                <blockquote><para>
                    <screen>./configure --prefix=$HOME/globus 
                        --with-gsiopensshargs="--with-pam"</screen>
                </para></blockquote>
                No options are typically needed for client-only
                installations, but options are often needed for full server
                functionality.
                The following table lists suggested options for different platforms.
            </para>
            
            <table id="gtadmin-install-openssh-buildtime-args"><title>GSI-OpenSSH build arguments</title>
                <tgroup cols="2"><tbody>
                    <row>
                        <entry>Platform</entry>
                        <entry>Configuration</entry>
                    </row>
                    <row>
                        <entry>Linux</entry>
                        <entry>--with-pam --with-md5-passwords --with-tcp-wrappers</entry>
                    </row>
                    <row>
                        <entry>Solaris</entry>
                        <entry>--with-pam --with-md5-passwords --with-tcp-wrappers</entry>
                    </row>
                    <row>
                        <entry>Irix</entry>
                        <entry>--with-tcp-wrappers</entry>
                    </row>
                    <row>
                        <entry>AIX</entry>
                        <entry>--with-tcp-wrappers</entry>
                    </row>
                </tbody></tgroup>
            </table>
            
            <para>Note: If you enable PAM support with the --with-pam configuration option,
                be sure to also set "UsePAM yes" in
                $GLOBUS_LOCATION/etc/ssh/sshd_config after installation.
            </para>
            
            <para>
                If you have an already configured and installed system-wide SSHD and
                you would like your build of GSI-OpenSSH to behave similarly,
                investigate the configure options available in GSI-OpenSSH and select
                those options that would add the functionality that your current SSHD
                possesses.  Be aware that since GSI-OpenSSH is based on OpenSSH, the
                standard set of functionality is turned on by default.
            </para>
            
            <para>
                <emphasis>Please do not attempt to override the following options:</emphasis>
            </para>
            <screen>
                --prefix
                --sysconfdir
                --with-globus
                --with-globus-flavor
                --with-ssl-dir
            </screen>
        </section>
        
    </section>
    
</chapter>
