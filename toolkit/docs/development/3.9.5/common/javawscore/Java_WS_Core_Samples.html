<?php 
$title="GT 3.9.5 Samples for Java WS Core";
include_once( "/mcs/www-unix.globus.org/include/globus_header.inc" ); ?>



<h1><?php echo $title; ?></h1>
<ul>
  <li><a href="#counter">Counter Sample</a></li>
</ul>

<h2><a name="counter"></a>Counter Sample</h2>

<p>
Using <code>counter-client</code>.
</p>

</p>
<table width="100%" border="1" cellpadding="5" cellspacing="0">

 <tr>
   <td valign="top">1</td>
   <td valign="top"><p>Change to <code>$GLOBUS_LOCATION</code> directory:</p>
    <pre> $ cd $GLOBUS_LOCATION</pre>
  </td>
 </tr>

  <tr>
    <td valign="top">2</td>
    <td valign="top"><p>Start the container by running:</p>
      <pre> $ bin/globus-start-container -nosec</pre>
   </td>
  </tr>

  <tr>
    <td valign="top">3</td>
    <td valign="top"><p>In another window, run:</p>
      <pre> $ bin/counter-client -s http://localhost:8080/wsrf/services/CounterService</pre>
    <p>As a result you should see something like the following:</p>
    <pre>
 $ bin/counter-client -s http://localhost:8080/wsrf/services/CounterService
   Counter service: http://localhost:8080/wsrf/services/CounterService
   Got notification with value: 3
   Counter has value: 3
   Got notification with value: 13</pre>
   <p>
     Please note if secure container is used (started without the <code>-nosec</code> argument) please make sure to pass the correct service url (https protocol, right port number) to <code>counter-client</code> and add <code><a href="Java_WS_Core_Public_Interfaces.html#common">-z</a></code> argument at the end of the command line. For example:
  </p>
  <pre> $ bin/counter-client -s https://localhost:8443/wsrf/services/CounterService -z none</pre>
  <p>
   The <code>-z none</code> option disables client-side authorization. By default the client performs <i>host</i> authorization and if the server is not running with host credentials the client authorization will fail. Also, the server must be properly configured to authorize the client. Please see the security documentation for details.
   </p>
   </td>
  </tr>

</table>

<p>
Using <code>counter-create</code>, <code>counter-add</code> clients.
</p>

</p>
<table width="100%" border="1" cellpadding="5" cellspacing="0">

 <tr>
   <td valign="top">1</td>
   <td valign="top"><p>Change to <code>$GLOBUS_LOCATION</code> directory:</p>
    <pre> $ cd $GLOBUS_LOCATION</pre>
  </td>
 </tr>

  <tr>
    <td valign="top">2</td>
    <td valign="top"><p>Start the container by running:</p>
      <pre> $ bin/globus-start-container -nosec</pre>
   </td>
  </tr>

  <tr>
    <td valign="top">3</td>
    <td valign="top"><p>In another window, run:</p>
      <pre> $ bin/counter-create -s http://140.221.36.11:8080/wsrf/services/CounterService > epr</pre>
    <p>If successful, a new counter resource will be created and the endpoint information of that resource will be saved in the file called <code>epr</code>.<br>
    That <code>epr</code> file can be passed to a number of the basic <code>wsrf-*</code> and <code>wsn-*</code> clients using the <code><a href="Java_WS_Core_Public_Interfaces.html#common">-e</a></code> option.
    </p>
   <p>
     Please note if secure container is used (started without the <code>-nosec</code> argument) please make sure to pass the correct service url (https protocol, right port number) to <code>counter-create</code> and add <code><a href="Java_WS_Core_Public_Interfaces.html#common">-z</a></code> argument to the command line. For example:
  </p>
  <pre> $ bin/counter-create -s https://localhost:8443/wsrf/services/CounterService -z none > epr</pre>
  <p>
    </td>
  </tr>

  <tr>
    <td valign="top">4</td>
    <td valign="top"><p>In the same window, run (a couple of times):</p>
      <pre> $ bin/counter-add -e epr 2</pre>
    <p>As a result you should see something like the following:</p>
    <pre> $ bin/counter-add -e epr 2
   2          
 $ bin/counter-add -e epr 2
   4</pre>
   <p>
    Please note that if secure container was used you might need to add <code><a href="Java_WS_Core_Public_Interfaces.html#common">-z</a></code> argument to the command line. For example:
   </p>
   <pre> $ bin/counter-add -e epr -z none 2</pre>
    </td>
  </tr>

</table>



<?php include("/mcs/www-unix.globus.org/include/globus_footer_dev_docs.inc"); ?>
