<?php

$title = "Globus: Accessing the Globus Alliance's Code via CVS";

include_once( "/mcs/www-unix.globus.org/include/globus_header.inc" ); 
?>

<h1>Accessing the Globus Alliance's Code via Remote CVS</h1>
<p><b>DISCLAIMER</b></p>

<p>The current Globus Toolkit<sup><font size=-2>&reg;</font></sup> development release is available by anonymous CVS.  
The development release contains code developed by many sources that has not yet undergone the testing and 
validation process for a stable release of the Globus Toolkit. Our goal is for the
development release to always be in a state that will compile cleanly, but
transient
problems may occasionally arise.  A description of <a href="http://www.globus.org/developer/howto/how-we-use-cvs.html"> how the Globus Alliance's core
development team uses the CVS repository</a> (including details on branches and concurrent
development procedures) is available.</p>

<p>As an experienced developer, you should
already be subscribed to <a href="mailto:developer-discuss@globus.org">developer-discuss@globus.org</a>,
where porting and development issues are discussed.  If not, subscribe by visiting <a

href="http://www.globus.org/about/subscriptions.html">http://www.globus.org/about/subscriptions.html</a>.
To minimize confusion for the majority of
subscribers there who do not use CVS, we ask that you preface any comments to <a

href="mailto:developer-discuss@globus.org">developer-discuss@globus.org</a> by
stating that you use code from CVS.</p>

<p><b>Note that there is no implied obligation by the Globus Alliance to provide support or resolve
problems that users might encounter with development code.</b>  Use
of the development release is subject to terms of the <a href="http://www.globus.org/toolkit/download/license.html"> Globus Toolkit
Public License</a>.
Users wishing to contribute bug patches or
discuss features should do so through the developers-discuss mailing list.</p>

<h2>Accessing Remote CVS</h2>
<table width="650" border="0" cellpadding="5">
  <tr>
    <td valign="top"><a name="step1">1</a></td>
    <td width="578" valign="top">
     Set your CVSROOT to <code>:pserver:anonymous@cvs.globus.org:/home/globdev/CVS/globus-packages</code>.</td>
  </tr>
  <tr>
    <td valign="top"><a name="step2">2</a></td>
    <td valign="top">
    Check out the packaging directory:
    <p class="command">cvs co packaging</p>
    If you want to work from a particular branch or tag, make sure
    to specify it when checking out packaging, like:
    <p class="command">cvs co -r globus_3_2_branch packaging</p>
    </td>
  </tr>
  <tr>
    <td valign="top"><a name="step3">3</a></td>
    <td valign="top">
    The easiest thing to do now is to use one of the scripts which generates
    releases.  Your option depends on the branch you're working from.  For
    the globus_3_2_branch, your choices are:
    <ul>
    <li><code>fait_accompli/release.sh</code> - Creates the base installer.</li>
    <li><code>fait_accompli/all-release.sh</code> - Creates the all installer.</li>
    <li><code>fait_accompli/preogsi-release.sh</code> - Creates the preogsi installer.</li>
    </ul>
    <p>Each of those choices will create an installer subdirectory using
       the code from CVS.  You may then change into that directory and
       run <code>install-gt3</code> and <code>install-gt3-mmjfs</code>
       the same way the publically released installers work.</p> 
    <p>If you are working in HEAD, you have only one choice:
    <ul>
    <li><code>fait_accompli/wsrf-release.sh</code> - Creates the WSRF installer.</li>
    </ul>
    <p>This choice creates an installer subdirectory which will have
       an installer script named install-wsrf.  There is only one
       installer script for that branch.</p>
    </td>
  </tr>
  <tr>
    <td valign="top"><a name="step4">4</a></td>
    <td valign="top">
    Alternatively, you may use the <code>make-packages.pl</code>
    script directly.  Each of the above release scripts just runs a
    series of <code>make-packages.pl</code> commands.  It features
    both <code>--help</code> and <code>--man</code> options.
    <p>The flow of control in make-packages.pl is as follows:
<ol>
<li>Cleanup old build directories
<li>Checkout CVS source trees
<li>Build prerequisite tools (like autotools and globus_core)
<li>Create GPT packages from CVS subdirectories

<li>Create GPT bundles from packages
<li>Install bundles
</ol>

<p>By default, make-packages.pl will stop after creating bundles.   If you specify
<code>--install=/directory/name</code>, it will install the bundles.
</p>

<p>The CVS checkouts will create one subdirectory of
<code>source-trees/</code> per CVS archive.  The packaging step will
create the <code>source-output</code> and <code>package-output</code>

subdirectories.  <code>source-output</code> is used as an intermediate
step; <code>package-output</code> contains the GPT packages
themselves.  The bundling step will create <code>bundle-output</code>.
</p>

<p>You can also turn off the earlier steps if you want to skip them.
<code>--no-updates</code> will inhibit CVS checkouts/updates.  If you
specify <code>--skippackage</code>, it will not make GPT packages.
With <code>--skipbundle</code>, bundles will not be created.</p>

<p>The design intent is for you to be able to start and stop the tool
where you want.  You can create source bundles on one machine, then
ship them to another for building.  On the second machine, you'd 
<code>--skippackage</code> and <code>--skipbundle</code>, but could
specify <code>--install</code>.</p>

<p>
The autotools prerequisite is installed under <code>

packaging/source-trees/autotools/autotools/bin</code>.  The GPT
prerequisite is installed under <code>
packaging/gpt-*</code>.  Currently it is gpt-3.0.1, though that
may be upgraded in the future.</p>  If make-packages determines
that the prerequisites are available, it will skip rebuilding
them.  If you would like to force a rebuild, you could either
delete <code>source-trees/autotools</code> or <code>gpt-*</code>.
This may be necessary, for instance, if you hit control C during
the build of autotools, and this winds up fooling the
auto-detection of make-packages.</p>



<h2><a name="cvs"></a>CVS options</h2>

<p>If you specify <code>--anonymous</code>, the CVS checkout will be
anonymous, otherwise it will use ssh checkouts.</p>

<p>To specify tags, use <code>--t2=</code> and <code>--t3=</code>.
<code>t2</code> will specify tags to use for GT2 and autotools, while
<code>t3</code> specifies tags for GT3 and cbindings.</p>


<h2><a name="subset"></a>Specifying a subset of code to build</h2>
<p>Often times you just want to build what you're working on.  The 
<code>--packages=</code>, <code>--bundles=</code>, and
<code>--trees</code> options are designed to restrict the working set
of make-packages.pl.</p>

<p>The CVS archives are defined in the <code>%cvs_archives</code> hash
at the top of make-packages.pl.  There is a subdirectory of <code>etc/</code>

per archive.  The <code>package-list</code> file contains a list of
packages and their CVS subdirectory.  The <code>bundles</code> file
contains a list of bundles and their constituent packages.</p>

<p>A few examples:
<ul>
<li><code>make-packages.pl --anonymous --bundles=globus-data-management-server --install=/tmp/inst</code><br>
Checkout CVS anonymously, then make the globus-data-management-server
bundle and install it into /tmp/inst.</li>
<li><code>make-packages.pl --t2=globus_3_2_0 --t3=globus_3_2_0 --anonymous --skippackage --skipbundle</code><br>
Checkout CVS anonymously using the globus_3_2_0 tag.  Don't make any
packages or bundles.  The CVS checkouts will be under <code>
source-trees</code>.</li>
<li><code>make-packages.pl --anonymous --packages=globus_xio</code><br>
Checkout CVS anonymously, then create the globus_xio package.  It
will be stored in <code>package-output/</code>.</li>
<li><code>make-packages.pl -n --bundles=globus-gsi</code><br>
Don't update CVS, make the globus-gsi bundle.  You must already have
CVS checkouts in source-trees to use this option.</li>
</ul>
    </td>
  </tr>
</table>

<?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>
