<h1>WS GRAM : System Administrator's Guide</h1>
<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li> <a href="#installing">Building and Installing</a></li>
  <li><a href="#configuring">Configuring</a></li>
  <li><a href="#deploying">Deploying</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<h2><a name="introduction"></a>Introduction</h2>
<p>This document describes the installation and deployment of WS_GRAM including
  administrator-selected features, configuration options, and additional host
  settings necessary for WS_GRAM operation. Readers should be familiar with the <a href="WS_GRAM_Key_Concepts.html">Key
  Concepts</a> and <a href="WS_GRAM_Approach.html">Implementation Approach</a> for
  WS_GRAM to understand the motivation for and interaction of the various deployed
components. </p>
<p><font color="purple">[points them to
    the Installation Guide for comprehensive basic installation/configuration
    info]</font></p>
<h2><a name="installing"></a>Building and Installing</h2>
<h3>Local Prerequisites</h3>
<p>WS_GRAM requires the following:</p>
<ul>
  <li><a href="#hostcredentials">Host credentials</a></li>
  <li><a href="#serviceaccount">GRAM service account </a></li>
  <li><a href="#sudo">Functioning sudo</a></li>
  <li><a href="#localscheduler">Local scheduler </a></li>
</ul>
<h4><a name="hostcredentials"></a>Host credentials</h4>
<p> In order to use WS_GRAM, the services running in the WSRF hosting environment
  require access to an appropriate host certificate. <i>Link to host credential
  docs here...</i> </p>
<h4><a name="serviceaccount"></a>GRAM service account</h4>
<p> WS_GRAM requires a dedicated local account within which the WSRF hosting
  environment and GRAM services will execute. This account will often be a <code>globus</code> account
  used for all local services, but may also be specialized to only host WS_GRAM.
  User jobs will run in separate accounts as specified in the <code>grid-mapfile</code> or
  associated authorization policy configuration of the host. </p>
<p> <i>Other service account information here...</i> </p>
<h4><a name="sudo"></a>Functioning sudo</h4>
<p> WS_GRAM requires that the <code>sudo</code> command is installed and functioning
  on the service host where WS_GRAM software will execute. </p>
<p> At the completion of WS_GRAM setup, additional authorization rules will be
  added to the <code>sudoers</code> file to allow the WS_GRAM service account
  to execute (without a password) local scheduler adapters in the accounts of
  authorized GRAM users. This topic is covered in detail in the Software Setup
  section. </p>
<h4><a name="localscheduler"></a>Local scheduler</h4>
<p> WS_GRAM depends on a local mechanism for starting and controlling jobs. If
  the fork-based WS_GRAM mode is to be used, no special software is required.
  For batch scheduling mechanisms, the local scheduler must be installed and
  configured for local job submission prior to deploying and operating WS_GRAM. </p>
<p> <i>Other local scheduler information here...</i></p>
<h3>GT Dependencies</h3>
<p> There are many dependencies on GT components for WS_GRAM. This
  section is relevant if you already have installed some of these and wish to
  integrate WS_GRAM into a customized deployment. A default installation of all
  required GT components is described in <a href="#fullinstall">Full GT4 Installation
  including WS_GRAM</a>. </p>
<h4>Java WS Core</h4>
<p> <i>Details of config options required for GRAM to function (if any)...</i> </p>
<h4>GridFTP</h4>
<p> <i>Details of config options required for GRAM to function (if any)...</i> </p>
<h4>RFT</h4>
<p> RFT prerequisites include PostgreSQL to be installed and configured. The
  instructions are <a href="http://www-unix.globus.org/toolkit/docs/3.2/installation/install_config_rft.html#settinguppostgresql">here</a> [TODO
  - change link to RFT instructions for 3.9.3] GRAM depends on RFT for file staging
  (to and from) and clean up. Jobs requesting these function will fail Without
  RFT properly setup. </p>
<h4>Delegation Service </h4>
<p> <i>Details of config options required for GRAM to function (if any)...</i></p>
<h3><a name="fullinstall"></a>Full GT4 Installation including WS_GRAM</h3>
<p> <i>Summarize requirements including WSRF core stuff, e.g. java</i><br>
    <i>Choosing an install location</i><br>
    <i>Full sequence of steps...</i> </p>
<h3>Adding WS_GRAM to existing GT4</h3>
<p> <i>Full sequence of steps...</i></p>
<h2><a name="configuring"></a>Configuring </h2>
<p>Information on configuration settings and environment variables can be found
  in the public interface guide <font color="purple">[link to component public
  interface guide here]</font></p>
<p>After the software packages are installed, additional steps are required to
  link them together so that WS_GRAM services are started as part of the WSRF
  hosting environment, WS_GRAM local adapters are configured for use, and so
that operating policies are set as desired. </p>
<h3>Run setup tool(s)</h3>
<h3>Install host credential?</h3>
<h3>Enabling Local Scheduler Adapter</h3>
<p> <i>Defining ManagedJobFactoryResource type</i> </p>
<h3>Extra steps for non-default installation</h3>
<p> <i>Pointing WS_GRAM at Delegation and RFT services</i> </p>
<h3>Localized Settings</h3>
<h4>Local adapter callouts</h4>
<p> <i>Using (or not) <code>gridmap_authorize_and_exec</code>...</i><br>
    <i>Reference to adapter script(s)</i> </p>
<h4>Sudo configuration</h4>
<p> <i>Matching sudoers rules for GRAM service to make callouts to adapter and
    delegation tool w/ or w/out auth_and_exec</i> </p>
<h4>Grid-mapfile entries</h4>
<p> <i>Need map entries for job-submitters as well as GridFTP</i> </p>
<h4>Filesystem map</h4>
<p> <i>Default all-shared config...</i><br>
    <i>Per-volume mount descriptions</i> </p>
<h2><a name="deploying"></a>Deploying</h2>
<p><font color="purple">[information about deploying the component into various
    containers/environments] </font></p>
<h2><a name="testing"></a>Testing</h2>
<p><font color="purple">[procedures for how to test the configuration. must include
    examples of the tests ]</font></p>
<h2><a name="troubleshooting"></a>Troubleshooting</h2>
<p><font color="purple">[help for common problems sysadmins may experience] </font></p>
<p>&nbsp;</p>
<ul>
  <li></li>
</ul>
