<?xml version='1.0' encoding='UTF-8'?>
<title>GT &shortversion; RLS: System Administrator's Guide</title>
<titleabbrev>System Administrator's Guide</titleabbrev>


<section id="rls-admin-introduction"><title>Introduction</title>
    <para>This guide contains advanced configuration information for system administrators
        working with RLS. It provides references to information on procedures
        typically performed by system administrators, including installation, configuring,
        deploying, and testing the installation.</para>
    <important>
        <simpara> This information is in addition to the basic Globus Toolkit prerequisite, 
            overview, installation, security configuration instructions in the <xref linkend="gtadmin"/>.  
            Read through this guide before continuing!</simpara>  
    </important>
</section>

<section id="rls-admin-installing"><title>Building and Installing</title>

    <para>RLS is built and installed as part of the Globus Toolkit installation. This section provides instructions specific to building and installing RLS. Most of this section concerns the setup and configuration of database management system (DBMS) and database connectivity (ODBC) software required for the RLS server.</para>

    <section id="rls-admin-install-prereq"><title>Prerequisites</title>

        <para>The RLS depends on DBMS and ODBC software. If you are not familiar with DBMS and ODBC software, you may need to familiarize yourself with these tools before proceeding with RLS installation. Most of the difficulty users experience when installing RLS is actually due to DBMS and ODBC issues, which are often beyond our control.</para>
        <para>The following list summarizes the prerequisite database software,</para>
        <itemizedlist>
            <listitem><simpara><xref linkend="rls-admin-install-prereq-dbms"/>: for persistent storage of replica location information</simpara></listitem>
            <listitem><simpara><xref linkend="rls-admin-install-prereq-odbcman"/>: for vendor-neutral connectivity to DBMS</simpara></listitem>
            <listitem><simpara><xref linkend="rls-admin-install-prereq-odbcdrv"/>: for vendor-specific connectivity to DBMS from ODBC Managers</simpara></listitem>
        </itemizedlist>

        <para>When using this guide, please consult the vendor and official project sites for authoritative information on DBMS and ODBC software. Any additional information provided on this site is intended as helpful advice and only reflects our limited experiences as fellow users of the software.</para>

        <section id="rls-admin-install-prereq-dbms"><title>Database Management System</title>
            <para>The RLS depends on a DBMS for persistent storage of replica location information. The RLS is designed to work with MySQL, PostgreSQL, and Oracle DBMS software. In the case of MySQL, it is important to use the transaction-capable InnoDB database engine. For complete information on installation and configuration of third-party DBMS software, please refer to,</para>
            <itemizedlist>
                <listitem><simpara><ulink url="www.mysql.com">MySQL</ulink></simpara></listitem>
                <listitem><simpara><ulink url="www.postgresql.org">PostgreSQL</ulink></simpara></listitem>
                <listitem><simpara><ulink url="www.oracle.com">Oracle</ulink></simpara></listitem>
            </itemizedlist>
        </section>

        <section id="rls-admin-install-prereq-odbcman"><title>ODBC Manager</title>
            <para>The RLS depends on an ODBC manager for standardised database connectivity. The unixODBC or iODBC libraries may be used for this purpose. Please confirm that one of these libraries is installed and configured before proceeding with RLS installation. If you need more information on the ODBC managers, consult their respective project home pages.</para>

            <itemizedlist>
                <listitem><simpara><ulink url="www.unixodbc.org">unixODBC</ulink></simpara></listitem>
                <listitem><simpara><ulink url="www.iodbc.org">iODBC</ulink></simpara></listitem>
            </itemizedlist>

            <para>You may also find that unixODBC or (less likely) iODBC are included along with a vendor's odbc driver. This appears to be the case with MySQL Connector/ODBC drivers at the time of writing this document.</para>

            <para>We provide the following tips from the troubleshooting section of this guide,</para>
            <itemizedlist>
                <listitem><simpara><xref linkend="rls-admin-trouble-iodbc-install"/></simpara></listitem>
                <listitem><simpara><xref linkend="rls-admin-trouble-unixodbc-install"/></simpara></listitem>
            </itemizedlist>

            <important><para>If you are installing RLS from a Globus Toolkit binary bundle, you do not need to install the unixODBC or iODBC software. The binary installation of RLS is statically linked to iODBC version 3.51.2.</para></important>
        </section>

        <section id="rls-admin-install-prereq-odbcdrv"><title>ODBC Driver</title>
            <para>The RLS depends on an ODBC driver for vendor-specific database connectivity via the vendor neutral ODBC manager. For each vendor you will find a related ODBC driver. You may find relevant information at the following sites,</para>
            <itemizedlist>
                <listitem><simpara><ulink url="pgfoundry.org/projects/psqlodbc/">psqlODBC</ulink> the official PostgreSQL ODBC Driver</simpara></listitem>
                <listitem><simpara><ulink url="www.mysql.com/products/connector/odbc/index.html">MySQL Connector/ODBC</ulink> offered directly by MySQL (note: use the 3.51 branch)</simpara></listitem>
                <listitem><simpara><ulink url="www.oracle.com">Consult Oracle</ulink> for details on ODBC Driver for Oracle DBMS</simpara></listitem>
            </itemizedlist>
        </section>

    </section>

    <section id="rls-admin-install-obs"><title>Choosing the right DBMS &amp; ODBC software</title>
        <para>We have used or know of users who have used the following combinations of software packages on the following platforms.</para>
        <table><title>Database &amp; ODBC Observations</title>
            <tgroup cols="6"><tbody>
                    <row>
                        <entry>Architecture</entry>
                        <entry>OS</entry>
                        <entry>Distribution</entry>
                        <entry>ODBC Manager</entry>
                        <entry>ODBC Driver</entry>
                        <entry>DBMS</entry>
                    </row>
                    <row>
                        <entry>PPC</entry>
                        <entry>OS X</entry>
                        <entry>Apple</entry>
                        <entry>unixODBC-2.2.11*</entry>
                        <entry>TBD</entry>
                        <entry>TBD</entry>
                    </row>
                    <row>
                        <entry>SPARC, 32-bit</entry>
                        <entry>Solaris</entry>
                        <entry>Sun</entry>
                        <entry>libiodbc-3.51.2</entry>
                        <entry>MyODBC-3.51.06</entry>
                        <entry>mysql-standard-4.0.18</entry>
                    </row>
                    <row>
                        <entry>SPARC, 32-bit</entry>
                        <entry>Solaris</entry>
                        <entry>Sun</entry>
                        <entry>libiodbc-3.51.2</entry>
                        <entry>MyODBC-3.51.12</entry>
                        <entry>mysql-4.0.16</entry>
                    </row>
                    <row>
                        <entry>SPARC, 32-bit</entry>
                        <entry>Solaris</entry>
                        <entry>Sun</entry>
                        <entry>unixODBC-2.2.11</entry>
                        <entry>TBD</entry>
                        <entry>TBD</entry>
                    </row>
                    <row>
                        <entry>SPARC, 32-bit</entry>
                        <entry>Solaris</entry>
                        <entry>Sun</entry>
                        <entry>unixODBC-2.2.11</entry>
                        <entry>TBD</entry>
                        <entry>TBD</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>Linux</entry>
                        <entry>RedHat</entry>
                        <entry>libiodbc-3.51.1</entry>
                        <entry>MyODBC-3.51.06</entry>
                        <entry>mysql-standard-4.0.18</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>Linux</entry>
                        <entry>RedHat</entry>
                        <entry>libiodbc-3.51.2</entry>
                        <entry>MyODBC-3.51.06</entry>
                        <entry>mysql-standard-4.0.18</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>Linux</entry>
                        <entry>RedHat</entry>
                        <entry>unixODBC-2.2.11</entry>
                        <entry>MyODBC-3.51.06</entry>
                        <entry>mysql-standard-4.0.18</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>Linux</entry>
                        <entry>RedHat</entry>
                        <entry>unixODBC-2.2.11</entry>
                        <entry>mysql-connector-odbc-3.51.12</entry>
                        <entry>mysql-standard-4.0.18</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>Linux</entry>
                        <entry>RedHat</entry>
                        <entry>unixODBC-2.2.11</entry>
                        <entry>mysql-connector-odbc-3.51.12</entry>
                        <entry>mysql-standard-5.0.21</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>Linux</entry>
                        <entry>RedHat</entry>
                        <entry>unixODBC-2.2.11</entry>
                        <entry>psqlodbc-08.00.0102</entry>
                        <entry>postgresql-7.4.6</entry>
                    </row>
                    <row>
                        <entry>x86</entry>
                        <entry>OS X</entry>
                        <entry>Apple</entry>
                        <entry>TBD</entry>
                        <entry>TBD</entry>
                        <entry>TBD</entry>
                    </row>
                    <row>
                        <entry>x86_64</entry>
                        <entry>Linux</entry>
                        <entry>SuSE</entry>
                        <entry>unixODBC-2.2.8-35</entry>
                        <entry>MyODBC-unixODBC-3.51.06-121</entry>
                        <entry>mysql-client-4.0.18-25</entry>
                    </row>
                    <row>
                        <entry>x86_64</entry>
                        <entry>Linux</entry>
                        <entry>SuSE</entry>
                        <entry>unixODBC-2.2.8-35</entry>
                        <entry>psqlodbc-08.00.0102</entry>
                        <entry>postgresql-7.4.9</entry>
                    </row>
                    <!--
                    <row>
                        <entry></entry>
                        <entry></entry>
                        <entry></entry>
                        <entry></entry>
                        <entry></entry>
                        <entry></entry>
                    </row>
                    -->
            </tbody></tgroup>
        </table>
        <para>(*) See troubleshooting tip <xref linkend="rls-admin-trouble-unixodbc-install-osxfix"/></para>
        <para>If you build from source, be aware that some versions of a vendor's drivers do not build against some versions of the same vendor's clients. For instance, MySQL Connector/ODBC 3.51.06 does not appear to build againt MySQL 4.1.x client libraries, instead it requires MySQL 4.0.x client libraries. Also, we have noticed that psqlodbc-07.03.x will build against pgsql-7.4.x but when using the driver it fails with little or no information to indicate why it failed. We have found that psqlodbc-08.00.x works well with postgres-7.4.6. In all cases, consult the vendor's documentation.</para>
        <para>Support RLS development by sending your working RLS + ODBC Manager + ODBC Driver + RDBMS configuration to the rls-user@globus.org list! We cannot test on all platforms with all combinations so we rely on our user community to help advise new users. Your support in this matter is appreciated.</para>
    </section>

    <section id="rls-admin-install-binary"><title>Installing RLS from Globus Toolkit binary bundle</title>
        <para>Instructions on RLS installation</para>
    </section>

   <section><title>Building and installing details</title>
       <para>For detailed instructions on building and installing RLS, see <xref linkend="rls-building-installing"/>. </para>
   </section>
</section>


<section id="rls-admin-configuring"><title>Configuring </title>
    &RLS_Interface_Config_Frag;
</section>

<section id="rls-admin-deploying"><title>Deploying</title>
    <para>This section does not apply to the RLS.</para>
</section>

<section id="rls-admin-testing"><title>Testing</title>
    <para>You can use the programs <computeroutput>globus-rls-admin
        </computeroutput>and <computeroutput>globus-rls-cli </computeroutput>to test functionality. See their 
        respective <computeroutput>man</computeroutput> pages for details on their use.
        <!-- We'll also describe how to use the <computeroutput>runtest</computeroutput> script that comes installed 
        with RLS. //--></para>

    <orderedlist>
        <listitem><para>Start the server in debug mode with the command:</para>
            <screen>$GLOBUS_LOCATION/bin/globus-rls-server -d [-N] </screen>
            <para>The <computeroutput>-N </computeroutput>option is helpful: if you do not have a host 
                certificate for the server host, or a user certificate for yourself, it 
                disables authentication. </para></listitem>
        <listitem><para>Ping the server using <computeroutput>globus-rls-admin</computeroutput>:</para>
            <screen>$GLOBUS_LOCATION/bin/globus-rls-admin -p rls://serverhost</screen>
            <para>If you disabled authentication (by starting the server with the <computeroutput>-N
            </computeroutput>option), then use this command: </para>
            <screen>$GLOBUS_LOCATION/bin/globus-rls-admin -p rlsn://serverhost</screen>
        </listitem>
    </orderedlist>
</section>

<section id="rls-admin-security_considerations"><title>Security Considerations </title>
    &RLS_Security_Considerations_Frag;
</section>

<section id="rls-admin-troubleshooting"><title>Troubleshooting</title>
    <para>General information on troubleshooting can be found in the
        <ulink url="http://www.globus.org/toolkit/data/rls/rls_faq.html">FAQ</ulink>.</para>
    <section id="rls-admin-trouble-iodbc-install"><title>I need help installing iODBC</title>
        <para>The iodbc.org website contains information on installation of the iODBC (or libiodbc) library. We have used the following commands to install iODBC in our development and test sites. From the libiodbc build directory,</para>
        <screen>
% ./configure <emphasis>--prefix=/path/to/libiodbc-3.52.4 \
--with-iodbc-inidir=/path/to/etc --disable-gui --disable-gtktest</emphasis>
% make
% make install
        </screen>
        <para>The configure parameters are optional. The defaults enable the features required by RLS, namely pthreads. We prefer to install to a specified directory due to testing against multiple ODBC managers, however, this would not apply to most end users. We also prefer not to install the GUI features.</para>
        <para>Keep in mind, if you install the ODBC Manager library to a non-standard location, you will need to update you library path (e.g., <computeroutput>LD_LIBRARY_PATH</computeroutput>) to reflect you non-standard installation.</para>
    </section>
    <section id="rls-admin-trouble-unixodbc-install"><title>I need help installing unixODBC</title>
        <para>The unixodbc.org website contains information on installation of the unixODBC library. We have used the following commands to install unixODBC in our development and test sites. From the unixODBC build directory,</para>
        <screen>
% ./configure <emphasis>--prefix=/path/to/unixODBC --disable-gui \
  --disable-drivers</emphasis>
% make
% make install
        </screen>
        <para>The configure parameters are optional. The defaults enable the features required by RLS, namely threads. We prefer to install to a specified directory due to testing against multiple ODBC managers, however, this would not apply to most end users. We also prefer not to install the GUI features or the supplied drivers.</para>
        <para>Keep in mind, if you install the ODBC Manager library to a non-standard location, you will need to update you library path (e.g., <computeroutput>LD_LIBRARY_PATH</computeroutput>) to reflect you non-standard installation.</para>
    </section>
    <section id="rls-admin-trouble-unixodbc-install-osxfix"><title>Building unixODBC failed on OSX</title>
        <para>Building unixODBC-2.2.11 on OS X failed for us too. Our unixODBC tarball came from the unixodbc.org project site. It may be that other sources of this tarball may have been ported properly. What we found by doing a brief search was that making a small change to one of the files corrected the problem. In the file Drivers/txt/SQLTables.c, we made the following change,</para>
        <screen>
#ifdef OSXHEADER
#include &lt;i386/types.h&gt;
#endif

-&gt;

/*
#ifdef OSXHEADER
#include &lt;i386/types.h&gt;
#endif
*/
        </screen>
    </section>
</section>

<section id="rls-admin-usage"><title>Usage statistics collection by the Globus Alliance</title>
    &RLS_Usage_Statistics_Frag;
</section>
