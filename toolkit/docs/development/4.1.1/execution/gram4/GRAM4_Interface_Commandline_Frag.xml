
<refentry id="globusrun-ws">
    <refmeta>
        <refentrytitle>globusrun-ws</refentrytitle>
        <manvolnum>1</manvolnum>
    </refmeta>
    <refnamediv>
        <refname>globusrun-ws</refname>
        <refpurpose>Official job submission client for WS GRAM</refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <cmdsynopsis>
            <command>globusrun-ws -submit</command>
            <arg>-batch</arg>
            <arg>-quiet</arg>
            <arg>-no-cleanup</arg>
            <arg>-streaming</arg>
            <arg>-streaming-out <replaceable>filename</replaceable></arg>
            <arg>-streaming-err <replaceable>filename</replaceable></arg>
            <arg>-host-authz</arg>
            <arg>-self-authz</arg>
            <arg>-subject-authz <replaceable>subject name</replaceable></arg>
            <arg>-private</arg>
            <arg>-http-timeout <replaceable>milliseconds</replaceable></arg>
            <arg>-debug</arg>
            <arg>-allow-ipv6</arg>
            <arg>-passive</arg>
            <arg>-nodcau</arg>
            <group>
                <arg>-factory-epr-file <replaceable>filename</replaceable></arg>
                <group>
                    <arg>-factory <replaceable>contact</replaceable></arg>
                    <arg>-factory-type <replaceable>type</replaceable></arg>
                </group>
            </group>
            <group>
                <arg>-submission-id <replaceable>uuid</replaceable></arg>
                <arg>-submission-id-file <replaceable>filename</replaceable></arg>
            </group>
            <arg>-submission-id-output-file <replaceable>filename</replaceable></arg>
            <arg>-job-epr-output-file <replaceable>filename</replaceable></arg>
            <arg>-job-delegate</arg>
            <arg>-staging-delegate</arg>
            <arg>-job-credential-file <replaceable>filename</replaceable></arg>
            <arg>-staging-credential-file <replaceable>filename</replaceable></arg>
            <arg>-transfer-credential-file <replaceable>filename</replaceable></arg>
            <arg>-termination
                <group>
                    <option>+HH:MM</option>
                    <option>mm/dd/yyyy HH:MM</option>
                </group>
            </arg>
            <group>
                <arg>-job-description-file <replaceable>filename</replaceable></arg>
                <arg>-job-command <arg>--</arg> <replaceable>program arg ...</replaceable></arg>
            </group>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -validate</command>
            <arg choice="plain">-job-description-file <replaceable>filename</replaceable></arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -monitor</command>
            <arg choice="plain">-job-epr-file <replaceable>filename</replaceable></arg>
            <arg>-quiet</arg>
            <arg>-no-cleanup</arg>
            <arg>-streaming</arg>
            <arg>-streaming-out <replaceable>filename</replaceable></arg>
            <arg>-streaming-err <replaceable>filename</replaceable></arg>
            <arg>-host-authz</arg>
            <arg>-self-authz</arg>
            <arg>-subject-authz <replaceable>subject name</replaceable></arg>
            <arg>-private</arg>
            <arg>-http-timeout <replaceable>milliseconds</replaceable></arg>
            <arg>-debug</arg>
            <arg>-allow-ipv6</arg>
            <arg>-passive</arg>
            <arg>-nodcau</arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -status</command>
            <arg choice="plain">-job-epr-file <replaceable>filename</replaceable></arg>
            <arg>-host-authz</arg>
            <arg>-self-authz</arg>
            <arg>-subject-authz <replaceable>subject name</replaceable></arg>
            <arg>-private</arg>
            <arg>-http-timeout <replaceable>milliseconds</replaceable></arg>
            <arg>-debug</arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -kill</command>
            <arg choice="plain">-job-epr-file <replaceable>filename</replaceable></arg>
            <arg>-host-authz</arg>
            <arg>-self-authz</arg>
            <arg>-subject-authz <replaceable>subject name</replaceable></arg>
            <arg>-private</arg>
            <arg>-http-timeout <replaceable>milliseconds</replaceable></arg>
            <arg>-debug</arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -help</command>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -usage</command>
            <arg>-submit</arg>
            <arg>-validate</arg>
            <arg>-monitor</arg>
            <arg>-status</arg>
            <arg>-kill</arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>globusrun-ws -version(s)</command>
        </cmdsynopsis>
    </refsynopsisdiv>
    
    <refsect1 id="globusrun-ws-description"><title>Description</title>
        <para>
            globusrun-ws (WS GRAMclient) is a program for submitting and
            managing jobs to a local or remote job host. WS GRAMprovides secure
            job submission to many types of <glossterm>job scheduler</glossterm> for users who have the
            right to access a job hosting resource in a Grid environment. All
            WS GRAMsubmission options are supported transparently through the
            embedded request document input. <computeroutput>globusrun-ws</computeroutput> offers
            additional features to fetch job output files incrementally during the
            run as well as to automatically delegate credentials needed for
            certain optional WS GRAMfeatures. Online and batch submission modes
            are supported with reattachment (recovery) for jobs whether they were
            started with this client or another WS GRAMclient application.
        </para>
    </refsect1>
    
    <refsect1 id="globusrun-ws-commandoptions"><title>Command options</title>
        
        
        
        
        
        
        
        
        <refsect2><title>Quiet mode</title>
            
            <para>
                A variety of protocol status messages, warning messages, and output
                data may be printed to standard output and error under multiple
                command modes. The <emphasis>quiet mode</emphasis> suppresses all but fatal standard
                error messages in order to have clean outputs for use in scripting or
                with the <emphasis>streaming output mode</emphasis> where application output is
                retrieved and output.
            </para>
            
            <variablelist>
                
                <varlistentry><term>-q, -quiet</term><listitem>
                    
                    <para>
                        If supplied, all non-fatal status and protocol-related messages are
                        suppressed.
                    </para>
                </listitem></varlistentry>
                
            </variablelist>
            
            
        </refsect2><refsect2><title>Debug mode</title>
            
            <variablelist>
                <varlistentry><term>-dbg, -debug</term><listitem>
                    
                    <para>
                        If supplied, all soap messages and ftp control messages will be displayed on stderr.
                    </para>
                </listitem></varlistentry>
                
            </variablelist>
            
        </refsect2><refsect2><title>Protocol Options</title>
            
            <refsect3><title>Service authorization</title>
                
                <para>
                    Usually, secure communication includes mutual authentication. In
                    addition to the service authorizing the client for the requested
                    operation(s), an authorization decision is made by the client to
                    determine whether the remote service is the one intended.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-host, -host-authz</term><listitem>
                        
                        <para>
                            The GSI "host authorization" rule is used to verify that the service
                            is using a host credential appropriate for the underlying service
                            address information. This is the default.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-self, -self-authz</term><listitem>
                        
                        <para>
                            The GSI "self authorization" rule is used to verify that the service
                            is using a (proxy) credential derived from the same identity as the
                            client's.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-subject, -subject-authz <emphasis role="underline">subject name</emphasis></term><listitem>
                        
                        <para>
                            The service must be using a credential with the exact subject name
                            provided by this option.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Security Protocol</title>
                
                <para>
                    The client uses secure transport for all https endpoints and secure message
                    for http.  Secure conversation is currently unsupported.
                </para>
                <variablelist>
                    <varlistentry><term>-p, -private</term><listitem>
                        
                        <para>
                            If supplied, privacy-protection is enabled between globusrun-ws and
                            WS GRAMor GridFTP services. It is a fatal error to select privacy
                            protection if it is not available due to build options or other
                            security settings.
                            
                            <emphasis role="bold">Note:</emphasis> Currently only supported with https endpoints.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Timeouts</title>
                
                <variablelist>
                    
                    <varlistentry><term>-T, -http-timeout <emphasis role="underline">milliseconds</emphasis></term><listitem>
                        
                        <para>
                            Set timeout for HTTP socket, in milliseconds, for all Web services
                            interactions. The default value is 120000 (2 minutes).
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
            </refsect3>
        </refsect2>
        
        <refsect2><title>Signal handling</title>
            
            <variablelist>
                
                <varlistentry><term>-n, -no-cleanup</term><listitem>
                    
                    <para>
                        If supplied, the default behavior of trapping interrupts (SIG_INTR)
                        and cancelling the job is disabled. Instead, the interrupt simply
                        causes the tool to exit without affecting the ManagedJob resource.
                    </para>
                </listitem></varlistentry>
            </variablelist>
        </refsect2>
        
        <refsect2><title>Submit options</title>
            <variablelist>
                <varlistentry><term>-submit</term><listitem>
                    <para>
                        The -submit command submits (or <emphasis>resubmits</emphasis>) a job to a
                        job host using an
                        <link linkend="gram4-pi-domain">XML-based job description</link>
                        document. The -submit command can submit jobs in one of three output modes:
                        batch, interactive, or interactive-streaming.
                    </para>
                </listitem></varlistentry>
            </variablelist>
            
            <refsect3><title>Output Mode</title>
                <para>
                    The user can select several tool behaviors following submission. In
                    <emphasis>batch mode</emphasis>, the tool prints the resulting ManagedJob EPR as the
                    sole standard output (unless in <emphasis>quiet mode</emphasis>) and exits. In
                    <emphasis>interactive mode</emphasis>, the tool keeps running in order to monitor
                    job status. Interactive mode is qualitatively equivalent to a
                    batch-mode submission immediately followed a second invocation of
                    globusrun-ws using the -monitor command. In interactive mode, an
                    optional <emphasis>streaming mode</emphasis> where job output files are fetched and
                    output from globusrun-ws.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-b, -batch</term><listitem>
                        
                        <para>
                            If supplied, the batch mode is enabled. The default is interactive mode.
                            The tool prints the resulting ManagedJob EPR as
                            the sole standard output (unless in quiet mode) and exits.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-s, -streaming</term><listitem>
                        
                        <para>
                            The standard output and standard error files of the job are monitored
                            and data is written to the corresponding output of globusrun-ws. The
                            standard output will contain ONLY job output data, while the standard
                            error may be a mixture of job error output as well as globusrun-ws
                            messages, unless the <emphasis>quiet mode</emphasis> is also enabled.
                        </para>
                        
                        <para>
                            Streaming output depends on the ability to access job outputs via
                            GridFTP. If -streaming mode is selected and the <glossterm>job description</glossterm> does not
                            already specify output file redirection for the job host, then
                            globusrun-ws adds unique output file name redirections and automatic
                            cleanup directives to the job description.
                        </para>
                        
                        <para>
                            If you are using -batch mode, but intend to use -streaming with -monitor,
                            you may want to still include -streaming.  -streaming always introduces
                            a 'CleanUp Hold' state which ensures that all the data is streamed before the
                            files are destroyed.  If you do use -streaming with -batch, you <emphasis role="bold">must</emphasis>
                            come back with -monitor so the hold can be released.
                        </para>
                        <para>
                            This option implies -staging-delegate if the stdout and stderr entries are not specified in the job description.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-so, -stdout-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            append stdout out stream to the specified file instead of to stdout.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-se, -stderr-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            append stderr out stream to the specified file instead of to stderr.
                        </para>
                    </listitem></varlistentry>
                </variablelist>
                
            </refsect3><refsect3><title>Streaming Options</title>
                
                <para>Streaming makes use of GridFTP client calls to retrieve user data.  The
                    following options apply to such transfers.
                </para>
                
                <variablelist>
                    <varlistentry><term>-ipv6, -allow-ipv6</term><listitem>
                        
                        <para>
                            Allow streaming transfers to use IPV6.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-passive</term><listitem>
                        
                        <para>
                            Force streaming transfers to use MODE S to allow for passive mode
                            transfers. (Useful if you're behind a firewall, but expensive
                            because there is no connection caching).
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-nodcau</term><listitem>
                        
                        <para>
                            Disable data channel authentication on streaming transfers
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
                
            </refsect3><refsect3><title>Factory information</title>
                
                <para>
                    Addressing information for the ManagedJobFactory target of this
                    submission must be provided. If neither option is specified, and no
                    EPR is supplied in the job description, then "-factory localhost
                    -factory-type fork" is assumed.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-Ff, -factory-epr-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            If supplied, this option causes the EPR for the ManagedJobFactory to
                            be read from the given file. This EPR is used as the service endpoint
                            for submission of the job.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-F, -factory <emphasis role="underline">contact</emphasis></term><listitem>
                        
                        <para>
                            If supplied, this option causes an EPR to be constructed using ad-hoc
                            methods that depend on GT implementation details.  For
                            interoperability to other implementations of GRAM4_, the
                            -factory-epr-file option should be used instead.
                        </para>
                        
                        <blockquote><para>
                            [<emphasis role="underline">protocol</emphasis>://]{<emphasis role="underline">hostname</emphasis>|<emphasis role="underline">hostaddr</emphasis>}[:<emphasis role="underline">port</emphasis>][/<emphasis role="underline">service</emphasis>]
                        </para></blockquote>
                        
                        <para>
                            Default values form the following contact information if not overridden:
                        </para>
                        
                        <blockquote><para>https://localhost:8443/wsrf/services/ManagedJobFactoryService</para></blockquote>
                        
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-Ft, -factory-type <emphasis role="underline">type</emphasis></term><listitem>
                        
                        <para>
                            In the absence of -factory-epr-file, this option refines the behavior of the
                            -factory option to select a specific type of scheduler. The default is "Fork"
                            for single jobs and "Multi" for <glossterm baseform="multijob">multijobs</glossterm>.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Job description</title>
                
                <para>
                    A description of the job to be submitted must be provided with the
                    -submit command, either using the WS GRAMXML description syntax or a
                    simpler Unix command and argument list.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-f, -job-description-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            If supplied, this option causes the job description to be read from
                            the given file.  This description is modified according to the other
                            options and passed in the WS GRAMsubmission messages.  The root element of
                            this file must be 'job' for a single job or 'multiJob' for a multijob.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-c, -job-command [--] <emphasis role="underline">prog</emphasis> [<emphasis role="underline">arg</emphasis> ...]</term><listitem>
                        
                        <para>
                            If supplied, this option take all remaining globusrun-ws arguments as
                            its arguments; therefore it must appear last among globusrun-ws
                            options. This option causes globusrun-ws to generate a simple job
                            description with the named program and arguments.
                        </para>
                    </listitem>
                    </varlistentry>
                </variablelist>
                
            </refsect3><refsect3><title>Submission ID</title>
                
                <para>
                    A submission ID may be used in the WS GRAMprotocol for robust
                    reliability in the face of message faults or other transient errors to
                    ensure that at most one instance of a job is executed, i.e. to prevent
                    accidental duplication of jobs under rare circumstances with client
                    retry on failure. The globusrun-ws tool always uses this feature,
                    requiring either a submission ID to be passed in as input or a new
                    unique ID to be created by the tool itself. If a new ID is created, it
                    should be captured by the user who wishes to exploit this reliability
                    interface. The ID in use, whether created or passed as input, will be
                    written to the optional output file when provided, as well as to the
                    standard error output unless the <emphasis>quiet mode</emphasis> is in
                    effect.
                </para>
                
                <para>
                    If a user is unsure whether a job was submitted successfully, he
                    should resubmit using the same ID as was used for the previous
                    attempt.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-I, -submission-id <emphasis role="underline">ID</emphasis></term><listitem>
                        
                        <para>
                            If supplied, this option causes the job to be submitted using the
                            given ID in the reliability protocol.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-If, -submission-id-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            If supplied, this option causes the ID to be read from the given
                            file. It is an error to use both mechanisms to provide an input ID.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-Io, -submission-id-output-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            If supplied, the ID in use is written to the given file, whether this
                            ID was provided by the user or given by one of the above input
                            options.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Job EPR output</title>
                
                <para>
                    A successful submission will create a new ManagedJob resource with its
                    own unique EPR for messaging. The globusrun-ws tool will output this
                    EPR to a file when requested and as the sole standard output when
                    running in batch mode. When running in streaming output mode, it is
                    possible that the EPR will not be output and the user's only recourse
                    is to submit again with the same submission ID and job request in
                    order to reattach to the existing job.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-o, -job-epr-output-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            If supplied, the created ManagedJob EPR will be written to the given
                            file following successful submission. The file will not be written if
                            the submission fails.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Delegation</title>
                
                <para>
                    The job description supports the optional identification of delegated
                    credentials for use by the WS GRAMservices.  These features are
                    passed through globusrun-ws without modification. However,
                    globusrun-ws can also perform delegation and construct these optional
                    request elements before submitting it to the service. The only delegation
                    performed by default (if an endpoint does not already exist) is the multijob
                    level jobCredential.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-J, -job-delegate</term><listitem>
                        
                        <para>
                            If supplied AND the job description does not already provide a jobCredential
                            element, globusrun-ws will delegate
                            the client credential to WS GRAMand introduce the corresponding
                            element to the submission input.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-S, -staging-delegate</term><listitem>
                        
                        <para>
                            If supplied AND the job description does include staging or cleanup
                            directives AND the job description does not already provide the
                            necessary stagingCredential or 
                            transferCredential element(s),
                            globusrun-ws will delegate the client credential to WS GRAM and RFT, and
                            introduce the corresponding elements to the submission input.
                        </para>
                        
                        <para>This option is implied by -streaming</para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-Jf, -job-credential-file <emphasis role="underline">filename</emphasis>:</term><listitem>
                        
                        <para>
                            If supplied AND the job description does not already provide a
                            jobCredential element, globusrun-ws will copy the supplied epr into
                            the job description.  This should be an epr returned from the
                            DelegationFactoryService intended for use by the job (or, in the
                            case of a multijob, for authenticating to the subjobs).
                        </para>
                        <para>
                            <emphasis role="bold">note</emphasis>: for multijob descriptions, only the top level jobCredential
                            will be copied into.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-Sf, -staging-credential-file <emphasis role="underline">filename</emphasis>:</term><listitem>
                        
                        <para>
                            If supplied AND the job description does not already provide a
                            stagingCredential element, globusrun-ws will copy the supplied epr
                            into the job description.  This should be an epr returned from the
                            DelegationFactoryService intended for use with the RFT service
                            associated with the ManagedJobService.
                        </para>
                        <para>
                            <emphasis role="bold">note</emphasis>: this option is ignored for multijobs.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-Tf, -transfer-credential-file <emphasis role="underline">filename</emphasis>:</term><listitem>
                        
                        <para>
                            If supplied, globusrun-ws will copy the epr into each of the
                            stage in, stage out, and cleanup elements that do not already
                            contain a transferCredential element.  This should be an epr
                            returned from the DelegationFactoryService intended for use by
                            RFT to authenticate with the target gridftp server.
                        </para>
                        <para>
                            <emphasis role="bold">note</emphasis>: this option is ignored for multijobs.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Lifetime</title>
                
                <para>
                    The ManagedJob resource supports lifetime management in the form of a
                    scheduled destruction. The default lifetime requested by the client is
                    infinite, subject to server policies.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-term, -termination <emphasis role="underline">mm/dd/yyyy HH:MM</emphasis></term><listitem>
                        
                        <para>
                            Set an absolute termination time.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-term, -termination +<emphasis role="underline">HH:MM</emphasis></term><listitem>
                        
                        <para>
                            Set a termination time relative to the successful creation of the
                            job. The default is +24:00
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
            </refsect3>
        </refsect2>
        
        
        <refsect2><title>Validate options</title>
            <variablelist>
                <varlistentry><term>-validate</term><listitem>
                    <para>
                        The -validate command checks the job description for syntax errors and a
                        subset of semantic errors without making any service requests.
                    </para>
                </listitem></varlistentry>
            </variablelist>
            
            <refsect3><title>Job description</title>
                <variablelist>
                    
                    <varlistentry><term>-f, -job-description-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            This option causes the job description to be read from the given file.
                            This description is checked for validity.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
            </refsect3>
        </refsect2>
        
        <refsect2><title>Monitor options</title>
            <variablelist>
                <varlistentry><term>-monitor</term><listitem>
                    <para>
                        The -monitor command attaches to an existing job in interactive or
                        interactive-streaming output modes.
                    </para>
                </listitem></varlistentry>
            </variablelist>
            
            <refsect3><title>Job</title>
                <para>
                    Addressing information for the ManagedJob target of this command
                    must be provided.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-j, -job-epr-file <emphasis role="underline">filename</emphasis></term><listitem>
                        
                        <para>
                            If supplied, this option causes the EPR for the ManagedJob to be read
                            from the given file. This EPR is used as the endpoint for service
                            requests.
                        </para>
                    </listitem></varlistentry>
                    
                </variablelist>
                
            </refsect3><refsect3><title>Output mode</title>
                
                <para>
                    In the default <emphasis>interactive mode</emphasis>, the tool keeps running in
                    order to monitor job status.  In the optional <emphasis>interactive-streaming
                        mode</emphasis>, the job output files are fetched and output from
                    globusrun-ws as well.
                </para>
                
                <variablelist>
                    
                    <varlistentry><term>-s, -streaming</term><listitem>
                        
                        <para>
                            See Output mode under Submit Options above for details on streaming.
                        </para>
                    </listitem></varlistentry>
                </variablelist>
            </refsect3>
        </refsect2>
        
        <refsect2><title>Status options</title>
            <variablelist>
                <varlistentry><term>-status</term><listitem>
                    <para>
                        The -status command reports the current state of the job and exits.
                        See the
                        <link linkend="gram4-developer-archdes-states-external">External States of the Managed Job Services</link>
                        section of the developer guid for information on valid job states.
                    </para>
                </listitem></varlistentry>
            </variablelist>
            
            <para>
                See the Job options for the -monitor command.
            </para>
        </refsect2>
        
        <refsect2><title>Kill options</title>
            <variablelist>
                <varlistentry><term>-kill</term><listitem>
                    <para>
                        The -kill command requests the immediate cancellation of the job and exits.
                    </para>
                </listitem></varlistentry>
            </variablelist>
        </refsect2>
        
        <refsect2><title>Help options</title>
            <variablelist>
                <varlistentry><term>-help</term><listitem>
                    <para>
                        Outputs an overview of the commands and features of the command.
                    </para>
                </listitem></varlistentry>
            </variablelist>
        </refsect2>
        
        <refsect2><title>Usage options</title>
            <variablelist>
                <varlistentry><term>-usage</term><listitem>
                    <para>
                        Outputs brief usage information for the command.
                    </para>
                </listitem></varlistentry>
            </variablelist>
        </refsect2>
        
        <refsect2><title>Version options</title>
            <variablelist>
                <varlistentry><term>-version</term><listitem>
                    <para>
                        Outputs version information for the command.
                    </para>
                </listitem></varlistentry>
            </variablelist>
        </refsect2>
        
    </refsect1>
    
    <refsect1 id="globusrun-ws-jobhandling"><title>Job Handling</title>
        
        <para>
            For every job that globusrun-ws delegates a credential, globusrun will augment
            the user's job description, adding annotations that will later tell
            globusrun-ws to destroy the credential after the job has been destroyed.
            Below are 2 job annotation examples.
            
            globusrun-ws only delegated the job cred...
            <screen>
                &lt;extensions&gt;
                &lt;globusrunAnnotation&gt;
                &lt;automaticJobDelegation&gt;true&lt;/automaticJobDelegation&gt;
                &lt;automaticStagingDelegation&gt;false&lt;/automaticStagingDelegation&gt;
                &lt;automaticStageInDelegation&gt;false&lt;/automaticStageInDelegation&gt;
                &lt;automaticStageOutDelegation&gt;false&lt;/automaticStageOutDelegation&gt;
                &lt;automaticCleanUpDelegation&gt;false&lt;/automaticCleanUpDelegation&gt;
                &lt;/globusrunAnnotation&gt;
                &lt;/extensions&gt;
            </screen>
            
            globusrun-ws delegated the job, staging and stage in cred...
            <screen>
                &lt;extensions&gt;
                &lt;globusrunAnnotation&gt;
                &lt;automaticJobDelegation&gt;true&lt;/automaticJobDelegation&gt;
                &lt;automaticStagingDelegation&gt;true&lt;/automaticStagingDelegation&gt;
                &lt;automaticStageInDelegation&gt;true&lt;/automaticStageInDelegation&gt;
                &lt;automaticStageOutDelegation&gt;false&lt;/automaticStageOutDelegation&gt;
                &lt;automaticCleanUpDelegation&gt;false&lt;/automaticCleanUpDelegation&gt;
                &lt;/globusrunAnnotation&gt;
                &lt;/extensions&gt;
            </screen>
        </para>
    </refsect1>
    <refsect1 id="globusrun-ws-environment"><title>Environment</title>
        
        <variablelist>
            
            <varlistentry><term>X509_USER_PROXY</term><listitem>
                
                <para>
                    Overrides the default selection of user credentials when using GSI security.
                </para>
            </listitem></varlistentry>
            
        </variablelist>
        
    </refsect1>
    
    <refsect1 id="globusrun-ws-exitcodes"><title>Exit Codes</title>
        
        <para>
            The client returns negative error codes for client errors, 0 for success,
            and positive error codes from the submitted job (where possible)
        </para>
    </refsect1>
</refentry>


<refentry id="globus-job-run-ws">
    <refmeta>
        <refentrytitle>globus-job-run-ws</refentrytitle>
        <manvolnum>1</manvolnum>
    </refmeta>
    <refnamediv>
        <refname>globus-job-run-ws</refname>
        <refpurpose>
        Interactive job submission script for WS GRAM
        </refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <cmdsynopsis>
            <command>globus-job-run-ws</command>
            <arg choice="plain">GLOBAL OPTIONS</arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>GLOBAL OPTIONS:</command>
            <sbr/><sbr/>
            <arg>-help|-usage</arg>
            <arg>-version</arg>
            <arg>-verbose</arg>
            <arg>-dumpcmd</arg>
            <arg>-dumpjdd</arg>
            <arg>-o|-job-epr-output-file <replaceable>filename</replaceable></arg>
            <arg>-contact <replaceable>factory contact</replaceable></arg>
            <arg>-factory-type <replaceable>ResourceID</replaceable></arg>
            <arg>-z|-authorization <replaceable>authz</replaceable></arg>
            <arg>-delegation-epr-file <replaceable>EPR file</replaceable></arg>
            <arg>-gridftp <replaceable>URL</replaceable></arg>
            <arg>-jobid <replaceable>job ID</replaceable></arg>
            <arg>-np|-count <replaceable>N</replaceable></arg>
            <arg>-host-count <replaceable>N</replaceable></arg>
            <arg>-max-time <replaceable>minutes</replaceable></arg>
            <arg>-max-memory <replaceable>MB</replaceable></arg>
            <arg>-min-memory <replaceable>MB</replaceable></arg>
            <arg>-project <replaceable>project ID</replaceable></arg>
            <arg>-queue <replaceable>queue ID</replaceable></arg>
            <arg>-dir <replaceable>directory</replaceable></arg>
            <arg>-job-type <replaceable>job type</replaceable></arg>
            <arg>-stdin <replaceable>file</replaceable></arg>
            <arg>-stdout <replaceable>file</replaceable></arg>
            <arg>-stderr <replaceable>file</replaceable></arg>
            <arg rep="repeat">-library-path <replaceable>path</replaceable></arg>
            <arg>-env <replaceable>name=value[ name=value]...</replaceable></arg>
            <arg>-args <replaceable>arg[ arg]...</replaceable></arg>
            <group choice="req">
                <arg>HOST CLAUSE</arg>
                <arg rep="repeat">-: <replaceable>OPTIONS</replaceable> HOST CLAUSE[ -: <replaceable>OPTIONS</replaceable> HOST CLAUSE]...</arg>
            </group>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>OPTIONS:</command>
            <sbr/><sbr/>
            <arg>-factory-type <replaceable>ResourceID</replaceable></arg>
            <arg>-np|-count <replaceable>N</replaceable></arg>
            <arg>-host-count <replaceable>N</replaceable></arg>
            <arg>-max-time <replaceable>minutes</replaceable></arg>
            <arg>-max-memory <replaceable>MB</replaceable></arg>
            <arg>-min-memory <replaceable>MB</replaceable></arg>
            <arg>-project <replaceable>project ID</replaceable></arg>
            <arg>-queue <replaceable>queue ID</replaceable></arg>
            <arg>-dir <replaceable>directory</replaceable></arg>
            <arg>-job-type <replaceable>job type</replaceable></arg>
            <arg>-stdin <replaceable>file</replaceable></arg>
            <arg>-stdout <replaceable>file</replaceable></arg>
            <arg>-stderr <replaceable>file</replaceable></arg>
            <arg>-env <replaceable>name=value[ name=value]...</replaceable></arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>HOST CLAUSE:</command>
            <sbr/><sbr/>
            <arg choice="plain">contact</arg>
            <group>
                <arg>-l</arg>
                <arg>-s</arg>
            </group>
            <arg choice="plain">executable</arg>
            <arg choice="plain" rep="repeat"><replaceable>arg[ arg]</replaceable></arg>
        </cmdsynopsis>
    </refsynopsisdiv>
    
    <refsect1 id="globus-job-run-ws-description"><title>Description</title>
        <para>
            <computeroutput>globus-job-run-ws</computeroutput> is a wrapper
            script around <computeroutput>globusrun-ws</computeroutput>.
            It makes it easier to submit interactive jobs with streaming output.
            Interactive jobs are defined as those that are submitted and
            actively monitored by the client for state changes.  The client
            will not exit until the job is finished and the output has been
            streamed back.  The job is also automatically destroyed and it's
            scratch space cleaned up before the client exits.
        </para>
    </refsect1>
    
    <refsect1 id="globus-job-run-ws-commandoptions"><title>Command options</title>
        <refsect2><title>Global Options</title>
            <para>
                The global options are used to 1) affect the script execution,
                2) control the job submission, and 3) provide defaults for
                subjobs when using the multijob syntax.
            </para>
            <variablelist>
                <varlistentry><term>-help|-usage</term><listitem>
                    <para>
                        Prints the command usage and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-version</term><listitem>
                    <para>
                        Prints the version of the client program and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-verbose</term><listitem>
                    <para>
                        Prints extra script execution debug messages.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-dumpcmd</term><listitem>
                    <para>
                        Prints the actual 
                        <computeroutput>globusrun-ws</computeroutput>
                        command that would have been executed and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-dumpjdd</term><listitem>
                    <para>
                        Prints the actual Job Description Document that
                        would have been passed to
                        <computeroutput>globusrun-ws</computeroutput> and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-o|-job-epr-output-file</term><listitem>
                    <para>
                        Causes the job's EPR to be written to the specified
                        file.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-contact</term><listitem>
                    <para>
                        Specifies the factory contact string for where to
                        submit the multijob.  This argument is ignored if
                        there is only one single job host clause (i.e. no '-:'
                        arguments).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-factory-type</term><listitem>
                    <para>
                        Specifies the factory resource ID for the target factory
                        service.  Supported values are "Fork", "Multi",
                        "<glossterm>Condor</glossterm>", "<glossterm>LSF</glossterm>", and "<glossterm baseform="Portable Batch System">PBS</glossterm>". For single jobs the the
                        default is "Fork".  For multijobs the default is
                        "Multi".
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-z|-authorization</term><listitem>
                    <para>
                        Specifies the type of authorization to do against the
                        service.  Valid values are "host", "self", or a
                        certificate subject (i.e. identity authorization).
                        The default is "host" if not specified.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-delegation-epr-file</term><listitem>
                    <para>
                        Specifies a file with an EPR to a delegated credential
                        that is to be used for the job, staging, and transfer
                        credential. If you need more flexibility over these
                        different credentials separately, please use
                        <computeroutput>globusrun-ws</computeroutput> directly.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-gridftp</term><listitem>
                    <para>
                        Specifies the base URL for the GridFTP server used local
                        to the client for staging files to and from the server.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-jobid</term><listitem>
                    <para>
                        Specifies the ID of the job. This overrides the
                        automatically generated <glossterm baseform="Universally Unique Identifier">UUID</glossterm>.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-np|-count</term><listitem>
                    <para>
                        Specifies the number of processes to spawn for this job.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-host-count</term><listitem>
                    <para>
                        Specifies the number of processing elements to employ
                        for running the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-max-time</term><listitem>
                    <para>
                        Specifies the maximum amount of time the scheduler
                        should allow for running the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-max-memory</term><listitem>
                    <para>
                        Specifies the maximum amount of memory the scheduler
                        should allow for running the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-min-memory</term><listitem>
                    <para>
                        Specifies the minimum amount of memory the job needs
                        to run.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-project</term><listitem>
                    <para>
                        Specifies the project ID associated with the job.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-queue</term><listitem>
                    <para>
                        Specifies the target queue that the job should be placed
                        in when the job is submitted to the scheduler.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-dir</term><listitem>
                    <para>
                        Specifies the working directory for the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-job-type</term><listitem>
                    <para>
                        Specifies the type of job this is.  Valid values are
                        "single", "multiple", "condor", and "mpi".  The default
                        value is "multiple".
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-stdin</term><listitem>
                    <para>
                        Specifies the stdin input file path local to the job
                        process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-stdout</term><listitem>
                    <para>
                        Specifies the stdout output file path local to the job
                        process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-stderr</term><listitem>
                    <para>
                        Specifies the stderr output file path local to the job
                        process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-library-path</term><listitem>
                    <para>
                        Specifies the a path to be added to the library path of
                        the job.  This argument can be repeated.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-env</term><listitem>
                    <para>
                        Specifies name/value pairs separated by '=' to be used
                        as environment variable assignments for the job
                        process(es). The name/value pair values can be repeated
                        until a dashed argument is specified or there are only
                        two arguments left on the command line
                        (i.e. ending host clause).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-args</term><listitem>
                    <para>
                        Specifies default command arguments for the subjobs.
                        The values can be repeated until a host clause is
                        encountered.  Arguments specified with the executable
                        in the host clause are appended to these values.
                    </para>
                </listitem></varlistentry>
            </variablelist>
            
            <refsect3><title>Options</title>
                <para>
                    These options can be specified before each subjob host
                    clause when using the multijob syntax.
                </para>
                
                <variablelist>
                    <varlistentry><term>-factory-type</term><listitem>
                        <para>
                            Specifies the factory resource ID for the target
                            factory service.  Supported values are "Fork",
                            "Condor", "LSF", and "PBS". The default is "Fork".
                            A value of "Multi" is not allowed in the subjob
                            options because the service semantics do not allow
                            this.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-np|-count</term><listitem>
                        <para>
                            Specifies the number of processes to spawn for this
                            job.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-host-count</term><listitem>
                        <para>
                            Specifies the number of processing elements to
                            employ for running the job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-max-time</term><listitem>
                        <para>
                            Specifies the maximum amount of time the scheduler
                            should allow for running the job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-max-memory</term><listitem>
                        <para>
                            Specifies the maximum amount of memory the scheduler
                            should allow for running the job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-min-memory</term><listitem>
                        <para>
                            Specifies the minimum amount of memory the job needs
                            to run.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-project</term><listitem>
                        <para>
                            Specifies the project ID associated with the job.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-queue</term><listitem>
                        <para>
                            Specifies the target queue that the job should be
                            placed in when the job is submitted to the
                            scheduler.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-dir</term><listitem>
                        <para>
                            Specifies the working directory for the job
                            process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-job-type</term><listitem>
                        <para>
                            Specifies the type of job this is.  Valid values are
                            "single", "multiple", "condor", and "mpi".  The
                            default value is "multiple".
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-stdin</term><listitem>
                        <para>
                            Specifies the stdin input file path local to the job
                            process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-stdout</term><listitem>
                        <para>
                            Specifies the stdout output file path local to the
                            job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-stderr</term><listitem>
                        <para>
                            Specifies the stderr output file path local to the
                            job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-library-path</term><listitem>
                        <para>
                            Specifies the a path to be added to the library path
                            of the job.  This argument can be repeated.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-env</term><listitem>
                        <para>
                            Specifies name/value pairs separated by '=' to be
                            used as environment variable assignments for the job
                            process(es). The name/value pair values can be
                            repeated until a dashed argument is specified or
                            there are only two arguments left on the command
                            line (i.e. ending host clause).
                        </para>
                    </listitem></varlistentry>
                </variablelist>
            </refsect3>
            
            <refsect3><title>Host Clause</title>
                <para>
                    The host clause specifies the service contact string and
                    executable.
                </para>
                
                <variablelist>
                    <varlistentry><term>contact string</term><listitem>
                        <para>
                            Specifies the target service.  Valid forms of the
                            contact string are as follows:
                            <screen>
                               hostname
                               hostname:port
                               hostname:port/service
                               hostname/service
                               protocol://hostname
                               protocol://hostname:port
                               protocol://hostname:port/service
                               protocol://hostname/service
                            </screen>
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-l|-s</term><listitem>
                        
                        <para>
                            Specifies whether the executable is already local
                            to the execution machine (-l) or should be staged
                            (-s). The default is -l.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>executable</term><listitem>
                        <para>
                            The local path to the program or script to be
                            executed.
                        </para>
                    </listitem></varlistentry>
                </variablelist>
            </refsect3>
        </refsect2>
    </refsect1>
    
    <refsect1 id="globus-job-run-ws-notes"><title>Notes</title>
        <para>
Job stdin defaults to /dev/null.
Job stdout/stderr defaults to "stdout/err" in the scratch directory.

The file modifiers -l and -s specify different filespaces:
      -l[ocal]  file is relative to working directory of job      (DEFAULT)
      -s[tage]  file relative to job request is staged to job host

The working directory of the submitted job defaults to $HOME.

More than one host clause can be specified, in which case the job runs
on all of the hosts simultaneously.

The host clause begins with '-:' for a multi-request, and the contact string
of the remote resource for a single request. It allows any of the
specified options in any order. The first unrecognized (non-flagged)
term  is treated as the executable, with arguments following immediately
after.

In the multi-request case, arguments may be specified specifically for
each host-clause by appending them after the name of the executable, or
job-wide with the -args flag. In either case, arguments continue until
the end of the command-line or until the next '-:' flag signifying
a new host-clause.

Two '-:' flags in a row are interpreted as an escaped '-:' and the host-
clause continues until the next unpaired '-:' flag or end of input.

Except for -library-path, if more than one copy of an argument is specified
(such as two -stdin definitions), the setting defined last on the command line
will be used.
        </para>
    </refsect1>
</refentry>

<refentry id="globus-job-submit-ws">
    <refmeta>
        <refentrytitle>globus-job-submit-ws</refentrytitle>
        <manvolnum>1</manvolnum>
    </refmeta>
    <refnamediv>
        <refname>globus-job-submit-ws</refname>
        <refpurpose>
        Batch job submission script for WS GRAM
        </refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <cmdsynopsis>
            <command>globus-job-submit-ws</command>
            <arg choice="plain">GLOBAL OPTIONS</arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>GLOBAL OPTIONS:</command>
            <sbr/><sbr/>
            <arg>-help|-usage</arg>
            <arg>-version</arg>
            <arg>-verbose</arg>
            <arg>-dumpcmd</arg>
            <arg>-dumpjdd</arg>
            <arg choice="plain">-o|-job-epr-output-file <replaceable>filename</replaceable></arg>
            <arg>-contact <replaceable>contact string</replaceable></arg>
            <arg>-factory-type <replaceable>ResourceID</replaceable></arg>
            <arg>-z|-authorization <replaceable>authz</replaceable></arg>
            <arg>-delegation-epr-file <replaceable>EPR file</replaceable></arg>
            <arg>-gridftp <replaceable>URL</replaceable></arg>
            <arg>-jobid <replaceable>job ID</replaceable></arg>
            <arg>-np|-count <replaceable>N</replaceable></arg>
            <arg>-host-count <replaceable>N</replaceable></arg>
            <arg>-max-time <replaceable>minutes</replaceable></arg>
            <arg>-max-memory <replaceable>MB</replaceable></arg>
            <arg>-min-memory <replaceable>MB</replaceable></arg>
            <arg>-project <replaceable>project ID</replaceable></arg>
            <arg>-queue <replaceable>queue ID</replaceable></arg>
            <arg>-dir <replaceable>directory</replaceable></arg>
            <arg>-job-type <replaceable>job type</replaceable></arg>
            <arg>-stdin <replaceable>file</replaceable></arg>
            <arg>-stdout <replaceable>file</replaceable></arg>
            <arg>-stderr <replaceable>file</replaceable></arg>
            <arg rep="repeat">-library-path <replaceable>path</replaceable></arg>
            <arg>-env <replaceable>name=value[ name=value]...</replaceable></arg>
            <arg>-args <replaceable>arg[ arg]...</replaceable></arg>
            <group choice="req">
                <arg>HOST CLAUSE</arg>
                <arg rep="repeat">-: <replaceable>OPTIONS</replaceable> HOST CLAUSE[ -: <replaceable>OPTIONS</replaceable> HOST CLAUSE]...</arg>
            </group>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>OPTIONS:</command>
            <sbr/><sbr/>
            <arg>-np|-count <replaceable>N</replaceable></arg>
            <arg>-host-count <replaceable>N</replaceable></arg>
            <arg>-max-time <replaceable>minutes</replaceable></arg>
            <arg>-max-memory <replaceable>MB</replaceable></arg>
            <arg>-min-memory <replaceable>MB</replaceable></arg>
            <arg>-project <replaceable>project ID</replaceable></arg>
            <arg>-queue <replaceable>queue ID</replaceable></arg>
            <arg>-dir <replaceable>directory</replaceable></arg>
            <arg>-job-type <replaceable>job type</replaceable></arg>
            <arg>-stdin <replaceable>file</replaceable></arg>
            <arg>-stdout <replaceable>file</replaceable></arg>
            <arg>-stderr <replaceable>file</replaceable></arg>
            <arg>-env <replaceable>name=value[ name=value]...</replaceable></arg>
        </cmdsynopsis>
        <cmdsynopsis>
            <command>HOST CLAUSE:</command>
            <sbr/><sbr/>
            <arg choice="plain">contact string</arg>
            <group>
                <arg>-l</arg>
                <arg>-s</arg>
            </group>
            <arg choice="plain">executable</arg>
            <arg choice="plain" rep="repeat"><replaceable>arg[ arg]</replaceable></arg>
        </cmdsynopsis>
    </refsynopsisdiv>
    
    <refsect1 id="globus-job-submit-ws-description"><title>Description</title>
        <para>
            <computeroutput>globus-job-submit-ws</computeroutput> is a wrapper
            script around <computeroutput>globusrun-ws</computeroutput>...
            It makes it easier to submit batch jobs. Batch jobs are defined as
            those that are submitted but not actively monitored for state
            changes.  One must use <computeroutput>globusrun-ws</computeroutput>
            to check the job's state.  Also, when the job is finished one can
            use <computeroutput>globus-job-get-output-ws</computeroutput> to
            fetch the output of the job and
            <computeroutput>globus-job-cliean-ws</computeroutput> to destroy
            the job and clean up the job's scratch space.
        </para>
    </refsect1>
    
    <refsect1 id="globus-job-submit-ws-commandoptions"><title>Command options</title>
        <refsect2><title>Global Options</title>
            <para>
                The global options are used to 1) affect the script execution,
                2) control the job submission, and 3) provide defaults for
                subjobs when using the multijob syntax.
            </para>
            <variablelist>
                <varlistentry><term>-help|-usage</term><listitem>
                    <para>
                        Prints the command usage and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-version</term><listitem>
                    <para>
                        Prints the version of the client program and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-verbose</term><listitem>
                    <para>
                        Prints extra script execution debug messages.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-dumpcmd</term><listitem>
                    <para>
                        Prints the actual 
                        <computeroutput>globusrun-ws</computeroutput>
                        command that would have been executed and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-dumpjdd</term><listitem>
                    <para>
                        Prints the actual Job Description Document that
                        would have been passed to
                        <computeroutput>globusrun-ws</computeroutput> and exits.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-o|-job-epr-output-file</term><listitem>
                    <para>
                        Causes the job's EPR to be written to the specified
                        file. This argument is not optional.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-contact</term><listitem>
                    <para>
                        Specifies the factory contact string for where to
                        submit the multijob.  This argument is ignored if
                        there is only one single job host clause (i.e. no '-:'
                        arguments).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-factory-type</term><listitem>
                    <para>
                        Specifies the factory resource ID for the target factory
                        service.  Supported values are "Fork", "Multi",
                        "Condor", "LSF", and "PBS". For single jobs the the
                        default is "Fork".  For multijobs the default is
                        "Multi".
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-z|-authorization</term><listitem>
                    <para>
                        Specifies the type of authorization to do against the
                        service.  Valid values are "host", "self", or a
                        certificate subject (i.e. identity authorization).
                        The default is "host" if not specified.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-delegation-epr-file</term><listitem>
                    <para>
                        Specifies a file with an EPR to a delegated credential
                        that is to be used for the job, staging, and transfer
                        credential. If you need more flexibility over these
                        different credentials separately, please use
                        <computeroutput>globusrun-ws</computeroutput> directly.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-gridftp</term><listitem>
                    <para>
                        Specifies the base URL for the GridFTP server used local
                        to the client for staging files to and from the server.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-jobid</term><listitem>
                    <para>
                        Specifies the ID of the job. This overrides the
                        automatically generated UUID.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-np|-count</term><listitem>
                    <para>
                        Specifies the number of processes to spawn for this job.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-host-count</term><listitem>
                    <para>
                        Specifies the number of processing elements to employ
                        for running the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-max-time</term><listitem>
                    <para>
                        Specifies the maximum amount of time the scheduler
                        should allow for running the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-max-memory</term><listitem>
                    <para>
                        Specifies the maximum amount of memory the scheduler
                        should allow for running the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-min-memory</term><listitem>
                    <para>
                        Specifies the minimum amount of memory the job needs
                        to run.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-project</term><listitem>
                    <para>
                        Specifies the project ID associated with the job.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-queue</term><listitem>
                    <para>
                        Specifies the target queue that the job should be placed
                        in when the job is submitted to the scheduler.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-dir</term><listitem>
                    <para>
                        Specifies the working directory for the job process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-job-type</term><listitem>
                    <para>
                        Specifies the type of job this is.  Valid values are
                        "single", "multiple", "condor", and "mpi".  The default
                        value is "multiple".
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-stdin</term><listitem>
                    <para>
                        Specifies the stdin input file path local to the job
                        process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-stdout</term><listitem>
                    <para>
                        Specifies the stdout output file path local to the job
                        process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-stderr</term><listitem>
                    <para>
                        Specifies the stderr output file path local to the job
                        process(es).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-library-path</term><listitem>
                    <para>
                        Specifies the a path to be added to the library path of
                        the job.  This argument can be repeated.
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-env</term><listitem>
                    <para>
                        Specifies name/value pairs separated by '=' to be used
                        as environment variable assignments for the job
                        process(es). The name/value pair values can be repeated
                        until a dashed argument is specified or there are only
                        two arguments left on the command line
                        (i.e. ending host clause).
                    </para>
                </listitem></varlistentry>
                <varlistentry><term>-args</term><listitem>
                    <para>
                        Specifies default command arguments for the subjobs.
                        The values can be repeated until a host clause is
                        encountered.  Arguments specified with the executable
                        in the host clause are appended to these values.
                    </para>
                </listitem></varlistentry>
            </variablelist>
            
            <refsect3><title>Options</title>
                <para>
                    These options can be specified before each subjob host
                    clause when using the multijob syntax.
                </para>
                
                <variablelist>
                    <varlistentry><term>-factory-type</term><listitem>
                        <para>
                            Specifies the factory resource ID for the target
                            factory service.  Supported values are "Fork",
                            "Condor", "LSF", and "PBS". The default is "Fork".
                            A value of "Multi" is not allowed in the subjob
                            options because the service semantics do not allow
                            this.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-np|-count</term><listitem>
                        <para>
                            Specifies the number of processes to spawn for this
                            job.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-host-count</term><listitem>
                        <para>
                            Specifies the number of processing elements to
                            employ for running the job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-max-time</term><listitem>
                        <para>
                            Specifies the maximum amount of time the scheduler
                            should allow for running the job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-max-memory</term><listitem>
                        <para>
                            Specifies the maximum amount of memory the scheduler
                            should allow for running the job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-min-memory</term><listitem>
                        <para>
                            Specifies the minimum amount of memory the job needs
                            to run.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-project</term><listitem>
                        <para>
                            Specifies the project ID associated with the job.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-queue</term><listitem>
                        <para>
                            Specifies the target queue that the job should be
                            placed in when the job is submitted to the
                            scheduler.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-dir</term><listitem>
                        <para>
                            Specifies the working directory for the job
                            process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-job-type</term><listitem>
                        <para>
                            Specifies the type of job this is.  Valid values are
                            "single", "multiple", "condor", and "mpi".  The
                            default value is "multiple".
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-stdin</term><listitem>
                        <para>
                            Specifies the stdin input file path local to the job
                            process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-stdout</term><listitem>
                        <para>
                            Specifies the stdout output file path local to the
                            job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-stderr</term><listitem>
                        <para>
                            Specifies the stderr output file path local to the
                            job process(es).
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-library-path</term><listitem>
                        <para>
                            Specifies the a path to be added to the library path
                            of the job.  This argument can be repeated.
                        </para>
                    </listitem></varlistentry>
                    <varlistentry><term>-env</term><listitem>
                        <para>
                            Specifies name/value pairs separated by '=' to be
                            used as environment variable assignments for the job
                            process(es). The name/value pair values can be
                            repeated until a dashed argument is specified or
                            there are only two arguments left on the command
                            line (i.e. ending host clause).
                        </para>
                    </listitem></varlistentry>
                </variablelist>
            </refsect3>
            
            <refsect3><title>Host Clause</title>
                <para>
                    The host clause specifies the service contact string and
                    executable.
                </para>
                
                <variablelist>
                    <varlistentry><term>contact string</term><listitem>
                        <para>
                            Specifies the target service.  Valid forms of the
                            contact string are as follows:
                            <screen>
                               hostname
                               hostname:port
                               hostname:port/service
                               hostname/service
                               protocol://hostname
                               protocol://hostname:port
                               protocol://hostname:port/service
                               protocol://hostname/service
                            </screen>
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>-l|-s</term><listitem>
                        
                        <para>
                            Specifies whether the executable is already local
                            to the execution machine (-l) or should be staged
                            (-s). The default is -l.
                        </para>
                    </listitem></varlistentry>
                    
                    <varlistentry><term>executable</term><listitem>
                        <para>
                            The local path to the program or script to be
                            executed.
                        </para>
                    </listitem></varlistentry>
                </variablelist>
            </refsect3>
        </refsect2>
    </refsect1>
    
    <refsect1 id="globus-job-submit-ws-notes"><title>Notes</title>
        <para>
Job stdin defaults to /dev/null.
Job stdout/stderr defaults to "stdout/err" in the scratch directory.

The file modifiers -l and -s specify different filespaces:
      -l[ocal]  file is relative to working directory of job      (DEFAULT)
      -s[tage]  file relative to job request is staged to job host

The working directory of the submitted job defaults to $HOME.

More than one host clause can be specified, in which case the job runs
on all of the hosts simultaneously.

The host clause begins with '-:' for a multi-request, and the contact string
of the remote resource for a single request. It allows any of the
specified options in any order. The first unrecognized (non-flagged)
term  is treated as the executable, with arguments following immediately
after.

In the multi-request case, arguments may be specified specifically for
each host-clause by appending them after the name of the executable, or
job-wide with the -args flag. In either case, arguments continue until
the end of the command-line or until the next '-:' flag signifying
a new host-clause.

Two '-:' flags in a row are interpreted as an escaped '-:' and the host-
clause continues until the next unpaired '-:' flag or end of input.

Except for -library-path, if more than one copy of an argument is specified
(such as two -stdin definitions), the setting defined last on the command line
will be used.
        </para>
    </refsect1>
</refentry>

<refentry id="globus-job-get-output-ws">
    <refmeta>
        <refentrytitle>globus-job-get-output-ws</refentrytitle>
        <manvolnum>1</manvolnum>
    </refmeta>
    <refnamediv>
        <refname>globus-job-get-output-ws</refname>
        <refpurpose>
        Job output fetch script for WS GRAM
        </refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <cmdsynopsis>
            <command>globus-job-get-output-ws</command>
            <arg>-help</arg>
            <arg>-version</arg>
            <arg>-verbose</arg>
            <group>
                <arg>-out</arg>
                <arg>-err</arg>
            </group>
            <arg>-z|authorization <replaceable>authz method</replaceable></arg>
            <arg choice="plain">&lt;EPR file&gt;</arg>
        </cmdsynopsis>
    </refsynopsisdiv>
    
    <refsect1 id="globus-job-get-output-ws-description"><title>Description</title>
        <para>
            <computeroutput>globus-job-get-output-ws</computeroutput> is a
            wrapper around 
            <computeroutput>wsrf-get-property</computeroutput> and
            <computeroutput>globus-url-copy</computeroutput>. It is intended to
            fetch either the stdout or stderr of a batch job submitted with
            <computeroutput>globus-job-submit-ws</computeroutput>.
        </para>
    </refsect1>
    
    <refsect1 id="globus-job-get-output-ws-commandoptions"><title>Command Options</title>
        <para>
        </para>
            
        <variablelist>
            <varlistentry><term>-help</term><listitem>
                <para>
                    HELP!
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-version</term><listitem>
                <para>
                    The script version.
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-verbose</term><listitem>
                <para>
                    Verbose script execution.
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-out, -err</term><listitem>
                <para>
                    Fetch either the stdout or stderr of the job.
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-authorization</term><listitem>
                <para>
                    Either "host", "self", or a cert subject (identity authz).
                </para>
            </listitem></varlistentry>
            <varlistentry><term>EPR file</term><listitem>
                <para>
                    Specifies a path to a file containg a job EPR. This is
                    usually the file written via the
                    <computeroutput>-job-epr-output-file</computeroutput>
                    argument to
                    <computeroutput>globus-job-submit-ws</computeroutput>.
                </para>
            </listitem></varlistentry>
        </variablelist>
    </refsect1>
</refentry>

<refentry id="globus-job-clean-ws">
    <refmeta>
        <refentrytitle>globus-job-clean-ws</refentrytitle>
        <manvolnum>1</manvolnum>
    </refmeta>
    <refnamediv>
        <refname>globus-job-clean-ws</refname>
        <refpurpose>
        Destroy and clean up a batch job for WS GRAM
        </refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <cmdsynopsis>
            <command>globus-job-clean-ws</command>
            <arg>-help</arg>
            <arg>-version</arg>
            <arg>-verbose</arg>
            <arg>-dumpcmd</arg>
            <arg>-z|authorization <replaceable>authz method</replaceable></arg>
            <arg choice="plain">&lt;EPR file&gt;</arg>
        </cmdsynopsis>
    </refsynopsisdiv>
    
    <refsect1 id="globus-job-get-clean-ws-description"><title>Description</title>
        <para>
            <computeroutput>globus-job-clean-ws</computeroutput> is a very
            simple wrapper around the 
            <computeroutput>globusrun-ws -kill</computeroutput> command.
        </para>
    </refsect1>
    
    <refsect1 id="globus-job-get-clean-ws-commandoptions"><title>Command Options</title>
        <para>
        </para>
            
        <variablelist>
            <varlistentry><term>-help</term><listitem>
                <para>
                    HELP!
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-version</term><listitem>
                <para>
                    The script version.
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-verbose</term><listitem>
                <para>
                    Verbose script execution.
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-dumpcmd</term><listitem>
                <para>
                    Dump the actual globusrun-ws command being executed.
                </para>
            </listitem></varlistentry>

            <varlistentry><term>-authorization</term><listitem>
                <para>
                    Either "host", "self", or a cert subject (identity authz).
                </para>
            </listitem></varlistentry>
            <varlistentry><term>EPR file</term><listitem>
                <para>
                    Specifies a path to a file containg a job EPR. This is
                    usually the file written via the
                    <computeroutput>-job-epr-output-file</computeroutput>
                    argument to
                    <computeroutput>globus-job-submit-ws</computeroutput>.
                </para>
            </listitem></varlistentry>
        </variablelist>
    </refsect1>
</refentry>
