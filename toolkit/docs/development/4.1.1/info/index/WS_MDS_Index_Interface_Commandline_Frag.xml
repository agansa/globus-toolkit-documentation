<section id="end-user"><title>End-user command line
tools for WS MDS Index Service</title>
<para>The index service exposes information via service groups and is
accessed using the same command-line tools used to query other WSRF
services for information. These tools are documented in detail in
the <ulink url=
"http://www-unix.globus.org/toolkit/docs/4.0/common/javawscore/user-index.html">
Java WS Core User's Guide</ulink>.</para>
<itemizedlist>
<listitem id="wsrf-query"><simpara><ulink url=
"http://www-unix.globus.org/toolkit/docs/4.0/common/javawscore/rn01re05.html">
<command>wsrf-query</command></ulink> performs a query on a resource property
document</simpara></listitem>
<listitem id="wsrf-get-property"><simpara><ulink url=
"http://www-unix.globus.org/toolkit/docs/4.0/common/javawscore/rn01re06.html">
<command>wsrf-get-property</command></ulink> gets a single resource
property</simpara></listitem>
<listitem id="wsrf-get-properties"><simpara>
<ulink url=
"http://www-unix.globus.org/toolkit/docs/4.0/common/javawscore/rn01re07.html">
<command>wsrf-get-properties</command></ulink> gets multiple resource
properties.</simpara></listitem>
</itemizedlist>
</section>

<section id="admin"><title>Administrative command-line
tools for WS MDS Index Service</title>

<section id="mds-servicegroup-add"><title> mds-servicegroup-add</title>
<para>mds-servicegroup-add creates a set of registrations to a
WS-ServiceGroup and periodically renews those registrations. It is
intended primarily for registering grid resources to MDS services
    such as the <glossterm linkend="index-service">Index</glossterm> and <glossterm linkend="trigger-service">Trigger</glossterm> services.</para>
<para>Registrations are defined in an XML configuration file, which is
documented in the <ulink url=
"http://www-unix.globus.org/toolkit/docs/4.0/info/aggregator/admin-index.html#configuring">
Aggregator Framework System Administrator's Guide</ulink>.</para>
</section>
<section><title>Command syntax</title>
<screen>
mds-servicegroup-add -s http://foo [options] <emphasis>config.xml</emphasis>
</screen>
</section>
<section><title>Options and Arguments</title>
<table>
<tgroup cols="2">
<tbody>
<row>
<entry><command>-s <emphasis>url</emphasis></command></entry>
<entry>A URL to the service group against which the
<command>mds-servicegroup-add</command> request will be executed. This
command line argument is a required argument, however it is only
necessary that this URL argument evaluate to a valid EPR in the
case that there are no suitable target service group EPRs present
in the configuration file. Any end point references found in the
configuration file will automatically override the EPR specified on
the command-line.</entry>
</row>
<row>
<entry><command>-a</command></entry>
<entry>By default, <command>mds-servicegroup-add</command> will attempt to
make an authenticated connection to each service group. This option
is used to specify anonymous connections (and to prevent
<command>mds-servicegroup-add</command> from failing if you don't have a
valid Grid credential).</entry>
</row>
<row>
<entry><command>-z <emphasis>auth_type</emphasis></command></entry>
<entry>Specify an authorization type: <constant>self</constant>, to fail if
the server's identity is different from the user's identity,
<constant>host</constant>, to fail if the server does not have a valid
server certificate, or <constant>none</constant> to continue regardless of
the server's identity.</entry>
</row>
<row>
<entry><emphasis>config.xml</emphasis></entry>
<entry>the configuration file</entry>
</row>
</tbody></tgroup>
</table>
<para>The syntax of the configuration file used by
<command>mds-servicegroup-add</command> is described in detail in the
<ulink url=
"http://www-unix.globus.org/toolkit/docs/4.0/info/index/WS_MDS_Index_Public_Interfaces.html#configuring_source">
MDS Index Public Interface Guide</ulink>. In addition, the Globus
Toolkit distribution includes an example configuration file
<filename>$GLOBUS_LOCATION/etc/globus_wsrf_mds_aggregator/example-aggregator-registration.xml</filename>.</para>
<para><emphasis>The simplest way to register services to an index is to
edit the example file, replacing the EPRs in that file with the
EPRs for your resources, and then to run
<command>mds-servicegroup-add</command> to perform the registrations
specified in that file.</emphasis></para>
<para>For example, to register to the DefaultIndexService with a
modified <filename>example-aggregator-registration.xml</filename> file, you
could run a command similar to the following:</para>
<screen>
$GLOBUS_LOCATION/bin/mds-servicegroup-add -s \
https://127.0.0.1:8443/wsrf/services/DefaultIndexService \
$GLOBUS_LOCATION/etc/globus_wsrf_mds_aggregator/example-aggregator-registration.xml
</screen>
</section>
<section><title>Limitations</title>
<para>It is necessary for the tool to continue to run in order for the
registrations that it maintains to be kept alive, as registrations
will otherwise time out.</para>
</section>
</section>