<?php 
$title="GT 4.0 WS MDS WebMDS (Tech Preview): System Administrator's Guide";
include_once( "/mcs/www-unix.globus.org/include/globus_header.inc" ); ?>

<?php
include_once( "http://www-unix.globus.org/toolkit/docs/development/4.0-drafts/techpreview.inc" );
?>

<h1><?php echo $title; ?></h1>
<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li> <a href="#installing">Building and Installing</a></li>
  <li><a href="#configuring">Configuring</a></li>
  <li><a href="#deploying">Deploying</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#security_considerations">Security Considerations </a></li>
  <li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<h2><a name="introduction"></a>Introduction</h2>
<p>This guide contains advanced configuration information for system administrators
  working with WS MDS WebMDS. It provides references to information on procedures
  typically performed by system administrators, including installation, configuring,
deploying, and testing the installation.</p>
<p>This information is in addition to the basic installation instructions in
  the <a href="http://www.isi.edu/%7Ecristina/styleguide/link/to/top/admin/guide">GT
  4.0 System Administrator's Guide</a>.</p>
<h2><a name="installing"></a>Building and Installing</h2>
<p>To install WebMDS, follow the directions in the
<a href="../../../admin/#installinggt">GT System Administrator's Guide</a>.
<p><font color="purple">WebMDS installation instructions were in the
3.9.4 installation guide but are not currently in the 4.0-drafts
version -- make sure they're added.</font></p>
<h2><a name="configuring"></a>Configuring </h2>
<p>
  <?php
include_once( "./../WS_MDS_WebMDS_Interface_Config_Frag.html" );
?>
</p>

<h2><a name="deploying"></a>Deploying</h2>
For the rest of these instructions, the term <i>Globus user</i> will be
used to refer to the owner of the <code>$GLOBUS_LOCATION</code> directory,
and <i>Tomcat user</i> will be used to refer to the owner of the
<code>$CATALINA_HOME</code> directory.  If the Globus and Tomcat installations
were performed from the same user account, the Globus user and Tomcat user
will be the same.

Any time you change the servlet configuration (or any jar files used by the
servlet), you'll need to let tomcat know there was a change.  If you have
a preferred way of configuring tomcat, feel free to use it, with
<code>$GLOBUS_LOCATION/lib/webmds</code> as the servlet directory.
These steps need to be performed by the Tomcat user.

<p>

If you're using tomcat 5.0.28 and haven't done any custom configuration (such
as defining additional hosts) other than changing the tomcat port,
you can configure tomcat by doing the following:

<ol>

<li>Create a context descriptor file called <code>webmds.xml</code>
in the location where tomcat will look for it:

<pre>

    $GLOBUS_LOCATION/lib/webmds/bin/webmds-create-context-file \
         $CATALINA_HOME/conf/Catalina/localhost

</pre>

Note:  if the file
<code>$CATALINA_HOME/conf/Catalina/localhost/webmds.xml</code>
already exists, you can use the <code>-f</code> flag to
<code>create-context-file</code> to overwrite it.
to the tomcat configuration directory.
</li>
<li>If tomcat is running, shut it down.</li>
<pre>

    $CATALINA_HOME/bin/shutdown.sh

</pre>
<li>Start tomcat up.</li>
<pre>

    $CATALINA_HOME/bin/startup.sh

</pre>
</ol>
<h2><a name="testing"></a>Testing</h2>
<p>The easiest way to test your installation is to use it to view your
index service, by pointing your web browser at
<code>http://<i>your-tomcat-host</i>:<i>your-tomcat-port</i>/webmds</code></strong> and clicking on the link labelled "A list of resources registered to
the local default index service".</p>
<h2><a name="security_considerations"></a>Security Considerations </h2>
<?php
include_once( "./../WS_MDS_WebMDS_Security_Considerations_Frag.html" );
?>
<h2><a name="troubleshooting"></a>Troubleshooting</h2>
<p>Error handling in WebMDS is currently done by throwing exceptions, which
are displayed by Tomcat as stack traces.  If you attempt to use WebMDS
to collect information from a service that is not running, you will see a 
stack trace that begins with:</p>
<pre>
org.globus.mds.webmds.xmlSources.resourceProperties.ResourcePropertySourceException: ; nested exception is: 
	java.net.ConnectException: Connection refused
</pre>
<?php include("/mcs/www-unix.globus.org/include/globus_footer.inc"); ?>
