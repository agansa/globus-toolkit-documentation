

<section><title>Protocol overview</title>
<para>RFT Service implementation
in 3.9.5 uses
standard SOAP messages over HTTP to submit and manage a set of 3rd
party GridFTP transfers and to delete files using GridFTP. The user
creates a RFT resource by submitting a list of URL pairs of&nbsp; files
that need to be transferred/deleted&nbsp; to RFT Factory service. The
user also specifies the time to live for the resource the user is
creating to a GT 3.9.5 Container in which RFT is deployed and configured.
The resource is created after the user is properly authorized and
authenticated. RFT service implementation exposes operations to control
and manage the transfers (the resource). The operations exposed by both
RFT factory and RFT service are briefly described below. The resource
the user created also exposes the state of the transfer as a resource
property to which the user can either subscribe for changes or poll for
the changes in state periodically using standard command line clients.</para>
</section>
<section><title>Operations</title>
<para>...</para>
</section>
<section><title>RFT Factory Service</title>
<para>Used
  to create a Reliable File Transfer resource. The operations exposed by
  the factory are as follows:</para>
<itemizedlist>
  <listitem><para><computeroutput>createReliableFileTransfer</computeroutput>: Creates a Reliable
File
Transfer Resource. 
  <itemizedlist>
    <listitem><simpara>Input Parameters:
Initial Termination time , Transfer Request or Delete Request</simpara></listitem>
    <listitem><simpara>Output parameters:&amp;nbsp;
Termination time, Current time, Endpoint reference of the Resource
created. ( This should be stored by the user as it is needed to query
the status of the resource and to perform any further operations on the
resource.</simpara></listitem>
    <listitem><simpara>Fault: createReliableFileTransferFault:</simpara></listitem>
  </itemizedlist></para></listitem>
</itemizedlist>
</section>



<section><title>RFT Service</title>
<para>Used to manage the Resource created
  using the RFT Factory Service. The operations exposed by the service
  are as follows: </para>
<itemizedlist>
  <listitem><para><computeroutput> start:</computeroutput> Starts executing the transfers/deletes
  <itemizedlist>
    <listitem><simpara>Input&amp;nbsp; Parameters: None</simpara></listitem>
    <listitem><simpara>Output Parameters: None</simpara></listitem>
    <listitem><simpara>Fault: RepeatedlyStartedFault:
    </simpara></listitem>
  </itemizedlist></para></listitem>
  <listitem><para><computeroutput>getStatus:</computeroutput> To get the status of a particular file.
  <itemizedlist>
    <listitem><simpara>Input Parameters:&amp;nbsp; A
source URL of the file that is part of the request.</simpara></listitem>
    <listitem><simpara>Output Parameters: <computeroutput>Transfer
Status Type</computeroutput></simpara></listitem>
    <listitem><simpara>Fault: RFTDatabaseFault</simpara></listitem>
  </itemizedlist></para></listitem>
  <listitem><para><computeroutput>getStatusSet</computeroutput> : To get the status of a set of files
in a request
  <itemizedlist>
    <listitem><simpara>Input Parameters:&amp;nbsp; int&amp;nbsp; from ( the relative position of
the transfer in the request)&amp;nbsp; and int offset ( Number of files
queried)</simpara></listitem>
    <listitem><simpara>Output Parameters:&amp;nbsp; An
array of <computeroutput> TransferStatusType </computeroutput></simpara></listitem>
    <listitem><simpara>Fault: RFTDatabaseFault</simpara></listitem>
  </itemizedlist></para></listitem>

  <listitem><para><computeroutput></computeroutput>cancel:&amp;nbsp; To cancel a transfer that is part of a
resource.
  <itemizedlist>
    <listitem><simpara>Input Parameters : int
      from ( the relative
position of
the transfer in the request ) int to
    </simpara></listitem>
    <listitem><simpara>Output Parameters: None</simpara></listitem>
    <listitem><simpara>Fault: RFTDatabaseFault</simpara></listitem>
  </itemizedlist></para></listitem>

</itemizedlist>
</section>


<section><title>Resource properties</title>
<para>...</para>
</section>

<section><title>RFT Factory Service </title>
<itemizedlist>
  <listitem><simpara><computeroutput>ActiveResourceInstances</computeroutput>: A dynamic resource property of total
number of active rft resources in the container at a given point of
time.
  </simpara></listitem>
  <listitem><simpara><computeroutput>TotalNumberOfTransfers</computeroutput>: A dynamic resource property of total
number of transfers/deletes performed since the RFT service is deployed
in this container 
  </simpara></listitem>
  <listitem><simpara><computeroutput>TotalNumberOfActiveTransfers</computeroutput>: A dynamic resource property of
number of active transfers across all rft resources in a container at a
given point of time.
  </simpara></listitem>
  <listitem><simpara><computeroutput>TotalNumberOfBytesTransferred</computeroutput>: A dynamic resource property of
total number of bytes transferred by all RFT resources created since
the deployment of the service.
  </simpara></listitem>
  <listitem><simpara><computeroutput>RFTFactoryStartTime</computeroutput>: Time when the service was deployed in the
container. Used to calculate uptime.
  </simpara></listitem>
  <listitem><simpara><computeroutput>DelegationServiceEPR</computeroutput>: The end point reference of the Delegation
resource that holds the delegated credential used in executing the
resource.</simpara></listitem>
</itemizedlist>
</section>
<section><title>RFT Service </title>
<itemizedlist>
  <listitem><simpara><computeroutput>RequestStatusProperty</computeroutput> : represents the current state of the
resource ( Active, Pending, Failed, Finished). It also includes the
last fault message encountered while executing the request.  </simpara></listitem>
  <listitem><simpara><computeroutput>OverallStatusProperty</computeroutput>:&amp;nbsp; provides current state of the
transfer by providing number of Transfers done, pending, active,
failed, cancelled and retrying. It also contains the fault message, if
any, raised during a transfer.  </simpara></listitem>
  <listitem><simpara><computeroutput>TotalBytes</computeroutput>: provides the total number of bytes transferred by the
resource</simpara></listitem>
  <listitem><simpara><computeroutput>TotalTime</computeroutput>: provides the total time taken to transfer the above
mentioned total bytes.  </simpara></listitem>
</itemizedlist>
</section>

<section><title>Faults</title>
<para>...</para>
</section>

<section><title>RFT Factory Service </title>
<itemizedlist>
  <listitem><simpara><computeroutput>createReliableFileTransferFault</computeroutput>: All the errors encountered
during the creation of the RFT resource are mapped to this fault. Any
security related errors are caught even before the factory and are
thrown to the user/client.</simpara></listitem>
</itemizedlist>
</section>
<section><title>RFT Service
</title>
<itemizedlist>
  <listitem><simpara><computeroutput>RepeatedlyStartedFault</computeroutput>: This is raised if a client calls start
more than once on a resource.  </simpara></listitem>
  <listitem><simpara><computeroutput>RFTDatabaseFault</computeroutput>: Thrown when the service is unable to find the
resource the user/client is querying for.
  </simpara></listitem>
</itemizedlist>
</section>
<section><title>WSDL and Schema Definition</title>
<itemizedlist>
  <listitem><simpara><ulink url="http://viewcvs.globus.org/viewcvs.cgi/ws-transfer/reliable/common/schema/transfer/reliable/reliable_transfer_factory_port_type.wsdl?rev=1.15&amp;only_with_tag=globus_3_9_5&amp;content-type=text/vnd.viewcvs-markup">Reliable
      Transfer Factory Port Type</ulink> </simpara></listitem>
  <listitem><simpara><ulink url="http://viewcvs.globus.org/viewcvs.cgi/ws-transfer/reliable/common/schema/transfer/reliable/reliable_transfer_port_type.wsdl?rev=1.14&amp;only_with_tag=globus_3_9_5&amp;content-type=text/vnd.viewcvs-markup">Reliable Transfer Port Type</ulink></simpara></listitem>
</itemizedlist>
<para>
You can find links to all the RFT schemas <ulink
 url="http://viewcvs.globus.org/viewcvs.cgi/ws-transfer/reliable/common/schema/transfer/reliable/">here.</ulink>
</para>
</section>


