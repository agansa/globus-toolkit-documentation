 <title>GT 4.0 GridFTP : User's Guide</title>
<titleabbrev>User's Guide </titleabbrev>

<section id="s-gridftp-user-introduction"><title>Introduction</title>
<para>The GridFTP User's Guide provides general end user-oriented information.</para>
</section>

<section id="s-gridftp-user-quickstart">
<title>GridFTP quick start</title>
 
 <section id="s-gridftp-user-basic">
  <title>Basic command line</title>
  <para> For those of you who don‚Äôt want the details, but just want the ‚Äúrules of thumb‚Äù on how to get started, the following options will 
   normally give acceptable performance.</para>
  
  <screen>globus-url-copy ‚Äìvb ‚Äìtcp-bs 2097152 ‚Äìp 4 <replaceable>source_url</replaceable> <replaceable>destination_url</replaceable></screen>
  
  <para>The source/destination URLs will normally be one of the following:</para>
  
  <itemizedlist>
   <listitem><simpara><replaceable>file:///path/to/my/file</replaceable> if you are accessing a file on a filesystem accessible by the host on which you are running your client.</simpara></listitem>
   <listitem><simpara><replaceable>gsiftp://hostname/path/to/remote/file</replaceable> if you are accessing a file from a GridFTP server.</simpara></listitem>
  </itemizedlist></section>
 
 <section id="s-gridftp-user-putting">
  <title>Putting files</title>
  <para>One of the most basic tasks in GridFTP is to "put" files, i.e., move a file from your filesystem to the server. So for example, if you want to move the file <filename>/tmp/foo</filename> from a filesystem 
   accessible to the host on which you are running your client to a file name <filename>/tmp/bar</filename> on a host named <filename>remote.machine.my.edu</filename> running a GridFTP server, you would use 
   this command:</para>
  <screen>globus-url-copy ‚Äìvb ‚Äìtcp-bs 2097152 ‚Äìp 4 file:///tmp/foo gsiftp://remote.machine.my.edu/tmp/bar</screen>
  
<para><note><simpara>In theory, <filename>remote.machine.my.edu</filename> could 
   be the same host as the one on which you are running your client, but that is normally only done in testing situations. </simpara></note></para>
  
 </section>
 
 <section id="s-gridftp-user-getting"><title>Getting files</title>
  <para>A get, i.e, moving the file from a server to your filesystem would just reverse the source and destination URLs:</para>
  <para><tip><simpara> Remember the <replaceable>file:</replaceable> always refers to your filesystem.</simpara></tip></para>
  
  <screen>globus-url-copy ‚Äìvb ‚Äìtcp-bs 2097152 ‚Äìp 4 gsiftp://remote.machine.my.edu/tmp/bar file:///tmp/foo</screen></section>
 
 <section id="s-gridftp-user-thirdpartytransfers"><title>Third party transfers</title>
  
  <para>Finally, if you want to move a file between two GridFTP servers (a third party transfer), both URLs would use <filename>gsiftp:</filename> as the protocol:</para>
  
  <screen>globus-url-copy ‚Äìvb ‚Äìtcp-bs 2097152 ‚Äìp 4 gsiftp://<replaceable>other.machine.my.edu</replaceable>/tmp/foo gsiftp://<replaceable>remote.machine.my.edu</replaceable>/tmp/bar</screen>
 </section>
 
 <section id="s-gridftp-user-forinfo"><title>For more information</title>
  <para>If you want more information, details on URLs and the options are [refer to commandline frag], and the [key concepts guide] gives basic definitions 
   and an overview of the GridFTP protocol as well as our implementation of it.</para>
 </section>
 
</section>

<section id="s-gridftp-user-commandline"><title>Command-line tools</title>
<para><xref linkend="r-gridftp-reference"/></para>
</section>

<section id="s-gridftp-user-gui"><title>Graphical user interfaces</title>
&GridFTP_Interface_GUI_Frag;
</section>

<section id="s-gridftp-user-troubleshooting"><title>Troubleshooting</title>
<para>If you are having problems using the GridFTP server, try the steps listed below.  If you have an error, try checking the server logs if you access to them.  By default, the server logs to stderr, unless it is running from inetd, or its execution mode is detached, in which case logging is disabled by default.  The command line options -d , -log-level, -L and -logdir can affect where logs will be written, as can the configuration file options log_single and log_unique.  See the http://www-unix.globus.org/toolkit/docs/development/4.0-drafts/data/gridftp/GridFTP_Public_Interfaces.html#s-gridftp-Public_Interfaces-config
for more information on these and other configuration options.</para>
<para>Verify that you can establish a control channel connection and that the server has started successfully by doing  a telnet to the port on which the server is running: </para>
<screen>% telnet localhost 2811
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
220 GridFTP Server mldev.mcs.anl.gov 2.0 (gcc32dbg, 1113865414-1) ready.</screen>
<para>If you see anything other than a 220 banner such as that, then the server has not started correctly.</para>
<para>Verify that there are no configuration files being unexpectedly loaded from /etc/grid-security/gridftp.conf or $GLOBUS_LOCATION/etc/gridftp.conf.  If those files exist, and you did not intend for them to be used, rename them to .save, or specify ë-c noneí on the command line and try again.</para>
<para>If you can log into the machine where the server is, try running the server from the command line with only the -s : </para>
<para>$GLOBUS_LOCATION/sbin/globus-gridftp-server -s</para>
<para>the server will print the port it is listening on: </para>
<para>Server listening at gridftp.mcs.anl.gov:57764</para>
<para>now try and telnet to that port.  If you still do not get the banner listed above, something is preventing the socket connection.  Check firewalls, tcp-wrapper, etc..</para>
<para>If you now get a correct banner, add -p 2811 (you will have to disable (x)inetd on port 2811 if you are using them or you will get port already in use):</para>
<para>$GLOBUS_LOCATION/sbin/globus-gridftp-server -s -p 2811</para>
<para>Now telnet to port 2811.  If this does not work, something is blocking port 2811, check firewalls, tcp-wrapper, etc..</para>
<para>If this works correctly then re-enable your normal server, but remove all options but -i, -s, or -S.</para>
<para>Now telnet to port 2811.  If this does not work, something is wrong with your service configuration check /etc/services, (x)inetd config, (x)inetd restarted, etc..</para>
<para>If this works, begin adding options back one at a time, verifying that you can telnet to the server after each option is added.  Continue this till you find the problem or get all the options you want. </para>
<para>At this point, you can establish a control connection.  Now try running globus-url-copy:</para>
<para>If doing a client/server transfer (one of your URLs has file: in it) the try:</para>
<para>globus-url-copy -vb -dbg gsiftp://host.server,running.on/dev/zero file:///dev/null</para>
<para>this will run until you control-c the transfer.  If that works, reverse the direction:</para>
<para>globus-url-copy -vb -dbg file:///dev/zero gsiftp://host.server.running.on/dev/null</para>
<para>again, this will run until you control-c the transfer.</para>
<para>If you are doing a third party transfer run this command:</para>
<para>globus-url-copy -vb -dbg gsiftp://host.server1.on/dev/zero gsiftp://host.server2.on/dev/null</para>
<para>again, this will run until you control-c the transfer.</para>
<para>If the above transfers work, try your transfer again.  If it fails, you likely have some sort of file permissions, typo in a file name, etc..</para>
<para>If the server has started correctly, and your problem is with a security failure or gridmap lookup failure, verify that you have security configured properly here.</para>
<para>If the server is running and your client successfully authenticates, but has a problem at some other time during the session, please ask for help on discuss@globus.org.  When you send mail or submit bugs, please always include as much of the following information as possible:</para>
<para>specs on all hosts involved (OS, processor, RAM, etc)
globus-url-copy -version 
globus-url-copy -versions
output from: telnet <server  host> <server port>
the actual command line you ran with -dbg added.  Donít worry if the output gets long.
check that you are getting a FQDN and /etc/hosts is sane.
The server configuration and setup (/etc/services entries, (x)inetd configs, etc.)
Any relevant lines from the server logs (not the entire log please)</para>

</section>


<section id="s-gridftp-user-usage"><title>Usage statistics collection by the Globus Alliance </title>
&GridFTP_Usage_Statistics_Frag;
</section>


