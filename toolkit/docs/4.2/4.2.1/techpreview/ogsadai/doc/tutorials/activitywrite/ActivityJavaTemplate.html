
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- &copy; International Business Machines Corporation, 2004 -->
<!-- &copy; The University of Edinburgh, 2004 -->
<head>
<title>Declaring Activities Using XML Schema</title>
<link rel="stylesheet" type="text/css" href="../../style.css"/>
</head>
<body>

<h1>Declaring Activities Using XML Schema</h1>

<p>
	An XML-Schema document must be provided to describe the interface to
	each activity. The schema documents for all of the activities
	supported by an OGSA-DAI service are then combined to form the
	complete XML-Schema for a perform document. This dynamically generated
	schema is then used to validate the perform documents received by
	OGSA-DAI services, before fragments of the perform documents are
	passed to the constructors of the corresponding activity implementation
	classes.
</p>

<p>
In order to construct an activity you must provide an XML Schema
describing your  activity. If you are going to define your own
activities it is best, for the time being, if any activity XML Schema
you define also live in the same namespace as those of current
OGSA-DAI activities. The XML Schema is used to validate the <span
class="java">Element</span> object passed into the constructor of the
Java class which provides the implementation of the activity.
</p>
<p>
In general, the more explicit the XML Schema is about the activity
structure the less processing the activity will have to do to ensure
the XML describing the activity is syntactically correct and to
extract information from the set of XML elements defining the
activity. An activity can assume that the <span
class="java">Element</span> it is passed will conform to the XML
Schema it provides (full XML Schema validation is always done on
Perform documents).
</p>
<p>
There are only two restrictions imposed on the XML Schema for an
activity by OGSA-DAI. These are:
</p>
<ol>
<li>
The type of the activity must extend the XML <span
class="xml">ActivityType</span> declared in <a
href="../../../schema/ogsadai/types/data_service_types.xsd"><span
class="commandline">OGSA-DAI/schema/ogsadai/types/data_service_types.xsd</span></a>.
</li>
<li>
There must only be one <span class="xml">xsd:element</span> defined in
the XML Schema and that must specify the type declaration that defines
the structure of the activity.
</li>
</ol>
<p>
While these are the only two absolute restrictions there are some
suggested practices that should be followed unless there is a
compelling reason to do otherwise:
</p>
<ul>
<li>
When declaring inputs and outputs within an XML Schema, the types
<span class="xml">ActivityInputType</span> and <span
class="xml">ActivityOutputType</span>, or extensions of said types,
should be used. If an activity does not use these types then the
inputs and outputs cannot be extracted by the activity engine 
<span
class="important">must</span> be published 
by the activity prior to the
constructor completing.
</li>
<li>
No global types other than that of the activity should be
declared. Any custom types used within the type of the activity should
be declared in-line.
</li>
<li>
The type name for the activity should reflect the use of the activity
and also be unique.
</li>
</ul>
<p>
The last two points are an attempt to avoid type clashes when
constructing the final XML Schema used by a specific OGSA-DAI service
to validate Perform documents.
</p>
<hr/>
<table width="100%" summary="Navigation" class="footer">
<tr>
<td class="footer">Back: <a href="index.html">How Activities Work</a></td>
<td class="footer">Up: <a href="index.html">How Activities Work</a></td>
<td class="footer">Next: <a href="ActivityEngine.html">Executing Activities in the Engine</a></td>
</tr>
<tr>
<td>
&copy; International Business Machines Corporation, 2004.
</td>
<td>
&copy; The University of Edinburgh, 2004.
</td>
<td/>
</tr>
</table>
</body>
</html>



