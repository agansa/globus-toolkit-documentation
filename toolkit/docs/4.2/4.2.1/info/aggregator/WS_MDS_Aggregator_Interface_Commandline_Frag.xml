<refentry id="mds-servicegroup-add">
<refmeta>
<refentrytitle>mds-servicegroup-add</refentrytitle>
 <manvolnum>1</manvolnum>
 </refmeta>
 <refnamediv>
 <refname>mds-servicegroup-add</refname>
 <refpurpose>Registering grid resources to MDS services
 such as the index and trigger services</refpurpose>
 </refnamediv>
 <refsynopsisdiv><cmdsynopsis>
 <command>mds-servicegroup-add</command>
 </cmdsynopsis>
 </refsynopsisdiv>
 <refsect1><title>Tool description</title>
 <para><command>mds-servicegroup-add</command> creates a set of registrations to a
WS-ServiceGroup and periodically renews those registrations. It is
intended primarily for registering grid resources to MDS services
    such as the index and trigger services. [todo: where do aggregator sources fit into this definition?]</para>
    <para>Registrations are defined in an XML configuration file, which is documented in [add new links].</para>
 </refsect1>
 
 <refsect1><title>Command syntax</title>
 <para>The basic syntax for <command>mds-servicegroup-add</command> is: 
 <screen>mds-servicegroup-add -s http://foo [options] <emphasis>config.xml</emphasis></screen>
 where:</para>
 
 <informaltable>
 <tgroup cols="2"><tbody>
 <row>
 <entry>-s http://foo</entry>
     <entry>This dummy option is required but ignored.     A URL to the service group against which the mds-servicegroup-add request will be executed. This command line argument is a required argument, 
         however it is only necessary that this URL argument evaluate to a valid EPR in the case that there are no suitable target service group EPRs present 
         in the <ulink url="http://www.globus.org/toolkit/docs/4.0/info/aggregator/WS_MDS_Aggregator_Sources_Reference.html#aggregator-execution_aggregator_source-config-registration">configuration file</ulink>. 
         Any end point references found in the configuration file will automatically override the EPR specified on the command-line.</entry>
 </row>
    
     <row>
         <entry>-a</entry>
         <entry><para>By default, <command>mds-servicegroup-add</command> will attempt to
             make an authenticated connection to each service group. This option
             is used to specify anonymous connections (and to prevent
             <command>mds-servicegroup-add</command> from failing if you don't have a
             valid Grid credential).</para>
         </entry>
     </row>
    
 <row>
     <entry>-z auth_type</entry>
     <entry><para>Specify an authorization type: </para>
         <variablelist>
             <varlistentry>
                 <term><constant>self</constant></term>
                 <listitem><para>Fail if the server's identity is different from the user's identity. </para></listitem>
             </varlistentry>
             <varlistentry>
                 <term><constant>host</constant></term>
                 <listitem><para>Fail if the server does not have a valid server certificate.</para></listitem>
             </varlistentry>
             <varlistentry>
                 <term><constant>none</constant></term>
                 <listitem><para>Continue regardless of the server's identity.</para></listitem>
             </varlistentry>
          </variablelist>
     
     </entry>
 </row>
     <row>
         <entry>config.xml</entry>
     <entry><para> Path to the <ulink url="http://www.globus.org/toolkit/docs/4.0/info/aggregator/WS_MDS_Aggregator_Sources_Reference.html#aggregator-execution_aggregator_source-config-registration">registration configuration file</ulink>.</para>
         <para>The Globus Toolkit distribution includes an example configuration file: <filename>$GLOBUS_LOCATION/etc/globus_wsrf_mds_aggregator/example-aggregator-registration.xml</filename>.</para>
     </entry>
 </row>
 </tbody></tgroup>
 </informaltable>
 
     <para>The other standard toolkit options [TODO -- link to standard options page] are also supported.</para>
 </refsect1>
    
    <refsect1><title>Simple usage for the Index Service </title>
        <para>The simplest way to register services to an index is to:</para>
            
          <orderedlist>  
          <listitem>Edit the example configuration file (<filename>$GLOBUS_LOCATION/etc/globus_wsrf_mds_aggregator/example-aggregator-registration.xml</filename>), replacing the EPRs in that file with the EPRs for your resources</listitem>
          <listitem>Run <command>mds-servicegroup-add</command> to perform the registrations specified in that file.</listitem>
          </orderedlist>
        
        <para>For example, to register to the DefaultIndexService with a modified <filename>example-aggregator-registration.xml</filename> file, you
            could run a command similar to the following:</para>
        <screen>
            $GLOBUS_LOCATION/bin/mds-servicegroup-add -s \
            https://127.0.0.1:8443/wsrf/services/DefaultIndexService \
            $GLOBUS_LOCATION/etc/globus_wsrf_mds_aggregator/example-aggregator-registration.xml
        </screen>
        </refsect1>
    
    
    <refsect1><title>Limitations</title>
        <para>It is necessary for the tool to continue to run in order for the registrations that it maintains to be kept alive, as registrations
            will otherwise time out.</para>
    </refsect1>
    </refentry>