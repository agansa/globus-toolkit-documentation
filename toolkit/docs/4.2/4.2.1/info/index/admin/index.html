<?php
include_once( "http://www-unix.globus.org/toolkit/docs/development/4.0-drafts/draft.inc" );
?>

<h1>GT 4.0 WS MDS Index Service : System Administrator's Guide</h1>
<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li> <a href="#installing">Building and Installing</a></li>
  <li><a href="#configuring">Configuring</a></li>
  <li><a href="#deploying">Deploying</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<h2><a name="introduction"></a>Introduction</h2>
<p>The Index Service collects information from services and resources 
(member services) in a virtual organisation, and publishes that 
information in a centrally accessible place.</p>


<h2><a name="installing"></a>Building and Installing</h2>
<p><font color="purple">[information about installing the component - may link
    to Installation Guide]</font></p>

<h2><a name="configuring"></a>Configuring </h2>
<p>Information on configuration settings and environment variables can be found
   in the <a href="../WS_MDS_Index_Public_Interfaces.html">public interface 
   guide</a>.</p>

<p>For a basic installation, the index service itself does not need any
   configuration changes from default.</p>

<p>In order for member services to appear in the index, they must be
   registered using the 
   <a href="../../aggregator/admin/#configuring">mds-servicegroup-add</a> tool. 
   This tool should be run as a daemon to maintain registrations. Depending 
   on administration preference, it may be run on the same host as the index,
   on the same host as a member resource, or on any other host(s).</p>

<p>The aggregation source used to collect data can be changed from default, as
   detailed in the <a href="#sourcechange">Changing Aggregator Source</a> 
   section.</p>


<h2><a name="deploying"></a>Deploying</h2>
<p><font color="purple">[information about deploying the component into various
   containers/environments] </font></p>
<h2><a name="testing"></a>Testing</h2>
<p><font color="purple">[procedures for how to test the configuration. must include
    examples of the tests ]</font></p>

<p>The entire content of the default index service in a deployment can
   be seen by executing the following command, which will dump the
   entire RP set of the service:
</p>

<p>
   <code>
      wsrf-query -s http://127.0.0.1:8080/wsrf/services/DefaultIndexService  /
   </code>
</p>

<h2><a name="troubleshooting"></a>Troubleshooting</h2>
<p><font color="purple">[help for common problems sysadmins may experience] </font></p>
<p>&nbsp;</p>
<ul>
  <li></li>
</ul>


<h2><a name="sourcechange" />Changing the Aggregator Source</h2>

<p>The aggregation source used to collect data can be changed from default
   by editing the aggregatorSource parameter in the index configuration
   in <code>$GLOBUS_LOCATION/etc/globus_wsrf_mds_index/jndi-config.xml</code>:
   </p>
<pre>
  &lt;resource name="configuration"
               type="org.globus.mds.index.impl.IndexConfiguration"&gt;
    &lt;resourceParams&gt;
      &lt;parameter&gt;
        &lt;name&gt; factory&lt;/name&gt;
        &lt;value&gt;org.globus.wsrf.jndi.BeanFactory&lt;/value&gt;
      &lt;/parameter&gt;
      &lt;parameter&gt;
        &lt;name&gt;aggregatorSource&lt;/name&gt;
        <b>&lt;value&gt;org.globus.mds.aggregator.impl.QueryAggregatorSource&lt;/value&gt;</b>
      &lt;/parameter&gt;
    &lt;/resourceParams&gt;

</pre>

<p>This parameter specifies a java class that will be used to collect data
   for the index. By default it is set to the QueryAggregatorSource. It can
   be changed to one of the other sources supplied with the toolkit, or to
   one installed later. Details of the supplied sources are in the
   <a href="../../aggregator/developer/#introduction">Aggregator developer
   guide</a>.</p>

