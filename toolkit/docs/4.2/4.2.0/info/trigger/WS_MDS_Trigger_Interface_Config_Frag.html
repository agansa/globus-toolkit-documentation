
<p>The trigger service is an MDS aggregator  service, and so inherits much of
  its configuration system from the aggregator framework module. The <a href="http://www-unix.globus.org/toolkit/docs/development/4.0-drafts/info/aggregator/admin/index.html#configuring">configuration
  instructions for the aggregator framework</a> should be read before this section. </p>
<ul>
  <li><code>TriggerRuleType</code>: In addition to the source parameters specified
    in the aggregator framework configuration guide, this trigger-specific
    configuration element  <strong>must</strong> be added to all registrations
    made to the trigger service. This registration paramete contains the following
    options:
    <ul>
    <li><code>matchingRule</code>: XPath rule to be applied against incoming data.
        The XPath expression will be evaluated against aggregated data, and will
        be regarded as matching the incoming data if it matches one or more nodes
        in that data. </li>
    <li><code>actionScript</code>: the name of a script in <code>$GLOBUS_LOCATION/libexec/trigger/</code> that
        will be executed when the matchingRule matches (except as rate limited
      by the following parameters). </li>
    <li><code>minimumFiringInterval</code>: the action script will not be executed
        more than once in this number of seconds. If unspecified, there will
      be no minimum interval. </li>
    <li><code>minimumMatchTime</code>: the matchingRule must be true for this
      number of seconds before the actionScript will be executed. If unspecified,
      there is no minimum time period that the rule must match and the rule will
      fire immediately the matchingRule becomes true. </li>
    <li><code>outputXSL</code>: (UNIMPLEMENTED in GT 3.9.3). The delivered message
        will be transformed by the specified XSLT stylesheet and fed into the
      stdin of the action script. It is intended that this will be implemented
      in a subsequent release of the GT3.9.x series. </li>
  </ul>
  </li>
</ul>
<p>The rate limiting parameters behave in such a way that the rate of action
  script executions can be <em>decreased</em> by <em>increasing</em> the <code>minimumFiringInterval</code>  and/or by <em>increasing</em> the <code>minimumMatchTime</code>.</p>
<p>A complete and working example of a trigger registration file can be viewed
at <code>$GLOBUS_LOCATION/etc/globus_wsrf_mds_trigger/trigger-aggregator-registration.xml</code></p>
<p>This file causes a small test script to be run when it detects that the GLUE
  RP appears in the DefaultIndexService. (Please refer to the <a href="http://www-unix.globus.org/toolkit/docs/development/4.0-drafts/info/key/gluerp.html">GLUE
  RP documentation</a> for more information about configuring and using
  it). By default, the registration example fires no more than once in every
  10 minute interval. As you can see, that is dictated by the <code>minimumFiringInterval</code>
  value specified. The sample registration also causes the GLUE RP to be polled
  (i.e. updated) every 10 minutes to make sure that the entry is still valid.</p>
<p>Currently, the example trigger registration file will fire on the default
  installation because the MJFS (i.e. GRAM) contains the GLUE RP and the <code>matchingRule</code>  is
  indicated as the XPath indicator for everything (i.e. <em>/*</em>).
  However, you can easily substitute more advanced XPath queries for firing on
  more specific value changes. For example, locating a specific node-set within
  the GLUE RP using XPath can look something like this:</p>
<pre>//*[local-name()='GLUECE']//ns1:ComputingElement//ns1:State</pre>
<p>  Please see the [deployment section]  for the method of registering the
  sample trigger scenario with your globus deployment.<br>
</p>
