<?php

$title = "Core: Developer's Guide";

include_once( "/mcs/www-unix.globus.org/include/globus_header.inc" ); 
?>
<link href="../../../style.css" rel="stylesheet" type="text/css">


<p class="small"><a href="http://www.globus.org">Globus</a> &gt;

<a href="http://www-unix.globus.org/toolkit/">Toolkit</a> &gt;

<a href="http://www-unix.globus.org/toolkit/docs/">Documentation</a> &gt; <a href="../../index.html">3.2</a> &gt; Developer's
Guide
&lt; </p>

<h1>Globus Toolkit 3.2: Developer's Guide </h1>
<p class="small">&lt;links&gt;</p>
<h2>Java Coding Guidelines</h2>
<p>In an attempt to increase code readability and hopefully productivity, the
  Globus Alliance requests that all programmers follow the standard defined below
for programming in Java.</p>
<ul>
  <li><a href="#basecoding">Base coding conventions</a></li>
  <li><a href="#imports">Imports</a></li>
  <li><a href="#indentation">Indentation</a></li>
  <li><a href="#brackets">Brackets</a></li>
  <li><a href="#variables">Variables</a></li>
  <li><a href="#instancevariables">Instance Variables</a></li>
  <li><a href="#oneliners">One-liners</a></li>
  <li><a href="#logging">Logging</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#internationalwhat">Internationalization: What</a></li>
  <li><a href="#internationalhow">Internationalization: How</a> </li>
  <li><a href="#libraryreuse">Library Reuse</a></li>
  <li><a href="#exceptions">Exceptions</a></li>
</ul>
<h3><strong><a name="basecoding"></a>Base coding conventions</strong></h3>
<p>Use the Sun Coding Conventions for the Java Programming Language:</p>
<P><A 
href="http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html" target="_blank">http://java.sun.com/docs/codeconv/html/CodeConvTOC.doc.html</A> </P>
<h3><strong><a name="imports"></a>Imports</strong></h3>
<p>All imports must be single class and explicit; i.e. </p>
<pre class="command">import &lt;package&gt;.* </pre>
<p>is <strong>not</strong> allowed.</p>
<h3><strong><a name="indentation"></a>Indentation</strong></h3>
<p>All indentation levels should be 4 spaces. </p>
<p>No editor tabs are allowed unless they are converted to 4 spaces before saving
  the file.</p>
<h3><a name="brackets"></a>Brackets </h3>
<p>Two models are allowed.</p>
<p><strong>Important:</strong> They must <strong>never</strong> be mixed within
  the same source file  and should <strong>not</strong> be mixed within the same
  package:</p>
<ol>
  <li>Curly brackets <span class="code">{}</span> are put on separate lines.
    E.g. </li>

  <pre class="command">for (index = 0; index &lt; length; index++)
   {
 &nbsp;&nbsp;&nbsp; &lt;code&gt;
 }</pre>

  <li>As defined in the Java Coding guidelines. E.g.</li>

  <pre class="command">for (index = 0; index &lt; length; index++) {
 &nbsp;&nbsp;&nbsp; &lt;code&gt;
 }</pre>
</ol>
<h3><strong><a name="variables"></a>Variables</strong></h3>
<p>No acronyms or abbreviations should be used. E.g.</p>
<pre class="command"> a = b + mVarLen </pre>
<p>should be avoided. </p>
<p>Use this instead:</p>
<pre class="command">totalLength = partLength + newLength</pre>
<h3><a name="instancevariables"></a>Instance Variables</h3>
<p>Use <span class="code"><strong>this.</strong></span> as the prefix when referencing
  instance variables, e.g.:</p>
<pre class="command">public MyClass (ServicePropertiesInterface properties) {
 &nbsp;&nbsp;&nbsp; this.properties = properties;
   }

public int foo () {
&nbsp;&nbsp;&nbsp; int localInt = 3;
&nbsp;&nbsp;&nbsp; return this.instanceInt + localInt;
  }</pre>
<h3><a name="oneliners"></a>One-Liners</h3>
<p>Even single line statements should be inside brackets. E.g.</p>
<pre class="command">if (isEmpty) {
 &nbsp;&nbsp;&nbsp; return;
   }</pre>
<h3><strong><a name="logging"></a>Logging</strong></h3>
<p>The Jakarta Commons API should be used exclusively.</p>
<p>Log4j.properties should be used for configuring logs. </p>
<p>System.out/err.println is <strong>not</strong> allowed.</p>
<h3><strong><a name="testing"></a>Testing</strong></h3>
<p>Each component/class should have a JUnit test.</p>
<p>The tests should be put in the <span class="code">test/</span> directory under each package directory.</p>
<h3><strong><a name="internationalwhat"></a>Internationalization: What</strong></h3>
<p><b>Rule of thumb:</b> All messages exposed to clients should be translatable </p>
<p><b>Errors:</b> All error message strings exposed to clients should be translatable. </p>
<p><b>Logging:</b> All log messages with filter ERROR or WARNING should be translatable.
  All other log messages such as TRACE and DEBUG <b>should not</b> be translatable </p>
<p><b>Samples/Tests:</b> Messages in samples and tests <b>should not</b> be translatable.&nbsp; </p>
<p><b>Experimental/Prototype code:</b> nono </p>
<h3><strong><a name="internationalhow"></a>Internationalization: How</strong></h3>
<p><strong>Option 1:</strong></p>
<ul>
  <li>Provide a resource bundle class that contains your translated messages.
    <br>
    <br>
    See <code>org.globus.ogsa.guide.impl.Resources.java</code> <br>
  </li>
  <li>Provide a mapping of a component name to the class name with the translated
    messages in a bundle.properties file. <br>
  </li>
  <li>When getting a translated message use: <code>org.globus.ogsa.utils.MessageUtils.getMessage(&lt;component&gt;, &lt;message
      key&gt;)</code>. <br>
      <br>
    See <code>org.globus.ogsa.guide.impl.CounterClient.java</code> </li>
</ul>
<p><strong>Option 2: </strong></p>
<ul>
  <li>Use the <a 
    href="http://www-unix.mcs.anl.gov/~gawor/jglobus-nightly/doc/org/globus/util/I18n.html">I18n</a> class
    from the Java CoG Kit. </li>
</ul>
<p>You may use the <a 
href="http://java.sun.com/products/jilkit/">Java I18n/L10n Toolkit</a> to verify
  whether code is international.
</p>
<h3><strong><a name="libraryreuse"></a>Library Reuse</strong></h3>
<p>Treat all code as a library, and as a reusable component. </p>
<p>Calls to System.exit() are <strong>not</strong> allowed (except the main method.)</p>
<h3><strong><a name="exceptions"></a>Exceptions</strong></h3>
<p>For local exceptions inherit from <code>org.globus.ogsa.GridServiceException</code>. </p>
<p>If the exceptions should be exposed to remote clients, define
  it in WSDL and extend the GridServiceFault defined in <code>schema/core/faults/grid_service_fault.wsdl</code>. </p>
<p class=MsoNormal>Even though your WSDL operations don't throw any interface-specific
  exception, declare them to throw <code>GridServiceFault</code>.</p>
<p>&nbsp;</p>
<BR>
<?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>
