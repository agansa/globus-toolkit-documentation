<head><title>GT3 Index Service: Developer's Guide</title>
<link href="../../../../../../../CSS/style.css" rel="stylesheet" type="text/css">
</head>
<?php include( "http://www-unix.globus.org/include/globus_header.inc" ); ?>

<p class="small"><a href="http://www.globus.org">Globus</a> &gt;
<a href="http://www-unix.globus.org/toolkit/">Toolkit</a> &gt;
<a href="http://www-unix.globus.org/toolkit/documentation/web/docs/">Documentation</a> &gt;
<a href="http://www-unix.globus.org/toolkit/documentation/web/docs/3.2/">3.2</a> &gt; 
<a href="http://www-unix.globus.org/toolkit/documentation/web/docs/3.2/mds/">GT3
Index Service</a> &gt; 
Developer's Guide &lt;</p>
<h1>GT3 Index Service : Developer's Guide</h1>
<p class="small"> &gt;top links<br>
</p>
<h1>GT3 Service Data Browser</h1>
<p>The Service
  Data Browser is the graphical user interface to service data within
  the Globus Toolkit &reg; Version 3.0.&nbsp; The Service Data Browser allows
  you to view the details of the Grid services available to you from a Registry
  configured by your administrator.&nbsp; Service data can be viewed in various
formats, depending on your requirements. </p>
<p>This document assumes that the Globus Toolkit 3.0 has been installed and configured
  for your particular computing environment, and that the Service Data Browser
  has been appropriately configured as well, as described in <em><a href="sbrowserconfig.html">GT3
Service Data Browser Configuration </a></em>. </p>
<p>All Grid services expose service data.&nbsp; The Open Grid Services Architecture
  (OGSA) standard protocol and standard service data interface used by the Browser
  make it easy to display the service data and Web Services Description Language
  (WSDL) of any Grid service. When the Browser starts, and periodically through
  subscription/notification, it obtains a list of existing services from the
  Registry.  The Browser
allows the user to bind any frame to the service data of any known service. </p>
<h1>Starting the Service Data Browser </h1>
<table width="650" border="0" cellpadding="5">
  <tr>
    <td colspan="2" valign="top"><div align="center" class="box-header">Requirements</div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top"><ul>
        <li><a href="install_installing.html">GT3 Core distribution</a>
        <li><a href="install_support.html#database">A</a>        
    </ul></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Starting
        the Service Data Browser </div></td>
  </tr>
  <tr>
    <td width="40" valign="top"><a name="step1">1</a></td>
    <td width="578" valign="top"><p>To start the Service Data Browser, enter
        the following command at the system prompt from within the bin directory
        in your GT3 installation directory: </p>
      <p class="command">globus-sdb </p>
      <p>This starts the Service Data Browser and connects to the Registry specified
        in the Service Data Browser configuration file (<code>globus-sdb.conf</code>, described
        in <em><a href="sbrowserconfig.html">GT3
      Service Data Browser Configuration </a></em>). </p>
      <p>The Service Data Browser window then opens as follows : </p>
      <p>[image]</p>
      <p>The initial service list displayed inside the <em>Browser</em> frame (and any
        ensuing frames you might open from <em>New Frame</em> on the <em>File</em> menu) allows
        you to select any of the Grid services located in the configured Registry
        service.&nbsp; When you select a service from a frame, you are connecting
        the frame to that service.&nbsp; Once a frame is connected to a service
        instance, the name of the frame will change to reflect that service.&nbsp; </p></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Using
        the Service Data Browser </div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top"><p>The <em>Select a service…</em> pull-down
        menu in a <em>Browser</em> frame displays all of the Grid services available
        to you from the configured Registry.&nbsp; </p>    </td>
  </tr>
  <tr>
    <td valign="top">1</td>
    <td valign="top"><p>Scroll down the <em>Select a Service...</em> drop
        down menu to select a service. </p>
      <p>The <em>Known Visualizers</em> window appears. </p>    </td>
  </tr>
  <tr>
    <td colspan="2" valign="top">A <strong>visualizer</strong> uses an open API
      that allows you to display service data in any desired way, such as graphically
      as the data changes.&nbsp; The Visualizer determines the type, amount,
      and format of the data displayed.&nbsp; The <em>Known
      Visualizers</em> menu allows
    you to choose a defined Visualizer to view the service. </td>
  </tr>
  <tr>
    <td valign="top">2</td>
    <td valign="top"><p>Scroll down the <em>Known Visualizers</em>        pull-down menu to select a visualizer. </p>
      <p>The Service Data Browser provides four default Visualizers:</p>
      <table width="650" border="1" cellpadding="5">
        <tr>
          <td width="121" valign="top"><em>Raw Service Data</em></td>
          <td width="497" valign="top"><p>Displays all of the XML details
              for the selected service instance.&nbsp; This data can be used
          as desired for developing other Visualizers.</p>          </td>
        </tr>
        <tr>
          <td valign="top"><em>Tree Service Data</em></td>
          <td valign="top"><p>Displays the data in a hierarchical
              representation that can be expanded or collapsed.&nbsp; This Visualizer
          displays only the name on the top level of the service data. </p>          </td>
        </tr>
        <tr>
          <td valign="top"><em>Raw WSDL</em></td>
          <td valign="top"><p>Displays the WSDL of the selected service
              instance – definitions, bindings, port types, handles, and so forth.&nbsp; This
              data can be used by other programs (like a GT3 component or any
              user-developed software) to access the functions of this service
          instance. </p>          </td>
        </tr>
        <tr>
          <td valign="top"><em>Tree WSDL</em></td>
          <td valign="top"><p>Displays a hierarchical representation
              of the raw WSDL data.&nbsp; The view can be expanded or collapsed
              by clicking on the items in the tree. </p>            </td>
        </tr>
      </table>      <p>All of these Visualizers are generic; that is, they will
        work for all services.&nbsp; As described in <a href="http://www.globus.org/ogsa/releases/final/docs/infosvcs/sdbconfig.html"><em>GT3 </em><em>Service
        Data Browser Configuration </em></a>, you can create and add your own
    Visualizers for specific service data.</p>
    <p><strong>Note:</strong> Once you open a visualizer, you can keep the view available and
      return to the Known Visualizers menu, click on the empty box to the right
      of the visualizer's tab to select it. To
        close this view and return to the Known Visualizers menu, click on the “x” to
    the right of the tab to deselect.</p>    </td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center"><a name="addingvisualizer">Adding
    a Visualizer</a></div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top">To add an existing Visualizer to the Browser,
    do the following: </td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top"><p>Add a line
        in the <code>globus-sdb.visualizers</code> file in <code>GLOBUS_LOCATION/etc</code> to
        indicate the path and name of your Visualizer.&nbsp; </p>
      <p>For example, adding the following line: </p>      <p class="code">org.globus.ogsa.gui.servicedatabrowser.visualizers.ShakeTableVisualizer,
        Shake Table Visualizer </p>
      <p>...will cause <em>Shake Table Visualizer</em> to be added to the <em>Known
        Visualizers</em> pull-down menu of the Service Data Browser. <br>
    </p></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Creating
    a Visualizer</div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top">To create a new Visualizer for your service
    data, do the following:</td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top"><p>Decide what service data you want the Visualizer to display
        and how you want it displayed.&nbsp; </p> </td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top">Create a class that extends the Visualizer class. The
    Visualizer class is defined in the <code>Visualizer.java</code> file in <code>/ogsa/gui/servicedatabrowser/visualizers</code>. </td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top"><p>Include it in the
        Service Data Browser by adding a line to the <code>globus-sdb.visualizers</code> file
    as described above in <a href="#addingvisualizer"><em>Adding a Visualizer</em></a>. </p>
    <p>See the <a href="#visualizercode">example</a> below. </p></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Changing
        the Display Options </div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top"><p>The Service Data Browser allows you to vary
    the appearance and display order of your frames. </p></td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top">To change appearance, select Set Look And Feel from the
      Tools menu.&nbsp; This gives you three appearance options: Windows, Metal,
      and Motif.&nbsp; Metal is the option used for the examples in this document
    and is the default.</td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top"><p>To change the arrangement of the frames on the screen,
        select one of the options on the Windows menu: Tile Horizontally, Tile
    Vertically, or Cascade. </p></td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top"><p>To see the version of the Service Data Browser, select
        About from the Help menu. <br>
    </p></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Exiting
    the Service Data Browser </div></td>
  </tr>
  <tr>
    <td valign="top">&nbsp;</td>
    <td valign="top">When you have completed your Browser session, click on <em>Exit</em>      from the <em>File</em> menu.</td>
  </tr>
</table>
<h3><a name="visualizercode">Visualizer Example </a></h3>
<p>The following is the code for the Tree Service Data
  Visualizer, one of the default Visualizers:</p>
<pre class="command">package org.globus.ogsa.gui.servicedatabrowser.visualizers;

import java.awt.Component; 

import java.net.URL; 

import javax.swing.JTextArea; 

   import javax.swing.JScrollPane; 
   
   import javax.swing.JOptionPane; 
   
import javax.xml.namespace.QName;

import org.apache.axis.utils.XMLUtils; 

   import org.w3c.dom.Element; 
   
   import org.w3c.dom.Document; 
   
import com.ibm.wsdl.util.xml.DOM2Writer;

import org.globus.ogsa.gui.XMLTree; 

   import org.globus.ogsa.gui.XMLTreeModel; 
   
   import org.globus.ogsa.ExtensibilityMapping; 
   
   //import org.globus.ogsa.impl.core.service.GridServiceLocator; 
   
   import org.gridforum.ogsa.GridServiceGridLocator; 
   
   import org.globus.ogsa.impl.core.service.QueryHelper; 
   
   import org.gridforum.ogsa.GridServicePortType; 
   
   //import org.gridforum.ogsa.ServiceDataNameSetType; 
   
   import org.gridforum.ogsa.ServiceDataType; 
   
   import org.gridforum.ogsa.ExtensibilityType; 
   
public class TreeServiceDataVisualizer extends Visualizer { 

    public Component display (URL url) { 
    String xmlDoc = ""; 
    XMLTree serviceDataTree = new XMLTree(XMLUtils.newDocument());
	
   try { 
        GridServiceGridLocator gsl = new GridServiceGridLocator(); 
        GridServicePortType gspt = gsl.getGridServicePort(url); 

       QName qname = new QName("ServiceDataNames"); 
       ExtensibilityType queryResult = gspt.findServiceData(QueryHelper.getNameQuery(qname)); 
       ServiceDataType sdres = (ServiceDataType)queryResult.getAny(); 
      //ServiceDataNameSetType sdset = (ServiceDataNameSetType)sdres.getAny(); 
 
      //QName[] names = sdset.getServiceDataName(); 
      // names[i].getLocalPart() gets name of service data 
      
	  Object[]   objArrayOfNames = sdres.getAny(); 
     
      //QName[] names = sdset.getServiceDataName(); 
        QName[] names = new QName[objArrayOfNames.length]; 
     for (int i=0; i &lt; objArrayOfNames.length; i++) { 
           names[i] = (QName)objArrayOfNames[i]; 
          } 
		  
        Document doc = XMLUtils.newDocument(); 
        Element elResult = doc.createElementNS("ns2", "serviceData"); 
        for(int i=0; i&lt;names.length;i++) { 
       GridServiceGridLocator gsl2 = new GridServiceGridLocator();
	   
       gsl2.registerExtensibilityMapping(ExtensibilityMapping.ELEMENT_RESPONSE); 
     //gsl2.registerAnyElementReturnMapping(); 
     GridServicePortType gsp2 = gsl2.getGridServicePort(url); 
     ExtensibilityType queryResult2 = gsp2.findServiceData(QueryHelper.getNameQuery(names[i])); 
    org.w3c.dom.Node n = doc.importNode((Element)queryResult2.getAny(), true); 
    elResult.appendChild(n); 
     } 
     serviceDataTree.setModel(new XMLTreeModel(elResult)); 
   } 
   catch (Exception e) { 
       System.out.println ("Exception: " + e.getMessage()); 
       e.printStackTrace(); 
       return null; 
   } 
   
   return (new JScrollPane(serviceDataTree)); 
   } 
   
     public String getTitle() { 
     return "Tree Service Data"; 
    } 
} </pre>
<p>
  <?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>
</p>
