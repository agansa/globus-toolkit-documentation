
<?php include( "http://www-unix.globus.org/include/globus_header.inc" ); ?>
<link href="../../../../../CSS/style.css" rel="stylesheet" type="text/css">


<title>Globus Toolkit 3.2: Installation Guide</title>
<p class="small"><a href="http://www.globus.org">Globus</a> &gt;
<a href="http://www-unix.globus.org/toolkit/">Toolkit</a> &gt;
<a href="http://www-unix.globus.org/toolkit/docs/">Documentation</a> &gt;
<a href="http://www-unix.globus.org/toolkit/documentation/web/docs/3.2/">3.2</a> 
&gt; Installation Guide &lt; </p>

		
<h1>Globus Toolkit 3.2: Installation Guide</h1>
<p class="small"><a href="index.html">Overview</a><br>
    <a href="install_before.html">Before You Begin</a><br>
    <a href="install_support.html">Support Software</a><br>
    <a href="install_installing.html">Installing GT 3.2</a><br>
    <a href="install_config.html">Configuring</a> &gt; GridFTP &lt;<br>
    <a href="install_test.html">Testing</a><br>
    <a href="install_trouble.html">Troubleshooting</a></p>
<h2>Configuring GridFTP - Basic </h2>
<p>Intro paragraph </p>
<table width="650" border="0" cellpadding="5">
  <tr>
    <td colspan="2" valign="top"><div align="center" class="box-header">Requirements</div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top"><p>Before you can configure a GridFTP server, you must have:</p>
      <ul>
        <li> a host certificate</li>
        <li> appropriate users in the gridmapfile</li>
        <li>          a valid proxy (<code>grid-proxy-init</code>) if you want to test your
          configuration </li>
      </ul>
    </td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Configure GridFTP server daemon </div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top">In order to use GridFTP, you need to configure your machine to automatically start the GridFTP server daemon.</td>
  </tr>
  <tr>
    <td width="40" valign="top"><a name="step1">1</a></td>
    <td width="578" valign="top"><p>As root, add the following entry to <code>/etc/services</code>:</p>
      <p class="command"> gsiftp 2811/tcp</p></td>
  </tr>
  <tr>
    <td colspan="2" valign="top"><div align="center" class="box-header">Configure Inetd/Xinetd </div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top">Modify the configuration file for Inetd or Xinetd (depending on which your host is running):</td>
  </tr>
  <tr>
    <td valign="top"><a name="step2">2</a></td>
    <td valign="top"><p><b>For Inetd</b>, open <code>/etc/inetd.conf</code> and add the following entry.</p>
      <p class="command"> gsiftp&nbsp; stream&nbsp; tcp&nbsp;&nbsp;&nbsp;&nbsp; nowait&nbsp; root /usr/bin/env env LD_LIBRARY_PATH=GLOBUS_LOCATION/lib GLOBUS_LOCATION/sbin/in.ftpd -l -a -G GLOBUS_LOCATION</p>
      <p> Enter the entire string in one line (disregard the word wrapping above). Be sure to replace <font face="Courier New">GLOBUS_LOCATION</font> with the actual value of <font face="Courier New">$GLOBUS_LOCATION</font> in your environment.</p>
      <p> <b>For Xinetd</b>, add a file called <font face="Courier New">grid-ftp</font> to the <font face="Courier New">/etc/xinetd.d/</font> directory with the following contents:</p>
      <pre class="command">
		service gsiftp
		 { 
		      instances       = 1000 
		      socket_type     = stream 
		      wait            = no 
		      user            = root 
		      env             = LD_LIBRARY_PATH=GLOBUS_LOCATION/lib 
		      server          = GLOBUS_LOCATION/sbin/in.ftpd 
		      server_args     = -l -a -G GLOBUS_LOCATION 
		      log_on_success += DURATION USERID 
		      log_on_failure += USERID 
		      nice            = 10 
		      disable         = no 
		  }</pre>    <p>Be sure to replace <font face="Courier New">GLOBUS_LOCATION</font> with the actual value of <font face="Courier New">$GLOBUS_LOCATION</font> in your environment.</p></td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Notify Inetd/Xinetd</div></td>
  </tr>
  <tr>
    <td valign="top"><a name="step3">3</a></td>
    <td valign="top"><p> Notify Inetd or Xinetd that its configuration file has changed. To do this, follow the instructions for the server as listed in the manual (<kbd>man inetd</kbd> or <kbd>man xinetd</kbd>). </p>    </td>
  </tr>
  <tr>
    <td colspan="2" valign="top" class="box-header"><div align="center">Testing GridFTP</div></td>
  </tr>
  <tr>
    <td colspan="2" valign="top"><p>Testing GridFTP consists of:</p>
      <ul>
	<li><font color="#FF00FF">I dislike this test.  I will replace it with one that
		tests the system-level server, not a personal version</font>
        <li> starting a GridFTP server running under the permissions of your user certificate (steps 4-6) </li>
        <li> moving a test file (step 7) </li>
    </ul></td>
  </tr>
  <tr>
    <td valign="top"><a name="step4">4</a></td>
    <td valign="top">Create a proxy certificate: 
      <pre class="command">     % grid-proxy-init -verify -debug</pre>      </td>
  </tr>
  <tr>
    <td valign="top"><a name="step5">5</a></td>
    <td valign="top"><p>Start the GridFTP server as yourself: </p>
      <pre class="command">     % $GLOBUS_LOCATION/sbin/in.ftpd -S -p 5678</pre>
    <p>The <code>-S</code> flag leaves the daemon in the background and the <code>-p</code> flag specifies the port. If that port is already in use, you  try another one.</p></td>
  </tr>
  <tr>
    <td valign="top"><a name="step6">6</a></td>
    <td valign="top"><p>Create <code>~/.gridmap</code>, and add an entry with your subject (which was output by <a href="#step4">step 4</a>) and username: </p>
      <p class="command">&nbsp;&nbsp;&nbsp; &quot;/O=Grid/O=Globus/OU=your.domain/CN=Your Name&quot;&nbsp;&nbsp;&nbsp; your-account </p>      
    <p><strong>Note:</strong> In the future, you will <strong>not</strong> be starting the<code> in.ftpd</code> daemon by hand.</p></td>
  </tr>
  <tr>
    <td valign="top"><a name="step7">7</a></td>
    <td valign="top">Create a file named <code>/tmp/file1</code>, and run the following command: 
      <pre class="command">% globus-url-copy -s &quot;`grid-cert-info -subject`&quot; \
    gsiftp://localhost:5678/tmp/file1 \
    file:///tmp/file2</pre>    <p>Check to make sure that <code>/tmp/file2</code> now exists.&nbsp;     
    <p><strong>Note:</strong> The <code>-s</code> flag is used in this procedure because the GridFTP server is running under your user proxy.&nbsp; In general, this is not required when transferring to/from a host-based GridFTP server.     
    <p><strong>If you are using a real gridftp server</strong>, started by inetd/xinetd, do <strong>not</strong> use the -s flag. You <strong>only</strong> need that to work with a server started as a user, which is <strong>not</strong> the normal case.</td>
  </tr>
</table>
<p>For more information, see the <em>GridFTP System Administrator's Guide</em>. (coming soon) <br>
</p>
<?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>
