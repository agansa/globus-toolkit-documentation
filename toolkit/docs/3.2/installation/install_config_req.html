<?php

$title = "Globus Toolkit 3.2: Installation Guide";

include_once( "/mcs/www-unix.globus.org/include/globus_header.inc" ); 
?>

<p class="small"><a href="http://www.globus.org">Globus</a> &gt;
<a href="http://www-unix.globus.org/toolkit/">Toolkit</a> &gt;
<a href="http://www-unix.globus.org/toolkit/docs/">Documentation</a> &gt;
<a href="http://www-unix.globus.org/toolkit/documentation/web/docs/3.2/">3.2</a> 
&gt; Installation Guide &lt; </p>

<h1>Globus Toolkit 3.2: Installation Guide </h1>
<p class="small"><a href="index.html">Overview</a><br>
    <a href="install_before.html">Before You Begin</a><br>
    <a href="install_support.html">Support Software</a><br>
    <a href="install_installing.html">Installing GT 3.2</a><br>
    <a href="install_config.html">Configuring</a> &gt; Required &lt;<br>
    <a href="install_test.html">Testing</a><br>
    <a href="install_trouble.html">Troubleshooting</a></p>
<h2>Required Configuration </h2>
<p>This section covers required configuration for the Globus Toolkit
3.2. It includes setting up the Grid Security Infrastructure (GSI) and
acquiring host and user certificates for very basic purposes such as
running a demo or a basic Grid service.</p>

<table width="650" border="0" cellpadding="5">
          <tr>
            <td colspan="2" valign="top"><div align="center" class="box-header"><a name="requirements">Requirements</a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><ul>
              <li>You must already have<a href="install_installing.html"> installed the Globus Toolkit 3.2</a></li>
            </ul></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center" class="box-header"><a name="setenv">Setting environment variables </a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top">In order for the system to
	know the location of the Globus Toolkit commands you just installed,
	you must set an environment variable and source the <font
	face="Courier New" size="2">globus-user-env.sh</font> script. </td>
          </tr>
          <tr>
            <td valign="top"><a name="step1">1</a></td>
            <td valign="top">As globus, set <font face="Courier New"
size="2">GLOBUS_LOCATION</font> to where you installed the Globus
Toolkit.  This will either be <font face="Courier New" size="2">export
GLOBUS_LOCATION=/path/to/install</font>
or <font face="Courier New" size="2">setenv GLOBUS_LOCATION /path/to/install</font>.
          </tr>
          <tr>
            <td valign="top"><a name="step2">2</a></td>
            <td valign="top">Source <font face="Courier New" size="2">$GLOBUS_LOCATION/etc/globus-user-env-setup.{sh,csh}</font> depending on shell. <br>
              <font face="Courier New" size="2">.sh</font> for Bourne shell<br>
              <font face="Courier New" size="2">.csh</font> for C shell</td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center" class="box-header"><a name="caoptions">Certificate
                  Authority (CA) options </a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><p>Your best option is to use
an already existing CA. You may have access to one from the company
you work for, or an organization you are affiliated with. Some
universities provide certificates for their members and
affiliates. Contact your support organization for details about how to
acquire a certificate.  You may find your CA listed in the <a
href="http://www.terena.nl/tech/task-forces/tf-aace/tacar/index.html">TERENA
Repository</a>.</p>
              <p>If you do not have and existing CA, you can set up a
CA for your own use with the Globus SimpleCA package. SimpleCA
provides a wrapper around the openssl CA functionality and is
sufficient for simple Grid services.  Alternatively,  you can use
openssl's CA.sh command on its own. </p>
              <p>You can also use an online certificate
service. However, this option should only be used as a last resort
because it does not fulfil some of the duties of a real Certificate
Authority.  If you must use this option, please see the following link
for instructions: <a
href="http://gcs.globus.org:8080/gcs">http://gcs.globus.org:8080/gcss</a>.</p>
            <ul>
              <li>If you do not  have access to an existing CA and
want to use SimpleCA, continue with <a href="#step3">step 3</a>.</li>
              <li>If you already have a CA, continue to <a
href="#step9">step 9</a>. </li>
            </ul></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name=simplecausers id="simplecausers">SimpleCA:

                  Creating users </a></div></td>
          </tr>
          <tr>
            <td width="40" valign="top"><a name="step3">3</a></td>
            <td width="578" valign="top"><p>Make sure you have the following users on your machine:</p>
              <ul>
                <li>Your <code>user</code> account, which will be used to run the client programs.<br>
                </li>
                <li>A generic <code>globus</code> account, which will
be used to perform administrative tasks such as starting and stopping
the container, deploying services, etc. This user will also be in
charge of managing the SimpleCA. To do this, make sure this account
has read and write permissions in the <code>$GLOBUS_LOCATION</code>
directory. </li>
            </ul></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name="simplecadownload">              SimpleCA:
Downloading</a></div></td>
          </tr>
          <tr>
            <td valign="top"><a name="step4">4</a></td>
            <td valign="top"><p>Download the SimpleCA package using this link:</p>
            <p><a
	href="http://www-unix.globus.org/ftppub/gsi/simple_ca/globus_simple_ca-latest-src_bundle.tar.gz">globus_simple_ca-latest-src_bundle.tar.gz</a>
	</p></td>

          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name="simplecabuild">              SimpleCA:
Building</a></div></td>
          </tr>
          <tr>
            <td valign="top"><a name="step5">5</a></td>
            <td valign="top"><p>This step is only run
<strong>once</strong> per grid setup.  Once one host has a SimpleCA
installed, you never run this step again.  We will describe later what
procedure to follow on the other hosts in your grid.  Run the
following command from the directory where you've downloaded the
file:</p>
              <p class="command"><font face="Courier
New">$GLOBUS_LOCATION/sbin/gpt-build
globus_simple_ca-latest-src_bundle.tar.gz &lt;<em>flavor
type</em>&gt;</font></p>
              <p>For most systems, the flavor will be <strong><font
face="Courier New">gcc32dbg</font></strong>,
meaning your main build was a gcc 32bit debugging build.  If your
install messages specify a different flavor (for instance, gcc64dbg on
a 64bit machine), use that flavor instead.</p>
              <p><b>Disregard</b> the following message if it appears: </p>
              <p class="command">make: *** No rule to make target `distclean'. Stop.</p>
</td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center" class="box-header"><a name="simplecasetup">              SimpleCA:
                  Running the setup script</a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top">Now that SimpleCA has been
built, run a post-install script to set it up. 
              <p>This script will prompt you for information about the
CA you wish to create. Most of the questions provide default answers;
if you are unsure, use the default. You'll need the following
information before running the setup script: </p>
              <ul>
                <li><em>Subject Name of the CA </em>- The subject name of the CA uniquely identifies it among other Grid CA certificates. An example subject name is:<br>
                    <br>
                    <code>cn=Sams CA, ou=SamsLittleGrid, o=Grid</code> <br>
    <br>
    In this example, the <strong>organization (o)</strong> is Grid , which uniquely identifies this CA as one that generates certificates used on the Grid.<br>
    <br>
    The <strong>organizational unit (ou) </strong>is SamsLittleGrid , which identifies this CA from other Grid CA.<br>
    <br>
    The <strong>common name (cn)</strong> is Sams CA , which
identifies this particular certificate as the CA certificate within
the <em>SamsLittleGrid </em>domain.  It's perfectly acceptable to just
use the defaults provided.<br>
                </li>
                <li> <em>Email </em>- This should be the email address
where you intend to receive certificate requests.<br>
                </li>
                <li> <em>Expiration</em> - This is the number of days
for which the CA certificate is valid. Once this time expires, the CA
certificate will have to be recreated, and all of its certificates
regranted.<br>
                </li>
                <li> <em>Passphrase </em>- The passphrase of the CA
certificate will be used only when signing certificates (with
grid-cert-sign). It should be hard to guess, as its compromise may
compromise all the certificates signed by the CA.</li>
            </ul></td>
          </tr>
          <tr>
            <td valign="top"><a name="step6">6</a></td>
            <td valign="top"><p> As globus, run:</p>
                <p class="command"><font face="Courier
New">$GLOBUS_LOCATION/sbin/gpt-postinstall</font></p>
</td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center" class="box-header"><a name="simplecadefault"> SimpleCA:
                Setting the default CA</a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top">Configure your system to use
the SimpleCA you just installed as the default CA.</td>
          </tr>
          <tr>
            <td valign="top"><a name="step7">7</a></td>
            <td valign="top"><p>As root, run: </p>
                <pre class="command">$GLOBUS_LOCATION/bin/grid-default-ca
            </pre>
                <p>The output should be similar to the following example: </p>
                <pre class="command">The available CA configurations installed on this host are:
1) 24d355a5 -&nbsp; /O=Globus/OU=GT3 Tutorial/CN=Globus Simple CA

The default CA is:

Enter the index number of the CA to set as the default:
            </pre>
            </td>
          </tr>
          <tr>
            <td valign="top"><a name="step8">8</a></td>
            <td valign="top"><p>Type in <strong>1</strong> to make
your SimpleCA the default CA. <strong>Note:</strong> This step is the
step that you perform on other hosts to make them trust your
SimpleCA.  There is a package named
globus_simple_ca_[hash]_setup-*.tar.gz  in ~globus/.globus/simpleCA that you
gpt-build and gpt-postinstall on other hosts, then run grid-default-ca.
</p>
                <p>This Certificate Authority is managed by the
<code>globus</code> user on the host where . You are now ready to request certificates to
your CA. You can do this from the machine that hosts the CA, or from
other machines.</p></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name="finalizegsi">Finalizing GSI</a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><p>The <code>setup-gsi</code> command copies security configuration files into the<code> /etc/grid-security/</code> directory. </p>
            <p><strong>Note:</strong> You can make this configuration the default configuration by linking the files to <code>/etc/grid-security</code>. </p></td>
          </tr>
          <tr>
            <td valign="top"><a name="step9">9</a></td>
            <td valign="top"><p>As root, run the following command if you used SimpleCA:</p>
              <p class="command">$GLOBUS_LOCATION/setup/globus_simple_ca_[hash]_setup/setup-gsi</p>
              <p>The "hash" part is the CA hash, and will be different
for every user.  It will be printed out during the postinstall step.</p>
            <p>Otherwise, run the following command :</p>
            <p class="command">$GLOBUS_LOCATION/setup/globus/setup-gsi</p>
            </td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name="hostcert">Requesting and signing host certificates </a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><p>You must request and sign
a host certificate and then copy it into the appropriate directory for
secure services.  The certificate must be for a machine which has a
consistent name in DNS; you should not run it on a computer using DHCP
where a different name could be assigned to your computer. </p></td>
          </tr>
          <tr>
            <td valign="top"><a name="step10">10</a></td>
            <td valign="top"><p>Request a host certificate: As root, run:</p>
                <p class="command">grid-cert-request -host `hostname` </p>
                <p>This creates /etc/grid-security/hostkey.pem,
		/etc/grid-security/hostcert_request.pem and (an empty)
		/etc/grid-security/hostcert.pem</p></td>
          </tr>
          <tr>
            <td valign="top"><a name="step11">11</a></td>
            <td valign="top"><p>Sign the host certificate: as globus run:</p>
                <p class="command">grid-ca-sign.</p>
            <p>A signed host certificate, named <font face="Courier
New">usercert.pem</font> is stored in the <font face="Courier
New">/home/globus/.globus/simpleCA</font> directory</p></td>
          </tr>
          <tr>
            <td valign="top"><a name="step12">12</a></td>
            <td valign="top"> As root, move the signed host
certificate to <font face="Courier
New">/etc/grid-security/hostcert.pem</font>. <br>
            The certificate should be owned by root, and read-only for other users. <br>
            The key should be read-only by root.</td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name="usercert"> Requesting and signing user
certificates</a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top">Users also must request user
certificates, which you will sign using the globus user. </td>
          </tr>
          <tr>
            <td valign="top"><a name="step13">13</a></td>
            <td valign="top"><p>Request a user certificate: As your
normal user account (<strong>not</strong> <code>globus</code>),
run:</p>
            <p class="command">grid-cert-request</p>
            <p>This creates ~user/.globus/usercert.pem (empty,
~user/.globus/userkey.pem, and ~user/.globus/usercert_request.pem
</p></td>
          </tr>
          <tr>
            <td valign="top"><a name="step14">14</a></td>
            <td valign="top"><p>Sign the user certificate: as <code>globus</code>, run:</p>
              <p class="command">grid-ca-sign</p>
              <p>Now a signed copy of usercert.pem available in the
simpleCA directory.</span></p></td>
          </tr>
          <tr>
            <td valign="top"><a name="step15">15</a></td>
            <td valign="top"><p>As your normal user account
(<strong>not</strong> <code>globus</code>), copy the signed user
certificate into <font face="Courier New"><code>~/.globus/
</code></font>. <br>
              The certificate should be owned by the user, and
read-only for other users. <br>
            The key should be read-only by the owner</p>
	</td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center"
class="box-header"><a name="perms">Change the ownership and access
permissions</a></div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top">Run the
<code>setperms.sh</code> script to change the ownership of some Globus
files under the <code>$GLOBUS_LOCATION/bin </code>directory. This step
allows some Globus tools to run as root. </td>
          </tr>
          <tr>
            <td valign="top"><a name="step16">16</a></td>
            <td valign="top"><p>As root, run:</p>
              <p class="command"> $GLOBUS_LOCATION/bin/setperms.sh</p>              </td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><div align="center" class="box-header">Next Steps </div></td>
          </tr>
          <tr>
            <td colspan="2" valign="top"><p>Now you are ready to use secure
services.</p>
              <p>If you only want to test a basic Grid service, you are ready
                to <a href="install_test.html">test your installation</a>.</p>
              <p>If you want to use certain services, see the following topics:</p>
            <ul>
              <li><a href="install_config_resource.html">Configuring Resource Management</a></li>
              <li><a href="install_config_gridftp.html">Configuring GridFTP</a></li>
              <li><a href="install_config_rft.html">Configuring RFT</a></li>
              <li><a href="install_config_rls.html">Configuring RLS</a>  </li>
              <li><a href="install_config_index.html">Configuring the Index Service</a></li>
              <li><a href="install_config_prews.html">Configuring pre-Web Services Components</a> </li>
            </ul></td>
          </tr>
</table>
		<p>&nbsp;</p>
		
		
		<?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>
