<?php include( "http://www-unix.globus.org/include/globus_header.inc" ); ?><head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>Globus Toolkit 3.2: Installation Guide</title>
<link href="../../../../../CSS/style.css" rel="stylesheet" type="text/css">
<style type="text/css">
<!--
.style1 {color: #FF00FF}
-->
</style>
</head>

		
<h1>Setting up Data Management (RLS/RFT/CAS?)</h1>
		<h4>  Setting up 
		GridFTP</h4>
		<p>  prerequisite notes: security (host certificate, appropriate users 
		in the gridmapfile and must have a valid proxy (grid-proxy-init)</p>
		<p>  In order to use GridFTP, you need to configure your machine to 
		automatically start the GridFTP server daemon.&nbsp; To do that, make the following changes as root:</p>
		<p>  1. Add the following entry to <kbd>/etc/services</kbd>:</p>
		<p class="command">  gsiftp 2811/tcp</p>
		<p>  2. Modify the configuration file for Inetd or Xinetd (depending on 
		which your host is running):</p>
<p>  <b>For Inetd</b>, open <font face="Courier New">/etc/inetd.conf</font> and 
add the following entry.</p>
		<p class="command">  gsiftp&nbsp; stream&nbsp; tcp&nbsp;&nbsp;&nbsp;&nbsp; 
		nowait&nbsp; root /usr/bin/env env LD_LIBRARY_PATH=GLOBUS_LOCATION/lib 
		GLOBUS_LOCATION/sbin/in.ftpd -l -a -G GLOBUS_LOCATION</p>
		<p>  Enter the entire string in one line. Be sure to replace
		<font face="Courier New">GLOBUS_LOCATION</font> below with the actual 
		value of <font face="Courier New">$GLOBUS_LOCATION</font> in&nbsp; your 
		environment.</p>
		<p>  <b>For Xinetd</b>, add a file called <font face="Courier New">grid-ftp</font> to the 
		<font face="Courier New">/etc/xinetd.d/</font> 
		directory with the following contents:</p>
		<pre class="command">
		service gsiftp
		 { 
		      instances       = 1000 
		      socket_type     = stream 
		      wait            = no 
		      user            = root 
		      env             = LD_LIBRARY_PATH=GLOBUS_LOCATION/lib 
		      server          = GLOBUS_LOCATION/sbin/in.ftpd 
		      server_args     = -l -a -G GLOBUS_LOCATION 
		      log_on_success += DURATION USERID 
		      log_on_failure += USERID 
		      nice            = 10 
		      disable         = no 
		  }</pre>
		<p>Be sure to replace <font face="Courier New">GLOBUS_LOCATION</font> 
		below with the actual value of <font face="Courier New">$GLOBUS_LOCATION</font> 
		in your environment.</p>
		<p>3. Now you have to notify Inetd or Xinetd that its configuration file 
		has changed. To do this, follow the instructions for the server as 
		listed in the manual (<kbd>man inetd</kbd> or <kbd>man xinetd). Give 
		something to try</kbd></p>
		<p><kbd>you can now attempt to run a gridftp server. Test the 
		configuration. Try to use grid-proxy-init, globus-url-copy (procedure) 
		and see what happens.</kbd></p>
		<p><kbd>If such and such happens, see &lt;link&gt;.</kbd></p>
		<p><kbd>link to dev and user</kbd></p>
		<a name="gridftp">
				<h2>Testing GridFTP</h2>
		</a>
				<p>Testing GridFTP consists of the following steps:<br>
&nbsp;</p>
				<ol>
					<li><a href="#startftp">Start a GridFTP server</a> 
					</li>
					<li><a href="#ftptest">Move a test file</a> </li>
				</ol>
				<ol>
					<li><a name="startftp"><b>Starting a GridFTP server</b></a> 
					<p>In this section, you'll start a GridFTP server running 
					under the permissions of your user certificate.</p>
					<p>First, create a proxy: </p>
					<pre>     % grid-proxy-init -verify -debug</pre>
					<p>Then start the GridFTP server as yourself: </p>
					<pre>     % $GLOBUS_LOCATION/sbin/in.ftpd -S -p 5678</pre>
					<p>The <code>-S</code> flag leaves the daemon in the 
					background and the <code>-p</code> flag specifies port. If 
					that port is already in use, you can try another.&nbsp; You also 
					need to create ~/.gridmap, and add an entry with your 
					subject (which was output by the grid-proxy-init step) and 
					username, as follows: </p>
					<p>&nbsp;&nbsp;&nbsp; &quot;/O=Grid/O=Globus/OU=your.domain/CN=Your Name&quot;&nbsp;&nbsp;&nbsp; 
					your-account </p>
					<p>In the future, you will <strong>not</strong> be starting 
					the in.ftpd daemon by hand. Follow the instructions in the 
					next section to add it to inetd/xinetd.</li>
					<li><a name="ftptest"><b>Moving a test file</b></a> 
					<p>Now, create a file named <code>/tmp/file1</code>, and run 
					the following command: </p>
					<pre>% globus-url-copy -s &quot;`grid-cert-info -subject`&quot; \
    gsiftp://localhost:5678/tmp/file1 \
    file:///tmp/file2</pre>
					<p>Check to make sure that /tmp/file2 now exists.&nbsp; Note that 
					the -s flag is being used because the GridFTP server is 
					running under your user proxy.&nbsp; In general, this is not 
					required when transferring to/from a host-based GridFTP 
					server. To repeat more strongly: if you are using a real 
					gridftp server, started by inetd/xinetd, do <strong>not</strong> 
					use the -s flag. You <strong>only</strong> need that to work 
					with a server started as a user, which is <strong>not</strong> 
					the normal case.</li>
				</ol>
				
<?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>