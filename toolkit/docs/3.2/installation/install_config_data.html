
<?php include( "http://www-unix.globus.org/include/globus_header.inc" ); ?>
<link href="../../../../../CSS/style.css" rel="stylesheet" type="text/css">


<p class="small"><a href="http://www.globus.org">Globus</a> &gt;
<a href="http://www-unix.globus.org/toolkit/">Toolkit</a> &gt;
<a href="http://www-unix.globus.org/toolkit/docs/">Documentation</a> &gt;
<a href="http://www-unix.globus.org/toolkit/documentation/web/docs/3.2/">3.2</a> 
&gt; <a href="index.htm">Installation Guide</a> &gt; Configuring Data Management&lt; </p>

		
<h1>Configuring Data Management (GridFTP, RFT, RLS, CAS?)</h1>
<p>Intro paragraph </p>
<p>This section contains the following topics:</p>
<ul>
  <li><a href="#grid">Configuring GridFTP</a></li>
  <li><a href="#rft">Configuring RFT</a></li>
  <li>Configuring CAS?   </li>
</ul>
<h2><a name="grid">  Configuring 
		GridFTP</a></h2>
		<p>  Before you can configure a GridFTP server, you must have:</p>
		<ul>
		  <li> a host certificate</li>
		  <li> appropriate users 
		        in the gridmapfile</li>
		  <li> a valid proxy (<code>grid-proxy-init</code>)</li>
</ul>
		<p>In order to use GridFTP, you need to configure your machine to 
		automatically start the GridFTP server daemon.&nbsp; To do this, make the following changes <strong>as root</strong>:</p>
		<p>  1. Add the following entry to <code>/etc/services</code>:</p>
		<p class="command">  gsiftp 2811/tcp</p>
		<p>  2. Modify the configuration file for Inetd or Xinetd (depending on 
		which your host is running):</p>
<p>  <b>For Inetd</b>, open <code>/etc/inetd.conf</code> and 
add the following entry.</p>
		<p class="command">  gsiftp&nbsp; stream&nbsp; tcp&nbsp;&nbsp;&nbsp;&nbsp; 
		nowait&nbsp; root /usr/bin/env env LD_LIBRARY_PATH=GLOBUS_LOCATION/lib 
		GLOBUS_LOCATION/sbin/in.ftpd -l -a -G GLOBUS_LOCATION</p>
		<p>  Enter the entire string in one line (disregard the word wrapping above). Be sure to replace
		<font face="Courier New">GLOBUS_LOCATION</font>  with the actual 
		value of <font face="Courier New">$GLOBUS_LOCATION</font> in your 
		environment.</p>
		<p>  <b>For Xinetd</b>, add a file called <font face="Courier New">grid-ftp</font> to the 
		<font face="Courier New">/etc/xinetd.d/</font> 
		directory with the following contents:</p>
		<pre class="command">
		service gsiftp
		 { 
		      instances       = 1000 
		      socket_type     = stream 
		      wait            = no 
		      user            = root 
		      env             = LD_LIBRARY_PATH=GLOBUS_LOCATION/lib 
		      server          = GLOBUS_LOCATION/sbin/in.ftpd 
		      server_args     = -l -a -G GLOBUS_LOCATION 
		      log_on_success += DURATION USERID 
		      log_on_failure += USERID 
		      nice            = 10 
		      disable         = no 
		  }</pre>
		<p>Be sure to replace <font face="Courier New">GLOBUS_LOCATION</font> 
		 with the actual value of <font face="Courier New">$GLOBUS_LOCATION</font> 
		in your environment.</p>
		<p>3. Notify Inetd or Xinetd that its configuration file 
		has changed. To do this, follow the instructions for the server as 
		listed in the manual (<kbd>man inetd</kbd> or <kbd>man xinetd</kbd>). </p>
		<p>You can now <a href="#gridftp">test</a> your configuration by attempting to run a GridFTP server. </p>
		<p>Try to use grid-proxy-init, globus-url-copy (procedure) 
		  and see what happens.</p>
		<p>If such and such happens, see &lt;link&gt;.</p>
		<p>link to dev and user guides </p>
		
				<h2><a name="gridftp">Testing GridFTP</a></h2>
		
				<p>Testing GridFTP consists of starting a GridFTP server and moving a test file:<br>
</p>
				<ol>
					<li>Start a GridFTP server running 
					under the permissions of your user certificate.
					  <p>First, create a proxy: </p>
					<pre class="command">     % grid-proxy-init -verify -debug</pre>
					<p>Then start the GridFTP server as yourself: </p>
					<pre class="command">     % $GLOBUS_LOCATION/sbin/in.ftpd -S -p 5678</pre>
					<p>The <code>-S</code> flag leaves the daemon in the 
					background and the <code>-p</code> flag specifies port. If 
					that port is already in use, you can try another.&nbsp; </p>
					</li>
					<li>
					  <p> Create <code>~/.gridmap</code>, and add an entry with your 
					    subject (which was output by the grid-proxy-init step) and 
					    username, as follows: </p>
					  <p class="command">&nbsp;&nbsp;&nbsp; &quot;/O=Grid/O=Globus/OU=your.domain/CN=Your Name&quot;&nbsp;&nbsp;&nbsp; 
					  your-account </p>
					  <p>In the future, you will <strong>not</strong> be starting 
					  the in.ftpd daemon by hand. Follow the instructions in the 
					  next section to add it to inetd/xinetd.                    
				  </li>
					<li><a name="ftptest"><b>Moving a test file</b></a> 
					<p>Now, create a file named <code>/tmp/file1</code>, and run 
					the following command: </p>
					<pre>% globus-url-copy -s &quot;`grid-cert-info -subject`&quot; \
    gsiftp://localhost:5678/tmp/file1 \
    file:///tmp/file2</pre>
					<p>Check to make sure that /tmp/file2 now exists.&nbsp; Note that 
					the -s flag is being used because the GridFTP server is 
					running under your user proxy.&nbsp; In general, this is not 
					required when transferring to/from a host-based GridFTP 
					server. To repeat more strongly: if you are using a real 
					gridftp server, started by inetd/xinetd, do <strong>not</strong> 
					use the -s flag. You <strong>only</strong> need that to work 
					with a server started as a user, which is <strong>not</strong> 
					the normal case.</li>
			    </ol>
				
                <h2><a name="rft">Configuring RFT</a></h2>
                <p>Before configuring RFT, you must have a host certificate (see <a href="install_config_req.html">Required Configuration</a>.) </p>
                <ol>
                  <li>Create a postgres database for RFT to use.<br>
                    <br> 
                  There's an example .sql file included in the distribution that can be used to create the database.<br>
                  </li>
                  <li> Edit <span class="code">$GLOBUS_LOCATION/server-config.wsdd</span> for the ReliableFileTransferFactoryService. <br>
                    <br>
                  Change the <span class="code">dbname</span> and <span class="code">dbuser</span> to match your database name and database user. <br>
                  <br>
                  (It's probably a good idea to suggest the default dbname and dbuser so that this edit won't be required if they follow our instructions exactly)<br>
                  </li>
                  <li> Setup a GridFTP server so you can use RFT with it. <br>
                    <br>
                    This involves adding an entry to /etc/services and /etc/xinetd.d. <br>
                    <br>
                    You can see http://www.globus.org/gt2.4/admin/guide-startup.html#gridftp for details.<br>
                  </li>
                </ol>
                <p>&nbsp; </p>
                <?php include("http://www-unix.globus.org/include/globus_footer.inc"); ?>