
<html>
<head>
<title>Globus ScOAP Install Instructions</title>
<link rel="stylesheet" type="text/css" href="http://www-unix.globus.org/style.css">
<!-- <link rel="shortcut icon" href="/images/favicon.ico"> -->
<!-- <link rel="icon" href="/images/favicon.ico"> -->
<script language="javascript1.2" type="text/javascript" src="/lib-common.js"></script>
</head>
<body topmargin="0" leftmargin="0" marginwidth="0" marginheight="0"
    text="#333366" link="#333366" alink="#333366" vlink="#333366"
    bgcolor="#ffffff">

<!-- Master Table -->
<table border=0 cellpadding=0 cellspacing=0 align=left height=90% width=600>
<tr>
<td colspan=2>

    <!-- Header Table -->
	<table border="0" cellpadding=0 cellspacing=0 align=left width=100%>
	<tr>
	<td colspan="5"><img src="http://www-unix.globus.org/images/a0c.gif" border="0" width="505" height="32"></td>
	</tr>
    <tr>
    <td width="134">
        <a href="http://www.globus.org"><img 
        src="http://www-unix.globus.org/images/b0c.gif" border="0" width="134" 
        height="38"></a></td>

    </td>
    <td width="86">
        <a href="http://www.globus.org/about/" 
        onMouseOver="document.about.src='http://www-unix.globus.org/images/b1b_on.gif';
        window.status='About the Globus Project'; return true;"
        onMouseOut="document.about.src='http://www-unix.globus.org/images/b1b_off.gif'"><img 
        src="http://www-unix.globus.org/images/b1b_off.gif" width="86" height="38" border="0" 
        name="about"></a></td>
    <td width="80">
        <a href="http://www.globus.org/research/" 
        onMouseOver="document.research.src='http://www-unix.globus.org/images/b2b_on.gif';
        window.status='Globus Project Research'; return true;"
        onMouseOut="document.research.src='http://www-unix.globus.org/images/b2b_off.gif'"><img 
        src="http://www-unix.globus.org/images/b2b_off.gif" width="80" height="38" border="0" 
        name="research"></a></td>
    <td width="82">
        <a href="http://www.globus.org/toolkit/" 
        onMouseOver="document.toolkit.src='http://www-unix.globus.org/images/b3b_on.gif';
        window.status='Globus Project Software'; return true;"
        onMouseOut="document.toolkit.src='http://www-unix.globus.org/images/b3b_on.gif'"><img src="http://www-unix.globus.org/images/b3b_on.gif" width="82" height="38" border="0" 
        name="toolkit"></a></td>
    <td>
        <a href="http://www.globus.org/developer/" 
        onMouseOver="document.development.src='http://www-unix.globus.org/images/b4b_on.gif';
        window.status='Globus Project Developer Resources'; return true;"
        onMouseOut="document.development.src='http://www-unix.globus.org/images/b4b_off.gif'"><img src="http://www-unix.globus.org/images/b4b_off.gif" width="136" height="38" border="0" 
        name="development"></a></td>

    </tr>
    <tr>
    <td><img src="http://www-unix.globus.org/images/c0c.gif" width="100" height="32"></td>
    </tr>
	</table> 
</td>
</tr> <!-- Header Table -->

<!-- Main row -->
<tr>
<td valign=top align=left height=90% width=150>

    <img border=0
    src="http://www-unix.globus.org/images/blank.gif"
    height=1 width=150>
    <table class=panel cellpadding="0" cellspacing="2" border="0" width="120">
<tr>
<td class="panel" width=10>
    <img width=20 height=10 src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www.globus.org/about/faq.html">FAQ</a>
</td>
</tr>

<td class="panel" width=10>

    <img width=20 height=10 
    src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www.globus.org/about/site-index.html">Site Index</a>
</td>
</tr>

<td class="panel" width=10>
    <img width=20 height=10 
    src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www.globus.org/about/contacts.html">Contact Us</a>

</td>
</tr>

<tr>
<td class="panel" height=45 colspan=2>
    <br>
    <!-- <a href=http://www-unix.globus.org/toolkit/> -->
    <img border=0 src="http://www-unix.globus.org/images/globus-toolkit.gif">
    <!-- </a> -->
</td>
</tr>

<td class="panel" width=10>

    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/toolkit/about.html">
    About</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">

    <a href="http://www-unix.globus.org/toolkit/support.html">
    Support</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/toolkit/">
    Download</a>

</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/toolkit/documentation.html">
    Documentation</a>
</td>
</tr>

<td class="panel" width=10>

    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/toolkit/advisories.html">
    Advisories</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">

    <a href="http://www.globus.org/cog">
    CoG Kits</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/toolkit/bugzilla.html">
    Bugzilla</a>

</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/toolkit/license.html">
    License</a>
</td>
</tr>

<tr>

<td class="panel" width=10>
    <!-- nothing -->
</td>
<td class="panel">
    <br>
    <font color=#6699FF><b>Toolkit<br>Components</b></font>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">

</td>
<td class="panel">
    <a href="http://www-unix.globus.org/core/">
    Core</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/security/">

    Security</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/developer/data-management.html">
    Data<br>Management</a>

</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www-unix.globus.org/developer/resource-management.html">
    Resource<br>Management</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www.globus.org/mds/">
    Information<br>Services</a>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">

</td>
<td class="panel">
    <a href="http://www-unix.globus.org/developer/xio/">
    XIO
</td>
</tr>

<tr>
<td class="panel" width=10>
    <!-- nothing -->
</td>
<td class="panel">
    <br>

    <font color=#6699ff><b>Activities</b></font>
</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www.globus.org/about/news/">
    News & Archives</a>

</td>
</tr>

<td class="panel" width=10>
    <img src="http://www-unix.globus.org/images/right_arrow.gif">
</td>
<td class="panel">
    <a href="http://www.globus.org/about/events/">
    Meetings</a>
</td>
</tr>

<tr>

<td class="panel" width=10>
    <!-- nothing -->
</td>
<td class="panel">

<br>
<form name="search" method="POST" action="http://tiger.mcs.anl.gov/htdig/cgi-bin/htsearch.cgi">
<input type="hidden" name="config" value="globus">
<input type="hidden" name="exclude" value="mail_archive">
<font color="#6699ff"><b>Site Search:</b></font><br>
<input type="text" name="words" size="10" maxlength="2033" value="">
</form>   

</td>
</tr>
</table>

</td>
<td valign=top align=left>

      <H1>Globus ScOAP Install and Setup Instructions</H1>
      <p>This document details installation of the Globus C SOAP (ScOAP)
      implementation,
      as well as the creation&nbsp; and deployment of a simple service. To 
      illustrate the steps, we will use a simple example, but the same sequence 
      of steps should be followed for any example.&nbsp; </p>
      <H3>Prerequisites</H3>
      <p>The package assumes that the following are present on the system:</p>
      <ol>
        <li>Java (tested only on 1.4.2)</li>
        <li>Ant (tested only on 1.6</li>
        <li>A C/C++ compiler (only gcc/g++ has been tested)</li>
    </ol>
      <p>The path to the tools has to be included in user path.</p>
      <H3>Installing ScOAP</H3>
      <p>The installation proceeds in two steps as C SOAP uses the Globus 
      Packaging Toolkit (GPT) for installation.</p>
      <ol>
        <li>
Obtain the
        GPT release from
        <a href="ftp://ftp.ncsa.uiuc.edu/aces/gpt/releases/">
        ftp://ftp.ncsa.uiuc.edu/aces/gpt/releases</a>
The current recommended release is 3.1:
        <a href="ftp://ftp.ncsa.uiuc.edu/aces/gpt/releases/gpt-3.1/gpt-3.1-src.tar.gz">
        ftp://ftp.ncsa.uiuc.edu/aces/gpt/releases/gpt-3.1/gpt-3.1-src.tar.gz</a>
        <br>
        <li><p>
        Install GPT. 
        <a href="http://www.gridpackagingtools.com/book/latest-stable">
        Detailed instructions</a> are available. 
        Short instructions are in the INSTALL file contained in the distribution 
        and are also summarized here. </li>
        <li><p>
        Set the GPT_LOCATION environment variable 
        to a location where you want to install GPT and call:<p>
<code> $GPT_LOCATION/build_gpt</code></li>
        <li>
Test installation<p>
<code>$GPT_LOCATION/build_gpt -test</code></li>
        <li>
<p>Download the
        <a href="http://www-unix.mcs.anl.gov/~slang/scoap-1.0-src_bundle.tar.gz">ScOAP bundle</a> (Released 4/14/04).

        <li>
        <p>Set the GLOBUS_LOCATION environment 
        variable to point to the directory where you want to install C SOAP
        <li>
        <p>Clear the CLASSPATH: unset CLASSPATH 
        
        <li>
<p>Run the build script for the ScOAP bundle:<p>
<code>$GPT_LOCATION/sbin/gpt-build 
        scoap-1.0-src_bundle.tar.gz &lt;flavor&gt; </code>
<p>
Where &lt;flavor&gt; is the flavor you want to install (gcc32, gcc32dbg, etc.)
<li><p>Run gpt-postinstall.  This will perform necessary setup steps within some of the packages:<p>
<code>$GPT_LOCATION/sbin/gpt-postinstall</code>
<p>
NOTE: warning messages regarding the GCS package can be safely ignored.
<li><p>Source the setup environment:
<p>
with csh: <code>source $GLOBUS_LOCATION/etc/globus-user-env.csh</code>
<p>
with sh/bash/zsh: <code>. $GLOBUS_LOCATION/etc/globus-user-env.sh</code>
    </ol>
    <h3>
    Creating a Service in ScOAP</h3>
    <ol>
      <li>
      <p>
      Create a 
      working directory and a WSDL file describing your service. An example file 
      can be found at <a href="http://www-unix.mcs.anl.gov/~slang/Counter.wsdl">http://www-unix.mcs.anl.gov/~slang/Counter.wsdl</a>.</li>
      <li>
<p>
Generate stubs and 
      skeletons for the service using the globus-generate-bindings call. First call:<p>
      <code>$GLOBUS_LOCATION/bin/globus-generate-bindings -l c -s Counter.wsdl</code>
<p> 
   This action results in the creation of a directory containing 
      skeleton files as well as files creating code for serialization and 
      deserialization of operation arguments. In addition, a file with empty 
      function prototypes for the implementation to be supplied by service 
      developer is generated.  The generated C code is placed in the <code>service</code> directory.</li>
      <li>
      <p>
      Run configure/make/make install<p>
      <code>cd service</code><br>
      <code>./configure --with-flavor=&lt;flavor&gt;</code>
<br>      <code>make</code>
<br>      <code>make install</code><p>
      Where &lt;flavor&gt; is the your flavor of choice (gcc32dbg, etc.).  This installs the service with empty service calls.  The functions that implement the service can be found in the service's port type source file.  In this example the file is <code>CounterPortType.c</code>.  The functions within that source file should be implemented to have a functional service.  Once the service is implemented, re-run:<p>
<code>make</code><br>
<code>make install</code><p>
      As a result a shared library containing the generated 
      skeletons will get created in the .lib directory, and the library will
be installed into <code>$GLOBUS_LOCATION/lib/axiscpp/services/</code>.  This library is loaded dynamically at runtime by the container.<p>
A new GPT package of the service can be created with:<p>
<code>make dist</code><p>
The resulting package will be a <code>tar.gz</code> file in the working directory.  It can be copied elsewhere and installed into other C SOAP installations with <code>gpt-build.</code></li>
</ol>
    <h3>
    Deploying a Service in ScOAP</h3>
        Modify the deployment descriptor located in <code>$GLOBUS_LOCATION/etc/axiscpp/axis-server.wsdd</code>.  You will need to add a service element for your service.  See the <a href="http://www-unix.mcs.anl.gov/~slang/axis-server.wsdd">example WSDD file</a>.  The following parts are required in the service element:
<ul>
<li><p><code>name</code> attribute - its value should be the same as the name of the service defined in the WSDL.
<li><p><code>provider</code> attribute - the type of the language and encoding of the service.  Can be one of: C:DOCUMENT, C:RPC, CPP:DOCUMENT, CPP:RPC
<li><p>[OPTIONAL] <code>allowedMethods</code> parameter sub-element.  This is a comma separated list of the active operations of the service (* for wildcard).
<li><p>[OPTIONAL] <code>requestFlow</code> element.  This defines the handlers used for the service before the service operation is called.
</ul>        
<p>Also note that the WSDD file includes a <code>transport</code> element, which defines the type of transport used by the service container.  The possible values are HTTP and HTTPG (http over gsi security).  The HTTPG transport requires proper security certificates to be in place (namely the user's proxy).  See <a href="http://www.globus.org/security/">http://www.globus.org/security</a> for further information.

<h3>Creating Client Stubs in ScOAP</h3>
The client stub generation is similar to service skeleton generation.  The stubs are generated using the <code>globus-generate-bindings</code> command:
<p>
<code>globus-generate-bindings -l c -c Counter.wsdl</code>
<p>
Use the <code>-help</code> option to see all the options.  The generated bindings are put in the <code>client</code> directory.  To build the generated source, run the commands:
<p>
<code>cd client</code><br>
<code>./configure --with-flavor=gcc32dbg</code><br>
<code>make</code><br>
<code>make install</code>
<p>
This will install the generated headers into $GLOBUS_LOCATION/include/&lt;flavor&gt;/axiscpp/&lt;service name&gt;, and the generated stub library will be installed into $GLOBUS_LOCATION/lib.  Running:
<p>
<code>make dist</code>
<p>
will generate a GPT client source package that can be installed on any ScOAP install.

<h3>Running the Container</h3>
The service container can be run with the command:
<samp>
<p>
<code>$GLOBUS_LOCATION/bin/globus-service-container</code>
</samp>
<p>This will output the endpoint of the container.  For example, your container's endpoint might be:
<p>
<code>http://my.host.net:12345</code>
<p>This container endpoint can be combined with the service name to get the service endpoint:
<p>
<code>http://my.host.net:12345/ContainerService</code>
<p>
If multiple containers with different configurations are desired, then the default location of the axis config file should be changed (currently its <code>$GLOBUS_LOCATION/etc/axiscpp/axis.conf</code>) .  
This can be done by setting the AXIS_HOME environment variable.  The path to the service WSDD file can also be modified by changing the path to it in axis.conf.  This allows you to run multiple containers with possibly different transport mechanisms and services on the same machine.
    </ol>

<h3>Writing the Client Application</h3>
Developers should use the headers that were installed in the last step to write their client applications.  We provide an <a href="http://www-unix.mcs.anl.gov/~slang/counter_add_test.c">example client application</a> for reference.  This client executable can be found at <code>$GLOBUS_LOCATION/test/globus_client_CounterService_test/counter-add-test</code>.  Its run with the service endpoint and an add value:<p>
<code>counter-add-test http://my.host.net:12345/CounterService 10</code>
<p>
This executable has been installed in <code> $GLOBUS_LOCATION/test/globus_client_CounterService_test/ for your convenience</code>.  The source code can be taken from the globus_client_counterService_test package included in the ScOAP bundle.  Developers may also wish to create a GPT package of their client application.  This can be done by adding only a few configuration files (Makefile.am, configure.in, bootstrap, pkgdata/pkg_data_src.gpt.in).  The counter client GPT package is a good place to start.


</td>
</tr> <!-- Main row -->

<!-- Location Bar row -->
<tr>
<td valign=top align=left width=150>
    <!-- nothing -->
</td>
<td class=footer align=center>
    <br>
    <hr width=500>
    <br>
    <br>
    <a href="http://www.globus.org/about/">about globus</a>

    &nbsp;|&nbsp;
    <a href="http://www.globus.org/research/">grid research</a>
    &nbsp;|&nbsp;
    <a href="http://www.globus.org/toolkit/">globus toolkit</a>
    &nbsp;|&nbsp;
    <a href="http://www.globus.org/developer/">software development</a>

    <br>
    <br>
    Last modified: 03/17/04 6:27pm.
    Comments? <a href="mailto:webmaster@globus.org">webmaster@globus.org</a>
    <br>
    <br>
    Globus Project and Globus Toolkit are trademarks<br>
    held by the University of Chicago
    <br>

    <br>
</td>
</tr>
</table> <!-- Master Table -->

</body>	
</html>
